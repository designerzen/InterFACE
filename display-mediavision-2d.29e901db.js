var P=(o,E)=>()=>(E||o((E={exports:{}}).exports,E),E.exports);var O=P((S,D)=>{(function(o,E,y,n,h){var w=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},r=typeof w[n]=="function"&&w[n],l=r.cache||{},g=typeof D!="undefined"&&typeof D.require=="function"&&D.require.bind(D);function e(i,t){if(!l[i]){if(!o[i]){var u=typeof w[n]=="function"&&w[n];if(!t&&u)return u(i,!0);if(r)return r(i,!0);if(g&&typeof i=="string")return g(i);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}s.resolve=k,s.cache={};var a=l[i]=new e.Module(i);o[i][0].call(a.exports,s,a,a.exports,this)}return l[i].exports;function s(f){var p=s.resolve(f);return p===!1?{}:e(p)}function k(f){var p=o[i][1][f];return p??f}}function d(i){this.id=i,this.bundle=e,this.exports={}}e.isParcelRequire=!0,e.Module=d,e.modules=o,e.cache=l,e.parent=r,e.register=function(i,t){o[i]=[function(u,c){c.exports=t},{}]},Object.defineProperty(e,"root",{get:function(){return w[n]}}),w[n]=e;for(var A=0;A<E.length;A++)e(E[A]);if(y){var _=e(y);typeof S=="object"&&typeof D!="undefined"?D.exports=_:typeof define=="function"&&define.amd?define(function(){return _}):h&&(this[h]=_)}})({VacAv:[function(o,E,y){var n=o("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(y),n.export(y,"DisplayMediaVision2D",()=>A);var h=o("../models/face-landmark-constants"),w=o("../visual/2d.eyes"),r=o("./display-abstract"),l=o("@mediapipe/tasks-vision");const g={color:"hsl(90,50%,50%)",fillColor:"hsl(90,50%,50%)",lineWidth:3,radius:12},e={color:"hsla(90,50%,50%, 0.2)",lineWidth:.5,fillColor:"hsla(90,50%,50%, 0.5)",radius:.25},d={color:"#FF000070",fillColor:"hsls(90,50%,50%, 0.5)",lineWidth:1};class A extends r.AbstractDisplay{canvasContext;constructor(i,t,u){super(i,t,u);this.canvasContext=i.getContext("2d"),this.drawingUtils=new l.DrawingUtils(this.canvasContext),this.available=!0}clear(){this.canvasContext.clearRect(0,0,this.width,this.height)}drawElement(i,t=0,u=0,c=!0){this.canvasContext.save(),c&&(this.canvasContext.translate(this.width,0),this.canvasContext.scale(-1,1)),this.canvasContext.drawImage(i,t,u),this.canvasContext.restore()}drawPerson(i,t,u){const c=i.data,a=c.faceLandmarks,s=i.options,k=s.flipped,f=i.hsla;if(s.drawMask&&(!s.drawNodes&&!s.drawMesh&&s.meshOnSing?i.singing?i.instrumentLoading?this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_TESSELATION,{color:i.hsl,lineWidth:1}):i.isMouthOpen&&this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_TESSELATION,{color:i.hsl,lineWidth:2}):(g.fillColor=i.hsl,this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_FACE_OVAL,g)):s.drawNodes?(e.color=f,e.fillColor=f,this.drawingUtils.drawLandmarks(a,e)):s.drawMesh&&this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_TESSELATION,{color:f,lineWidth:1})),s.drawMouth){const p={h:f,s:s.saturation,l:s.luminosity,a:1},L={h:f,s:s.saturation,l:20,a:1},R={h:90,s:50,l:50,a:1};i.isMouthOpen&&i.singing?this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_LIPS,{color:s.mouth,lineWidth:3}):this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_LIPS,{color:s.mouthClosed,lineWidth:1})}if(!i.areEyesClosed){if(s.drawEyes){const p={iris:s.leftEyeIris,irisRadius:s.irisRadius,pupil:s.pupil,pupilRadius:s.pupilRadius,sclera:"white",scleraRadius:s.scleraRadius,ratio:s.eyeRatio,outline:!1,scaleX:this.width,scaleY:this.height},L=h.LEFT_EYE_PATH.map((T,F)=>a[T]),R=a[h.LEFT_IRIS_PATH[0]],v=h.RIGHT_EYE_PATH.map((T,F)=>a[T]),b=a[h.RIGHT_IRIS_PATH[0]],m=c.eyeDirection;this.drawEye(L,R,i.isLeftEyeOpen,m,p),p.iris=s.rightEyeIris,this.drawEye(v,b,i.isRightEyeOpen,m,p)}}s.drawEyebrows&&(d.color=f,d.fillColor=s.leftEyebrow,this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_LEFT_EYEBROW,d),d.fillColor=s.rightEyebrow,this.drawingUtils.drawConnectors(a,l.FaceLandmarker.FACE_LANDMARKS_RIGHT_EYEBROW,d))}drawEye(i,t,u,c,a){t.diameter=20,(0,w.drawEye)(this.canvasContext,i,t,u,c,a)}overdraw(i=0,t=-1){this.canvasContext.drawImage(this.canvas,i,t)}takePhotograph(i="image/png"){return this.canvas.toDataURL(i)}}},{"../models/face-landmark-constants":"518W7","../visual/2d.eyes":"fpOBR","./display-abstract":"5Ql3r","@mediapipe/tasks-vision":"fKA8n","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],fpOBR:[function(o,E,y){var n=o("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(y),n.export(y,"drawEye",()=>g);var h=o("../maths/maths"),w=o("../palette"),r=n.interopDefault(w);const l={iris:"rgba(100,255,100,0.8)",irisRadius:1,pupil:"rgba(0,0,0,0.8)",pupilRadius:.3,sclera:"white",scleraRadius:4,outline:!1,ratio:1,scaleX:1,scaleY:1},g=(e,d,A,_=!0,i=0,t=l)=>{const u=t.ratio||.8,c=A.diameter*.5;if(e.strokeWidth=0,_){const a=c*t.scleraRadius,s=c*t.irisRadius,k=c*t.pupilRadius,p=(a-s)*-i,L=A.x*t.scaleX,R=A.y*t.scaleY;e.beginPath(),t.outline?d.forEach(v=>{const b=v.x*t.scaleX,m=v.y*t.scaleY;e.lineTo(b,m)}):e.arc(L+p,R,a,0,h.TAU),e.fillStyle=t.sclera,e.fill(),e.closePath(),e.beginPath(),e.fillStyle=t.iris,e.arc(L,R,s,0,h.TAU*u),e.lineTo(L,R),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=t.pupil,e.arc(L,R,k,0,h.TAU),e.fill()}else e.beginPath(),e.lineStyle=t.iris,e.fillStyle=t.pupil,e.moveTo(d[0].x,d[0].y),e.lineTo(d[4].x,d[4].y),e.lineTo(d[6].x,d[6].y),e.closePath(),e.stroke(),e.fill()}},{"../maths/maths":"iDBHd","../palette":"bNJmu","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"5Ql3r":[function(o,E,y){var n=o("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(y),n.export(y,"AbstractDisplay",()=>h);class h{debug=!0;available=!1;canvas;nextDisplayLink;previousDisplayLink;get previousDisplay(){return this.previousDisplayLink}get nextDisplay(){return this.nextDisplayLink}get firstDisplay(){let r=this;for(;r.previousDisplay;)r=r.previousDisplay;return r}get lastDisplay(){let r=this;for(;r.nextDisplayLink;)r=r.nextDisplayLink;return r}addDisplay(r){const l=this.lastDisplay;l.nextDisplayLink=r,r.previousDisplayLink=l}get width(){return this.canvas.width}get height(){return this.canvas.height}constructor(r,l,g){this.canvas=r,this.canvas.width=l,this.canvas.height=g}clear(){}drawPerson(r,l,g){}drawElement(r,l,g){}render(){}takePhotograph(r="image/png"){}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}]},[],null,"parcelRequireaaed")});export default O();
