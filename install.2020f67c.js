!function(e,t,n,o,a,r){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof s.parcelRequiree3fa&&s.parcelRequiree3fa,l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(n,o){if(!t[n]){if(!e[n]){var a="function"==typeof s.parcelRequiree3fa&&s.parcelRequiree3fa;if(!o&&a)return a(n,!0);if(i)return i(n,!0);if(l&&"string"==typeof n)return l(n);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}u.resolve=function(t){return e[n][1][t]||t},u.cache={};var d=t[n]=new c.Module(n);e[n][0].call(d.exports,u,d,d.exports,this)}return t[n].exports;function u(e){return c(u.resolve(e))}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=t,c.parent=i,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return s.parcelRequiree3fa}}),s.parcelRequiree3fa=c;for(var d=0;d<n.length;d++)c(n[d])}({InTlC:[function(e,t,n){var o=e("@parcel/transformer-js/lib/esmodule-helpers.js");o.defineInteropFlag(n),o.export(n,"isSupportingBrowser",(function(){return i})),o.export(n,"installer",(function(){return u}));var a=e("./ui"),r=e("./version");const s=document.documentElement,i=window.hasOwnProperty("BeforeInstallPromptEvent");let l,c=!1,d=!1;const u=async(e=!1)=>{let t,n=!1,o="./manifest.webmanifest",u=[];const p=navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")||navigator.userAgent.includes("Macintosh")&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,f=()=>new Promise(((e,t)=>{n=!1,e()}));document.addEventListener("keyup",(e=>{"Escape"===e.key&&f()}));const m=()=>navigator.standalone?navigator.standalone:!!matchMedia("(display-mode: standalone)").matches,h=async()=>{try{const n=await fetch(o),a=await n.json();if(t=a,a)return(e=a).icons&&e.icons[0]?e.name?e.description||console.error("Your web manifest must have a description listed"):console.error("Your web manifest must have a name listed"):console.error("Your web manifest must have atleast one icon listed"),a}catch(e){return null}var e},g=async e=>{const n=i&&u.length<1&&(d||p);if(d&&"standalone"in navigator&&!1===navigator.standalone||n&&!1===c){await(async()=>{try{await h()}catch(e){console.error("Error getting manifest, check that you have a valid web manifest")}"getInstalledRelatedApps"in navigator&&(u=await navigator.getInstalledRelatedApps())})();console.log("Application is currently ",m()?"installed":"not installed"),console.log({manifestdata:t}),s.classList.add(m()?"installed":"not-installed");const n=document.createElement("button");return n.classList.add("install-app"),n.setAttribute("aria-label",`Click to install ${t.short_name} V:${r.VERSION.replaceAll(".","-")} Date:${r.DATE}`),n.style.setProperty("--logo",`url(${t.icons[0].src})`),n.innerHTML="Install App",a.addTooltip(n),a.setToast("This App can be installed!<br> Click the orange button on the left"),n.addEventListener("click",(async()=>{a.setFeedback("Installing",0);try{const e=await(async()=>new Promise((async(e,t)=>{l?(l.prompt(),await f(),"accepted"===(await l.userChoice).outcome?(console.log("Your PWA has been installed"),c=!0,e(!0)):(console.log("User chose to not install"),c=!1,e(!1))):t("no prompt cached")})))();a.setToast(e?"The App was installed":"Maybe some other time"),e?document.querySelector(".install-app").style.display="none":n.classList.add("later")}catch(e){a.setToast("The App was not installed")}})),(e=e||s).appendChild(n),!0}return s.classList.add(c?"installed":"not-installed"),console.log("Application not installable",{showInstaller:n,installed:c},m()?"installed":"not-installed"),console.error({isSupportingBrowser:i,relatedApps:u,hasPrompt:d,isIOS:p}),!1};return l||d||window.addEventListener("beforeinstallprompt",(t=>{l=t,d=!0,t.preventDefault(),console.error("prompt caught pwas!"),e||p||g()}),{once:!0}),!e&&p&&window.addEventListener("load",(async e=>{g()}),{once:!0}),g};window.addEventListener("beforeinstallprompt",(e=>{l=e,d=!0,e.preventDefault(),console.error("prompt caught pwas!")}),{once:!0})},{"./ui":"4LGWf","./version":"7Fk6F","@parcel/transformer-js/lib/esmodule-helpers.js":"HNevC"}]},{},[]);
//# sourceMappingURL=install.2020f67c.js.map
