{"mappings":"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","sources":["./source/install.js","./node_modules/@parcel/runtime-js/lib/JSRuntime.js"],"sourcesContent":["\r\nimport { setFeedback, setToast, addTooltip } from './ui'\r\n\r\nimport { VERSION, DATE } from './version'\r\n\r\nimport manifestPath from \"url:./manifest.webmanifest\"\r\n// let manifestPath = \"./manifest.webmanifest\"\r\n\t\r\nconst body = document.documentElement\r\n\r\n// const shareMenu = document.getElementById('share-menu')\r\n// check for beforeinstallprompt support\r\nexport const isSupportingBrowser = window.hasOwnProperty(\"BeforeInstallPromptEvent\")\r\n\r\nlet deferredPrompt\r\n\r\n\t\t   \r\nlet installed = false\r\nlet hasPrompt = false\r\n\r\nexport const installer = async (defer=false) => {\r\n\r\n\tlet manifestData\r\n\tlet relatedApps = []\r\n\r\n    // handle iOS specifically\r\n    // this includes the regular iPad\r\n    // and the iPad pro\r\n    // but not macOS\r\n    const isIOS =\r\n      navigator.userAgent.includes(\"iPhone\") || navigator.userAgent.includes(\"iPad\") ||\r\n      (navigator.userAgent.includes(\"Macintosh\") && navigator.maxTouchPoints && navigator.maxTouchPoints > 2)\r\n\r\n\tconst cancelInstall = () =>{\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t// close the modal\r\n\t\t  openModal = false\r\n\t\r\n\t\t//   if (this.hasAttribute(\"openmodal\")) {\r\n\t\t// \tthis.removeAttribute(\"openmodal\")\r\n\t\t//   }\r\n\t\r\n\t\t//   let event = new CustomEvent(\"hide\")\r\n\t\t//   this.dispatchEvent(event)\r\n\t\r\n\t\t  resolve()\r\n\t\t})\r\n\t}\r\n\r\n    document.addEventListener(\"keyup\", (event) => {\r\n      if (event.key === \"Escape\") {\r\n        cancelInstall()\r\n      }\r\n\t})\r\n\t\r\n\tconst getInstalledStatus = () => {\r\n\t\tif (navigator.standalone) {\r\n\t\t  return navigator.standalone\r\n\t\t} else if (matchMedia(\"(display-mode: standalone)\").matches) {\r\n\t\t  return true\r\n\t\t} else {\r\n\t\t  return false\r\n\t\t}\r\n\t}\r\n\r\n\tconst shouldShowInstall = () => {\r\n\t\tconst eligibleUser = isSupportingBrowser &&\r\n\t\trelatedApps.length < 1 &&\r\n\t\t(hasPrompt || isIOS)\r\n\t\r\n\t\treturn eligibleUser\r\n\t}\r\n\r\n\t// Check that the manifest has our 3 required properties\r\n\t// If not console an error to the user and return\r\n\tconst checkManifest = (manifestToCheck) => {\r\n\t  if (!manifestToCheck.icons || !manifestToCheck.icons[0]) {\r\n\t\tconsole.error(\"Your web manifest must have atleast one icon listed\");\r\n\t\treturn\r\n\t  }\r\n  \r\n\t  if (!manifestToCheck.name) {\r\n\t\tconsole.error(\"Your web manifest must have a name listed\");\r\n\t\treturn\r\n\t  }\r\n  \r\n\t  if (!manifestToCheck.description) {\r\n\t\tconsole.error(\"Your web manifest must have a description listed\");\r\n\t\treturn\r\n\t  }\r\n\t}\r\n\r\n\tconst getManifestData = async () => {\r\n\t\ttry {\r\n\t\t  const response = await fetch(manifestPath)\r\n\t\t  const data = await response.json()\r\n\t\r\n\t\t  manifestData = data\r\n\t\r\n\t\t  if (data) \r\n\t\t  {\r\n\t\t\t// any point if it only logs and still continues?\r\n\t\t\tcheckManifest(data)\r\n\t\t\treturn data\r\n\t\t  }\r\n\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Manifest could not be loaded\",err)\r\n\t\t  \treturn null\r\n\t\t}\r\n\t  }\r\n\t\r\n\t  \r\n\tconst firstUpdated = async () => {\r\n\t\tif (manifestPath) \r\n\t\t{\r\n\t\t  try {\r\n\t\t\tawait getManifestData()\r\n\t\t  } catch (err) {\r\n\t\t\tconsole.error(\r\n\t\t\t  \"Error getting manifest, check that you have a valid web manifest\"\r\n\t\t\t)\r\n\t\t  }\r\n\t\t}\r\n\t\r\n\t\tif (\"getInstalledRelatedApps\" in navigator) {\r\n\t\t\trelatedApps = await navigator.getInstalledRelatedApps()\r\n\t\t}\r\n\t}\r\n\r\n\t// This is created from the manifest\r\n\tconst createOverlayMarkup = () =>\r\n\t`<button id=\"openButton\" class=\"install-app\">\r\n\tInstall InterFACE Version ${VERSION}\r\n\t</button>\r\n\t\r\n\t<dialog open>\r\n\t\t<!-- background needs to cancel install too? -->\r\n\t\t<header id=\"logoContainer\">\r\n\t\t\t<img src=\"${ manifestData.icons[0].src }\" alt=\"App Logo\"/>\r\n\r\n\t\t\t<div id=\"installTitle\">\r\n\t\t\t\t<h1>${ manifestData.short_name || manifestData.name}</h1>\r\n\t\t\t\t<p id=\"desc\">${explainer}</p>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\r\n\t\t<button id=\"closeButton\" click=\"\" aria-label=\"Close\">\r\n\t\t\t<svg width=\"23\" height=\"22\" viewBox=\"0 0 23 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t<path opacity=\"0.33\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.11932 0.357981C1.59693 -0.119327 2.37129 -0.119327 2.8489 0.357981L11.7681 9.27152L20.6873 0.357981C21.165 -0.119327 21.9393 -0.119327 22.4169 0.357981C22.8945 0.835288 22.8945 1.60916 22.4169 2.08646L13.4977 11L22.4169 19.9135C22.8945 20.3908 22.8945 21.1647 22.4169 21.642C21.9393 22.1193 21.165 22.1193 20.6873 21.642L11.7681 12.7285L2.8489 21.642C2.37129 22.1193 1.59693 22.1193 1.11932 21.642C0.641705 21.1647 0.641705 20.3908 1.11932 19.9135L10.0385 11L1.11932 2.08646C0.641705 1.60916 0.641705 0.835288 1.11932 0.357981Z\" fill=\"#60656D\"/>\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\r\n\r\n\t\t<div id=\"contentContainer\">\r\n\r\n\t\t\t<div id=\"featuresScreenDiv\">\r\n\r\n\t\t\t${ manifestData.features ? \r\n\t\t\t\t`<div id=\"keyFeatures\">\r\n\t\t\t\t<h3>Features</h3>\r\n\t\t\t\t<ul>\r\n\t\t\t\t${\r\n\t\t\t\t\tmanifestData.features\r\n\t\t\t\t\t? manifestDatafeatures.map((feature) => ` <li>${feature}</li> ` )\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t</div>`\r\n\t\t\t\t: null\r\n\t\t\t}\r\n\r\n\t\t\t${manifestData.screenshots\r\n\t\t\t\t? html`\r\n\t\t\t\t\t<div id=\"screenshotsContainer\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t@click=\"${() => this.scrollToLeft()}\"\r\n\t\t\t\t\t\t\taria-label=\"previous image\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 512 512\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\td=\"M401.4 224h-214l83-79.4c11.9-12.5 11.9-32.7 0-45.2s-31.2-12.5-43.2 0L89 233.4c-6 5.8-9 13.7-9 22.4v.4c0 8.7 3 16.6 9 22.4l138.1 134c12 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2l-83-79.4h214c16.9 0 30.6-14.3 30.6-32 .1-18-13.6-32-30.5-32z\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<section id=\"screenshots\">\r\n\t\t\t\t\t\t${manifestData.screenshots.map((screen) => {\r\n\t\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<img alt=\"App Screenshot\" src=\"${screen.src}\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t@click=\"${() => this.scrollToRight()}\"\r\n\t\t\t\t\t\taria-label=\"next image\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 512 512\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\td=\"M284.9 412.6l138.1-134c6-5.8 9-13.7 9-22.4v-.4c0-8.7-3-16.6-9-22.4l-138.1-134c-12-12.5-31.3-12.5-43.2 0-11.9 12.5-11.9 32.7 0 45.2l83 79.4h-214c-17 0-30.7 14.3-30.7 32 0 18 13.7 32 30.6 32h214l-83 79.4c-11.9 12.5-11.9 32.7 0 45.2 12 12.5 31.3 12.5 43.3 0z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t`\r\n\t\t\t\t: null\r\n\t\t\t}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div id=\"descriptionWrapper\">\r\n\t\t\t\t<h3>${this.descriptionheader}</h3>\r\n\t\t\t\t<p id=\"manifest-description\">${this.manifestdata.description}</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t\r\n\t\t<button id=\"openButton\" class=\"install-app\">Install InterFACE Version ${VERSION}</button>\r\n\t\t<button class=\"cancel-install\">Cancel</button>\r\n\r\n\t\t<p id=\"iosText\">${iosinstallinfotext}</p> \r\n\r\n\t</dialog>\r\n\t`\r\n\r\n\t\r\n\tconst install = async () => new Promise( async (resolve,reject)=>{\r\n\r\n\t\tif (deferredPrompt) \r\n\t\t{\r\n\t\t\tdeferredPrompt.prompt()\r\n\t\t\r\n\t\t\t//   let event = new CustomEvent(\"show\")\r\n\t\t\t//   this.dispatchEvent(event)\r\n\t\t\tawait cancelInstall()\r\n\r\n\t\t\t// brute force hide the button?\r\n\t\t\t// set installed to true because we dont\r\n\t\t\t// want to show the install button to\r\n\t\t\t// a user who chose not to install?\r\n\t\t\t\t\r\n\t\t \tconst choiceResult = await deferredPrompt.userChoice\r\n\t\r\n\t\t\tif (choiceResult.outcome === \"accepted\") \r\n\t\t\t{\r\n\t\t\t\tconsole.log(\"Your PWA has been installed\")\r\n\t\t\r\n\t\t\t\tinstalled = true\r\n\t\r\n\t\t\t\tresolve(true)\r\n\r\n\t\t  \t} else {\r\n\r\n\t\t\t\tconsole.log(\"User chose to not install\")\r\n\t\t\r\n\t\t\t\tinstalled = false\r\n\t\t\t\t\r\n\t\t\t\tresolve(false);\r\n\t\t  \t}\r\n\r\n\t\t} else {\r\n\t\t\t  // handle else case\r\n\t\t\t  reject(\"no prompt cached\")\r\n\t\t}\r\n\t})\r\n\r\n\tconst begin = async (destination) => {\r\n\r\n\t\tconst showInstaller = shouldShowInstall()\r\n\t\tif (hasPrompt && (\"standalone\" in navigator && navigator.standalone === false) || (showInstaller && installed === false))\r\n\t\t{\r\n\t\t\t// we need to show the installer!\t// const test = await getManifestData()\r\n\t\t\tconst test = await firstUpdated()\r\n\t\t\t\r\n\t\t\tbody.classList.add(getInstalledStatus() ? \"installed\" : \"not-installed\")\r\n\r\n\t\t\t// show install button or update button???\r\n\t\t\t// reveal update button?\r\n\t\t\tconst button = document.createElement('button')\r\n\t\t\tbutton.classList.add(\"install-app\")\r\n\t\t\tbutton.setAttribute(\"aria-label\",`Click to install ${manifestData.short_name} V:${VERSION.replaceAll(\".\",\"-\")} Date:${DATE}`  )\r\n\t\t\tbutton.style.setProperty(\"--logo\",`url(${ manifestData.icons[0].src })`)\r\n\r\n\t\t\tbutton.innerHTML = \"Install App\"\r\n\t\t\t\r\n\t\t\taddTooltip(button)\r\n\r\n\t\t\tsetToast(\"This App can be installed!<br> Click the orange button on the left\")\r\n\r\n\t\t\t// on button press...\r\n\t\t\tbutton.addEventListener('click', async ()=>{\r\n\t\t\t\r\n\t\t\t\t// show overlay with install button or just install directly?\r\n\t\t\t\tsetFeedback(\"Installing\",0)\r\n\t\t\t\ttry{\r\n\t\t\t\t\t// installed\r\n\t\t\t\t\tconst success = await install()\r\n\t\t\t\t\tsetToast( success ? \"The App was installed\" : \"Maybe some other time\" )\r\n\t\t\t\t\tif (!success)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// show buton?\r\n\t\t\t\t\t\t//document.querySelector(\".install-app\").style.display = \"none\"\r\n\t\t\t\t\t\tbutton.classList.add(\"later\")\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// hide button\r\n\t\t\t\t\t\tdocument.querySelector(\".install-app\").style.display = \"none\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(error){\r\n\t\t\t\t\tsetToast(\"The App was not installed\")\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t} )\r\n\r\n\t\t\tdestination = destination || body\r\n    \r\n\t\t\tdestination.appendChild(button)\r\n\r\n\t\t\t// console.log(\"Application is currently \", getInstalledStatus() ? \"installed\" : \"not installed\" )\r\n\t\t\t// console.log({manifestdata: manifestData})\r\n\t\t\r\n\t\t\treturn true\r\n\r\n\t\t}else{\r\n\r\n\t\t\tbody.classList.add( installed ? \"installed\" : \"not-installed\" )\r\n\r\n\t\t\t// we are already showing?\r\n\t\t\t// console.log(\"Application not installable\", {showInstaller, installed} , getInstalledStatus() ? \"installed\" : \"not-installed\" )\r\n\t\t\t// console.error( { isSupportingBrowser, relatedApps, hasPrompt, isIOS} )\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\t  \r\n\t// hijack an install event\r\n\tif (!deferredPrompt && !hasPrompt)\r\n\t{\r\n\t\twindow.addEventListener(\"beforeinstallprompt\", event => {\r\n\t\t\t\r\n\t\t\tdeferredPrompt = event\r\n\t\t\thasPrompt = true\r\n\t\t\tevent.preventDefault() \r\n\r\n\t\t\tif (!defer && !isIOS)\r\n\t\t\t{\r\n\t\t\t\tbegin()\r\n\t\t\t}\r\n\r\n\t\t}, {once:true})\t\r\n\t}\r\n  \r\n\r\n\tif (!defer && isIOS)\r\n\t{\r\n\t\twindow.addEventListener(\"load\", async (event) => {\r\n\t\t\t\r\n\t\t\tbegin()\r\n\r\n\t\t}, {once:true})\t\t\r\n\t}\r\n\r\n\treturn begin\r\n}\r\n\r\n\r\nwindow.addEventListener(\"beforeinstallprompt\", event => {\r\n\t\t\r\n\tdeferredPrompt = event\r\n\thasPrompt = true\r\n\tevent.preventDefault() \r\n\r\n}, {once:true})\r\n /*\r\n\r\n*/\r\n//   render() {\r\n//     return html`\r\n//       ${(\"standalone\" in navigator &&\r\n//         (navigator as any).standalone === false) ||\r\n//       (this.usecustom !== true &&\r\n//         this.shouldShowInstall() &&\r\n//         this.installed === false)\r\n//         ? html`<button\r\n//             part=\"openButton\"\r\n//             id=\"openButton\"\r\n//             @click=\"${() => this.openPrompt()}\"\r\n//           >\r\n//             <slot>\r\n//               ${this.installbuttontext}\r\n//             </slot>\r\n//           </button>`\r\n//         : null}\r\n//       ${this.openmodal === true\r\n//         ? html`\r\n//           <div id=\"installModalWrapper\">\r\n//           ${\r\n//             this.openmodal\r\n//               ? html`<div\r\n//                   id=\"background\"\r\n//                   @click=\"${() => this.cancel()}\"\r\n//                 ></div>`\r\n//               : null\r\n//           }\r\n//           <div id=\"installModal\" part=\"installModal\">\r\n//           <div id=\"headerContainer\">\r\n//           <div id=\"logoContainer\">\r\n//             <img src=\"${\r\n//               this.iconpath ? this.iconpath : this.manifestdata.icons[0].src\r\n//             }\" alt=\"App Logo\"/>\r\n\r\n//             <div id=\"installTitle\">\r\n//               <h1>${this.manifestdata.short_name || this.manifestdata.name}</h1>\r\n\r\n//               <p id=\"desc\">\r\n//                 ${this.explainer}\r\n//               </p>\r\n//             </div>\r\n//           </div>\r\n\r\n//           <button id=\"closeButton\" @click=\"${() =>\r\n//             this.cancel()}\" aria-label=\"Close\">\r\n//             <svg width=\"23\" height=\"22\" viewBox=\"0 0 23 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n//               <path opacity=\"0.33\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.11932 0.357981C1.59693 -0.119327 2.37129 -0.119327 2.8489 0.357981L11.7681 9.27152L20.6873 0.357981C21.165 -0.119327 21.9393 -0.119327 22.4169 0.357981C22.8945 0.835288 22.8945 1.60916 22.4169 2.08646L13.4977 11L22.4169 19.9135C22.8945 20.3908 22.8945 21.1647 22.4169 21.642C21.9393 22.1193 21.165 22.1193 20.6873 21.642L11.7681 12.7285L2.8489 21.642C2.37129 22.1193 1.59693 22.1193 1.11932 21.642C0.641705 21.1647 0.641705 20.3908 1.11932 19.9135L10.0385 11L1.11932 2.08646C0.641705 1.60916 0.641705 0.835288 1.11932 0.357981Z\" fill=\"#60656D\"/>\r\n//             </svg>\r\n//           </button>\r\n//         </div>\r\n\r\n//         <div id=\"contentContainer\">\r\n\r\n//         <div id=\"featuresScreenDiv\">\r\n\r\n//           ${\r\n//             this.manifestdata.features\r\n//               ? html`<div id=\"keyFeatures\">\r\n//             <h3>${this.featuresheader}</h3>\r\n//             <ul>\r\n//               ${\r\n//                 this.manifestdata.features\r\n//                   ? this.manifestdata.features.map((feature) => {\r\n//                       return html` <li>${feature}</li> `;\r\n//                     })\r\n//                   : null\r\n//               }\r\n//             </ul>\r\n//           </div>\r\n//           </div>`\r\n//               : null\r\n//           }\r\n\r\n//           ${\r\n//             this.manifestdata.screenshots\r\n//               ? html`\r\n//                   <div id=\"screenshotsContainer\">\r\n//                     <button\r\n//                       @click=\"${() => this.scrollToLeft()}\"\r\n//                       aria-label=\"previous image\"\r\n//                     >\r\n//                       <svg\r\n//                         xmlns=\"http://www.w3.org/2000/svg\"\r\n//                         viewBox=\"0 0 512 512\"\r\n//                       >\r\n//                         <path\r\n//                           d=\"M401.4 224h-214l83-79.4c11.9-12.5 11.9-32.7 0-45.2s-31.2-12.5-43.2 0L89 233.4c-6 5.8-9 13.7-9 22.4v.4c0 8.7 3 16.6 9 22.4l138.1 134c12 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2l-83-79.4h214c16.9 0 30.6-14.3 30.6-32 .1-18-13.6-32-30.5-32z\"\r\n//                         />\r\n//                       </svg>\r\n//                     </button>\r\n//                     <section id=\"screenshots\">\r\n//                       ${this.manifestdata.screenshots.map((screen) => {\r\n//                         return html`\r\n//                           <div>\r\n//                             <img alt=\"App Screenshot\" src=\"${screen.src}\" />\r\n//                           </div>\r\n//                         `;\r\n//                       })}\r\n//                     </section>\r\n//                     <button\r\n//                       @click=\"${() => this.scrollToRight()}\"\r\n//                       aria-label=\"next image\"\r\n//                     >\r\n//                       <svg\r\n//                         xmlns=\"http://www.w3.org/2000/svg\"\r\n//                         viewBox=\"0 0 512 512\"\r\n//                       >\r\n//                         <path\r\n//                           d=\"M284.9 412.6l138.1-134c6-5.8 9-13.7 9-22.4v-.4c0-8.7-3-16.6-9-22.4l-138.1-134c-12-12.5-31.3-12.5-43.2 0-11.9 12.5-11.9 32.7 0 45.2l83 79.4h-214c-17 0-30.7 14.3-30.7 32 0 18 13.7 32 30.6 32h214l-83 79.4c-11.9 12.5-11.9 32.7 0 45.2 12 12.5 31.3 12.5 43.3 0z\"\r\n//                         />\r\n//                       </svg>\r\n//                     </button>\r\n//                   </div>\r\n//                 `\r\n//               : null\r\n//           }\r\n//           </div>\r\n\r\n//           <div id=\"descriptionWrapper\">\r\n//             <h3>${this.descriptionheader}</h3>\r\n//             <p id=\"manifest-description\">${this.manifestdata.description}</p>\r\n//           </div>\r\n//         </div>\r\n\r\n//         ${\r\n//           !this.isIOS\r\n//             ? html`<div id=\"buttonsContainer\">\r\n//           ${\r\n//             this.deferredprompt\r\n//               ? html`<button\r\n//                   id=\"installButton\"\r\n//                   @click=\"${() => this.install()}\"\r\n//                 >\r\n//                   ${this.installbuttontext} ${this.manifestdata.short_name}\r\n//                 </button>`\r\n//               : html`<button\r\n//                   @click=\"${() => this.cancel()}\"\r\n//                   id=\"installCancelButton\"\r\n//                 >\r\n//                   ${this.cancelbuttontext}\r\n//                 </button>`\r\n//           }\r\n//         </div>\r\n//           </div>`\r\n//             : html`<p id=\"iosText\">${this.iosinstallinfotext}</p>`\r\n//         }\r\n//         `\r\n//         : null}\r\n//     `;\r\n//   }\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Allow app to be installed\r\n// FIXME: Lazy load this whilst camera searching...\r\n\r\n// @customElement(\"pwa-install\")\r\n// export class pwainstall extends LitElement {\r\n//   @property({ type: String }) manifestpath: string = \"manifest.json\";\r\n//   @property({ type: String }) iconpath: string;\r\n//   @property({ type: Object }) manifestdata: ManifestData;\r\n\r\n//   @property({ type: Boolean }) openmodal: boolean = false;\r\n//   @property({ type: Boolean }) showopen: boolean;\r\n//   @property({ type: Boolean }) isSupportingBrowser: boolean;\r\n//   @property({ type: Boolean }) isIOS: boolean;\r\n//   @property({ type: Boolean }) installed: boolean;\r\n//   @property({ type: Boolean }) hasprompt: boolean = false;\r\n//   @property({ type: Boolean }) usecustom: boolean;\r\n//   @property({ type: Array }) relatedApps: any[] = [];\r\n\r\n//   @property({ type: String }) explainer: string =\r\n//     \"This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. \";\r\n//   @property({ type: String }) featuresheader: string = \"Key Features\";\r\n//   @property({ type: String }) descriptionheader: string = \"Description\";\r\n//   @property({ type: String }) installbuttontext: string = \"Install\";\r\n//   @property({ type: String }) cancelbuttontext: string = \"Cancel\";\r\n//   @property({ type: String }) iosinstallinfotext: string =\r\n//     \"Tap the share button and then 'Add to Homescreen'\";\r\n\r\n//   @property() deferredprompt: any;\r\n\r\n//   static get styles() {\r\n//     return css`\r\n//       :host {\r\n//         --install-focus-color: #919c9c;\r\n//         --install-button-color: #0078d4;\r\n//         --modal-z-index: 9999;\r\n//         --background-z-index: 9998;\r\n//         --modal-background-color: white;\r\n//       }\r\n\r\n//       button {\r\n//         outline: none;\r\n//       }\r\n\r\n//       #installModalWrapper {\r\n//         height: 100vh;\r\n//         width: 100vw;\r\n//         overflow: auto;\r\n//         position: fixed;\r\n//         bottom: 0;\r\n//         top: 0;\r\n//         left: 0;\r\n//         right: 0;\r\n//         z-index: var(--modal-z-index);\r\n\r\n//         display: flex;\r\n//         justify-content: center;\r\n//         align-items: center;\r\n//       }\r\n\r\n//       #descriptionWrapper {\r\n//         margin-bottom: 3em;\r\n//       }\r\n\r\n//       #installModal {\r\n//         position: absolute;\r\n//         background: var(--modal-background-color);\r\n//         font-family: sans-serif;\r\n//         box-shadow: 0px 25px 26px rgba(32, 36, 50, 0.25),\r\n//           0px 5px 9px rgba(51, 58, 83, 0.53);\r\n//         border-radius: 10px;\r\n//         display: flex;\r\n//         flex-direction: column;\r\n//         padding: 0;\r\n\r\n//         animation-name: opened;\r\n//         animation-duration: 150ms;\r\n\r\n//         z-index: var(--modal-z-index);\r\n\r\n//         max-width: 56em;\r\n//       }\r\n\r\n//       @keyframes opened {\r\n//         from {\r\n//           transform: scale(0.8, 0.8);\r\n//           opacity: 0.4;\r\n//         }\r\n//         to {\r\n//           transform: scale(1, 1);\r\n//           opacity: 1;\r\n//         }\r\n//       }\r\n\r\n//       @keyframes mobile {\r\n//         from {\r\n//           opacity: 0.6;\r\n//         }\r\n//         to {\r\n//           opacity: 1;\r\n//         }\r\n//       }\r\n\r\n//       @keyframes fadein {\r\n//         from {\r\n//           opacity: 0.2;\r\n//         }\r\n//         to {\r\n//           opacity: 1;\r\n//         }\r\n//       }\r\n\r\n//       #background {\r\n//         position: fixed;\r\n//         top: 0;\r\n//         bottom: 0;\r\n//         left: 0;\r\n//         right: 0;\r\n//         background: #e3e3e3b0;\r\n//         backdrop-filter: blur(5px);\r\n//         z-index: var(--background-z-index);\r\n\r\n//         animation-name: fadein;\r\n//         animation-duration: 250ms;\r\n//       }\r\n\r\n//       #headerContainer {\r\n//         display: flex;\r\n//         justify-content: space-between;\r\n//         margin: 40px;\r\n//         margin-bottom: 32px;\r\n//       }\r\n\r\n//       #headerContainer h1 {\r\n//         font-size: 34px;\r\n//         color: #3c3c3c;\r\n//         margin-top: 20px;\r\n//         margin-bottom: 7px;\r\n//       }\r\n\r\n//       #headerContainer img {\r\n//         height: 122px;\r\n//         width: 122px;\r\n//         background: lightgrey;\r\n//         border-radius: 10px;\r\n//         padding: 12px;\r\n//         border-radius: 24px;\r\n//         margin-right: 24px;\r\n//       }\r\n\r\n//       #buttonsContainer {\r\n//         display: flex;\r\n//         justify-content: flex-end;\r\n//         position: relative;\r\n//         height: 100px;\r\n\r\n//         background: #dedede75;\r\n//         width: 100%;\r\n//         right: 0em;\r\n//         border-radius: 0px 0px 12px 12px;\r\n//       }\r\n\r\n//       #openButton,\r\n//       #installButton,\r\n//       #installCancelButton {\r\n//         text-align: center;\r\n//         align-content: center;\r\n//         align-self: center;\r\n//         vertical-align: middle;\r\n//         justify-self: flex-end;\r\n//         line-height: 200%;\r\n//         flex: 0 0 auto;\r\n//         display: inline-block;\r\n//         background: #0078d4;\r\n//         color: #ffffff;\r\n//         cursor: pointer;\r\n//         border: solid 1px rgba(0, 0, 0, 0);\r\n//         outline: none;\r\n//       }\r\n\r\n//       #openButton {\r\n//         background: var(--install-button-color);\r\n//       }\r\n\r\n//       #openButton:focus {\r\n//         outline: auto;\r\n//         outline: -webkit-focus-ring-color auto 1px;\r\n//       }\r\n\r\n//       #installButton,\r\n//       #installCancelButton {\r\n//         min-width: 130px;\r\n//         margin-right: 30px;\r\n//         background: var(--install-button-color);\r\n//         border-radius: 20px;\r\n//         font-weight: 600;\r\n//         font-size: 14px;\r\n//         line-height: 21px;\r\n//         padding-top: 10px;\r\n//         padding-bottom: 9px;\r\n//         padding-left: 20px;\r\n//         padding-right: 20px;\r\n//         outline: none;\r\n//         color: white;\r\n//       }\r\n\r\n//       #closeButton {\r\n//         background: transparent;\r\n//         border: none;\r\n//         color: black;\r\n//         padding-left: 12px;\r\n//         padding-right: 12px;\r\n//         padding-top: 4px;\r\n//         padding-bottom: 4px;\r\n//         border-radius: 20px;\r\n//         font-weight: 600;\r\n//         outline: none;\r\n//         cursor: pointer;\r\n//         align-self: self-end;\r\n//       }\r\n\r\n//       #closeButton:focus,\r\n//       #installButton:focus,\r\n//       #installCancelButton:focus {\r\n//         box-shadow: 0 0 0 3px var(--install-focus-color);\r\n//       }\r\n\r\n//       #contentContainer {\r\n//         margin-left: 40px;\r\n//         margin-right: 40px;\r\n//         flex: 1;\r\n//       }\r\n\r\n//       #contentContainer h3 {\r\n//         font-size: 22px;\r\n//         color: #3c3c3c;\r\n//         margin-bottom: 12px;\r\n//       }\r\n\r\n//       #contentContainer p {\r\n//         font-size: 14px;\r\n//         color: #3c3c3c;\r\n//       }\r\n\r\n//       #featuresScreenDiv {\r\n//         display: flex;\r\n//         justify-content: space-around;\r\n//         align-items: center;\r\n//         margin-right: 20px;\r\n//       }\r\n\r\n//       #featuresScreenDiv h3 {\r\n//         font-style: normal;\r\n//         font-weight: 600;\r\n//         font-size: 22px;\r\n//         line-height: 225%;\r\n//         margin-top: 0px;\r\n//       }\r\n\r\n//       #keyFeatures {\r\n//         overflow: hidden;\r\n//         padding-right: 2em;\r\n//       }\r\n\r\n//       #keyFeatures ul {\r\n//         padding-inline-start: 22px;\r\n//         margin-block-start: 12px;\r\n//       }\r\n\r\n//       #featuresScreenDiv #keyFeatures li {\r\n//         font-style: normal;\r\n//         font-weight: 600;\r\n//         font-size: 16px;\r\n//         line-height: 29px;\r\n//         color: rgba(51, 51, 51, 0.72);\r\n//       }\r\n\r\n//       #screenshotsContainer {\r\n//         max-height: 220px;\r\n//         display: flex;\r\n//         max-width: 30em;\r\n//       }\r\n\r\n//       #screenshotsContainer button {\r\n//         border: none;\r\n//         width: 4em;\r\n\r\n//         transition: background-color 0.2s;\r\n//       }\r\n\r\n//       #screenshotsContainer button:focus,\r\n//       #screenshotsContainer button:hover {\r\n//         background-color: #bbbbbb;\r\n//       }\r\n\r\n//       #screenshotsContainer button svg {\r\n//         width: 28px;\r\n//         fill: #6b6969;\r\n//       }\r\n\r\n//       #screenshots {\r\n//         display: flex;\r\n//         scroll-snap-type: x mandatory;\r\n//         flex-wrap: wrap;\r\n//         flex-direction: column;\r\n//         overflow-x: scroll;\r\n\r\n//         width: 22em;\r\n//         max-height: 220px;\r\n\r\n//         -webkit-overflow-scrolling: touch;\r\n//       }\r\n\r\n//       #screenshots div {\r\n//         display: flex;\r\n//         align-items: center;\r\n//         justify-content: center;\r\n//         scroll-snap-align: start;\r\n\r\n//         height: 14em;\r\n//         width: 100%;\r\n\r\n//         background: #efefef;\r\n//       }\r\n\r\n//       #screenshots img {\r\n//         height: 100%;\r\n//         object-fit: contain;\r\n//       }\r\n\r\n//       #screenshots::-webkit-scrollbar {\r\n//         display: none;\r\n//       }\r\n\r\n//       #tagsDiv {\r\n//         margin-top: 1em;\r\n//         margin-bottom: 1em;\r\n//       }\r\n\r\n//       #desc {\r\n//         width: 100%;\r\n//         max-width: 40em;\r\n//         font-size: 14px;\r\n//         color: #7e7e7e;\r\n//         text-overflow: ellipsis;\r\n//         overflow: hidden;\r\n//       }\r\n\r\n//       #logoContainer {\r\n//         display: flex;\r\n//       }\r\n\r\n//       #tagsDiv span {\r\n//         background: grey;\r\n//         color: white;\r\n//         padding-left: 12px;\r\n//         padding-right: 12px;\r\n//         padding-bottom: 4px;\r\n//         font-weight: bold;\r\n//         border-radius: 24px;\r\n//         margin-right: 12px;\r\n//         padding-top: 1px;\r\n//       }\r\n\r\n//       #iosText {\r\n//         color: var(--install-button-color);\r\n//         text-align: center;\r\n//         font-weight: bold;\r\n\r\n//         position: fixed;\r\n//         bottom: 0;\r\n//         left: 0;\r\n//         right: 0;\r\n//         backdrop-filter: blur(10px);\r\n//         background: rgba(239, 239, 239, 0.17);\r\n//         margin: 0;\r\n//         padding: 2em;\r\n//       }\r\n\r\n//       #manifest-description {\r\n//         white-space: pre-wrap;\r\n//       }\r\n\r\n//       @media (max-height: 780px) {\r\n//         #buttonsContainer {\r\n//           height: 70px;\r\n//           background: transparent;\r\n//         }\r\n//       }\r\n\r\n//       @media (max-width: 1220px) {\r\n//         #installModal {\r\n//           margin: 0;\r\n//           border-radius: 0px;\r\n//           min-height: 100%;\r\n//           width: 100%;\r\n\r\n//           animation-name: mobile;\r\n//           animation-duration: 250ms;\r\n//         }\r\n\r\n//         #screenshots {\r\n//           justify-content: center;\r\n//         }\r\n//       }\r\n\r\n//       @media (max-width: 962px) {\r\n//         #headerContainer h1 {\r\n//           margin-top: 0;\r\n//           margin-bottom: 0;\r\n//         }\r\n\r\n//         #logoContainer {\r\n//           align-items: center;\r\n//         }\r\n\r\n//         #desc {\r\n//           display: none;\r\n//         }\r\n\r\n//         #headerContainer {\r\n//           margin-bottom: 24px;\r\n//         }\r\n\r\n//         #headerContainer img {\r\n//           height: 42px;\r\n//           width: 42px;\r\n//         }\r\n//       }\r\n\r\n//       @media (max-width: 800px) {\r\n//         #background {\r\n//           display: none;\r\n//         }\r\n\r\n//         #installModal {\r\n//           overflow: scroll;\r\n//           box-shadow: none;\r\n//           max-width: 100%;\r\n//           height: 100%;\r\n//         }\r\n\r\n//         #screenshotsContainer {\r\n//           width: 100%;\r\n//         }\r\n\r\n//         #screenshots img {\r\n//           height: 180px;\r\n//         }\r\n\r\n//         #buttonsContainer {\r\n//           display: flex;\r\n//           justify-content: center;\r\n//           bottom: 0;\r\n//           margin-bottom: 0;\r\n//           border-radius: 0;\r\n\r\n//           padding-top: 1em;\r\n//           padding-bottom: 1em;\r\n//         }\r\n\r\n//         #buttonsContainer #installButton {\r\n//           margin-right: 0px;\r\n//         }\r\n\r\n//         #featuresScreenDiv {\r\n//           flex-direction: column;\r\n//           align-items: flex-start;\r\n//           margin-right: 0px;\r\n//         }\r\n\r\n//         #headerContainer {\r\n//           margin: 20px;\r\n//         }\r\n\r\n//         #desc {\r\n//           display: none;\r\n//         }\r\n\r\n//         #contentContainer {\r\n//           margin-left: 20px;\r\n//           margin-right: 20px;\r\n//           margin-bottom: 5em;\r\n//         }\r\n\r\n//         #headerContainer img {\r\n//           height: 60px;\r\n//           width: 60px;\r\n//           margin-right: 12px;\r\n//         }\r\n\r\n//         #buttonsContainer {\r\n//           position: fixed;\r\n//           bottom: 0;\r\n//           background: #efefef2b;\r\n//           backdrop-filter: blur(10px);\r\n//         }\r\n//       }\r\n\r\n//       @media (max-width: 400px) {\r\n//         #headerContainer h1 {\r\n//           font-size: 26px;\r\n//         }\r\n\r\n//         #headerContainer img {\r\n//           height: 40px;\r\n//           width: 40px;\r\n//         }\r\n\r\n//         #featuresScreenDiv h3 {\r\n//           font-size: 18px;\r\n//           margin-bottom: 0px;\r\n//         }\r\n\r\n//         #keyFeatures ul {\r\n//           margin-top: 0px;\r\n//         }\r\n//       }\r\n\r\n//       @media all and (display-mode: standalone) {\r\n//         button {\r\n//           display: none;\r\n//         }\r\n//       }\r\n\r\n//       @media (prefers-color-scheme: dark) {\r\n//         :host {\r\n//           --modal-background-color: black;\r\n//         }\r\n\r\n//         #installModal h1,\r\n//         #installModal h2,\r\n//         #installModal h3,\r\n//         #installModal p,\r\n//         #featuresScreenDiv #keyFeatures li {\r\n//           color: #ffffff;\r\n//         }\r\n\r\n//         #closeButton svg path {\r\n//           fill: #ffffff;\r\n//           opacity: 1;\r\n//         }\r\n\r\n//         #buttonsContainer {\r\n//           background: rgb(36 36 36);\r\n//         }\r\n//       }\r\n\r\n//       /* 08-26-2020: supported by only safari desktop */\r\n//       @media (inverted-colors: inverted) {\r\n//         :host {\r\n//           --install-focus-color: #6e6363;\r\n//           --install-button-color: #ff872b;\r\n//           --modal-background-color: black;\r\n//         }\r\n\r\n//         #installModal h1,\r\n//         #installModal h2,\r\n//         #installModal h3,\r\n//         #installModal p,\r\n//         #featuresScreenDiv #keyFeatures li {\r\n//           color: #ffffff;\r\n//         }\r\n\r\n//         #closeButton svg path {\r\n//           fill: #ffffff;\r\n//           opacity: 1;\r\n//         }\r\n\r\n//         #buttonsContainer {\r\n//           background: rgb(36 36 36);\r\n//         }\r\n//       }\r\n//     `;\r\n//   }\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _plugin = require(\"@parcel/plugin\");\n\nvar _utils = require(\"@parcel/utils\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _nullthrows = _interopRequireDefault(require(\"nullthrows\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// List of browsers that support dynamic import natively\n// https://caniuse.com/#feat=es6-module-dynamic-import\nconst DYNAMIC_IMPORT_BROWSERS = {\n  edge: '76',\n  firefox: '67',\n  chrome: '63',\n  safari: '11.1',\n  opera: '50'\n};\nconst LOADERS = {\n  browser: {\n    css: './loaders/browser/css-loader',\n    html: './loaders/browser/html-loader',\n    js: './loaders/browser/js-loader',\n    wasm: './loaders/browser/wasm-loader',\n    IMPORT_POLYFILL: './loaders/browser/import-polyfill'\n  },\n  worker: {\n    js: './loaders/worker/js-loader',\n    wasm: './loaders/worker/wasm-loader',\n    IMPORT_POLYFILL: false\n  },\n  node: {\n    css: './loaders/node/css-loader',\n    html: './loaders/node/html-loader',\n    js: './loaders/node/js-loader',\n    wasm: './loaders/node/wasm-loader',\n    IMPORT_POLYFILL: null\n  }\n};\n\nfunction getLoaders(ctx) {\n  if (ctx.isWorker()) return LOADERS.worker;\n  if (ctx.isBrowser()) return LOADERS.browser;\n  if (ctx.isNode()) return LOADERS.node;\n  return null;\n}\n\nvar _default = new _plugin.Runtime({\n  apply({\n    bundle,\n    bundleGraph,\n    options\n  }) {\n    // Dependency ids in code replaced with referenced bundle names\n    // Loader runtime added for bundle groups that don't have a native loader (e.g. HTML/CSS/Worker - isURL?),\n    // and which are not loaded by a parent bundle.\n    // Loaders also added for modules that were moved to a separate bundle because they are a different type\n    // (e.g. WASM, HTML). These should be preloaded prior to the bundle being executed. Replace the entry asset(s)\n    // with the preload module.\n    if (bundle.type !== 'js') {\n      return;\n    }\n\n    let asyncDependencies = [];\n    let otherDependencies = [];\n    bundle.traverse(node => {\n      if (node.type !== 'dependency') {\n        return;\n      }\n\n      let dependency = node.value;\n\n      if (dependency.isAsync && !dependency.isURL) {\n        asyncDependencies.push(dependency);\n      } else {\n        otherDependencies.push(dependency);\n      }\n    });\n    let assets = [];\n\n    for (let dependency of asyncDependencies) {\n      let resolved = bundleGraph.resolveExternalDependency(dependency, bundle);\n\n      if (resolved == null) {\n        continue;\n      }\n\n      if (resolved.type === 'asset') {\n        // If this bundle already has the asset this dependency references,\n        // return a simple runtime of `Promise.resolve(require(\"path/to/asset\"))`.\n        assets.push({\n          filePath: _path.default.join(options.projectRoot, 'JSRuntime.js'),\n          // Using Promise['resolve'] to prevent Parcel from inferring this is an async dependency.\n          // TODO: Find a better way of doing this.\n          code: `module.exports = Promise['resolve'](require(${JSON.stringify('./' + _path.default.relative(options.projectRoot, resolved.value.filePath))}))`,\n          dependency\n        });\n      } else {\n        assets.push(...getLoaderRuntimes({\n          bundle,\n          dependency,\n          bundleGraph,\n          bundleGroup: resolved.value\n        }));\n      }\n    }\n\n    for (let dependency of otherDependencies) {\n      let resolved = bundleGraph.resolveExternalDependency(dependency, bundle);\n\n      if (dependency.isURL && resolved == null) {\n        // If a URL dependency was not able to be resolved, add a runtime that\n        // exports the original moduleSpecifier.\n        assets.push({\n          filePath: __filename,\n          code: `module.exports = ${JSON.stringify(dependency.moduleSpecifier)}`,\n          dependency\n        });\n        continue;\n      }\n\n      if (resolved == null || resolved.type !== 'bundle_group') {\n        continue;\n      }\n\n      let bundleGroup = resolved.value;\n      let mainBundle = (0, _nullthrows.default)(bundleGraph.getBundlesInBundleGroup(bundleGroup).find(b => {\n        let main = b.getMainEntry();\n        return main && bundleGroup.entryAssetId === main.id;\n      }));\n\n      if (mainBundle.isInline) {\n        assets.push({\n          filePath: _path.default.join(__dirname, `/bundles/${mainBundle.id}.js`),\n          code: `module.exports = ${JSON.stringify(dependency.id)};`,\n          dependency\n        });\n        continue;\n      } // URL dependency or not, fall back to including a runtime that exports the url\n\n\n      assets.push(getURLRuntime(dependency, bundle, mainBundle));\n    }\n\n    if (shouldUseRuntimeManifest(bundle) && bundleGraph.getChildBundles(bundle).length > 0 && isNewContext(bundle, bundleGraph)) {\n      assets.push({\n        filePath: __filename,\n        code: getRegisterCode(bundle, bundleGraph),\n        isEntry: true\n      });\n    }\n\n    return assets;\n  }\n\n});\n\nexports.default = _default;\n\nfunction getLoaderRuntimes({\n  bundle,\n  dependency,\n  bundleGroup,\n  bundleGraph\n}) {\n  let assets = []; // Sort so the bundles containing the entry asset appear last\n\n  let externalBundles = bundleGraph.getBundlesInBundleGroup(bundleGroup).filter(bundle => !bundle.isInline).sort(bundle => bundle.getEntryAssets().map(asset => asset.id).includes(bundleGroup.entryAssetId) ? 1 : -1); // CommonJS is a synchronous module system, so there is no need to load bundles in parallel.\n  // Importing of the other bundles will be handled by the bundle group entry.\n  // Do the same thing in library mode for ES modules, as we are building for another bundler\n  // and the imports for sibling bundles will be in the target bundle.\n\n  if (bundle.env.outputFormat === 'commonjs' || bundle.env.isLibrary) {\n    externalBundles = externalBundles.slice(-1);\n  }\n\n  let loaders = getLoaders(bundle.env); // Determine if we need to add a dynamic import() polyfill, or if all target browsers support it natively.\n\n  let needsDynamicImportPolyfill = false;\n\n  if (bundle.env.isBrowser() && bundle.env.outputFormat === 'esmodule') {\n    needsDynamicImportPolyfill = !bundle.env.matchesEngines(DYNAMIC_IMPORT_BROWSERS);\n  }\n\n  let loaderModules = loaders ? externalBundles.map(to => {\n    let loader = loaders[to.type];\n\n    if (!loader) {\n      return;\n    }\n\n    let relativePathExpr = getRelativePathExpr(bundle, to); // Use esmodule loader if possible\n\n    if (to.type === 'js' && to.env.outputFormat === 'esmodule') {\n      if (!needsDynamicImportPolyfill) {\n        return `import(\"./\" + ${relativePathExpr})`;\n      }\n\n      loader = (0, _nullthrows.default)(loaders.IMPORT_POLYFILL, `No import() polyfill available for context '${bundle.env.context}'`);\n    } else if (to.type === 'js' && to.env.outputFormat === 'commonjs') {\n      return `Promise.resolve(require(\"./\" + ${relativePathExpr}))`;\n    }\n\n    return `require(${JSON.stringify(loader)})(require('./bundle-url').getBundleURL() + ${relativePathExpr})`;\n  }).filter(Boolean) : [];\n\n  if (loaderModules.length > 0) {\n    let loaders = loaderModules.join(', ');\n\n    if (loaderModules.length > 1 && (bundle.env.outputFormat === 'global' || !externalBundles.every(b => b.type === 'js'))) {\n      loaders = `Promise.all([${loaders}])`;\n\n      if (bundle.env.outputFormat !== 'global') {\n        loaders += `.then(r => r[r.length - 1])`;\n      }\n    } else {\n      loaders = `(${loaders})`;\n    }\n\n    if (bundle.env.outputFormat === 'global') {\n      loaders += `.then(() => parcelRequire('${bundleGroup.entryAssetId}')${// In global output with scope hoisting, functions return exports are\n      // always returned. Otherwise, the exports are returned.\n      bundle.env.scopeHoist ? '()' : ''})`;\n    }\n\n    assets.push({\n      filePath: __filename,\n      code: `module.exports = ${loaders};`,\n      dependency\n    });\n  }\n\n  return assets;\n}\n\nfunction isNewContext(bundle, bundleGraph) {\n  return bundle.isEntry || bundleGraph.getParentBundles(bundle).some(parent => parent.env.context !== bundle.env.context || parent.type !== 'js');\n}\n\nfunction getURLRuntime(dependency, from, to) {\n  let relativePathExpr = getRelativePathExpr(from, to);\n\n  if (dependency.meta.webworker === true) {\n    return {\n      filePath: __filename,\n      code: `module.exports = require('./get-worker-url')(${relativePathExpr});`,\n      dependency\n    };\n  }\n\n  return {\n    filePath: __filename,\n    code: `module.exports = require('./bundle-url').getBundleURL() + ${relativePathExpr}`,\n    dependency\n  };\n}\n\nfunction getRegisterCode(entryBundle, bundleGraph) {\n  let idToName = {};\n  bundleGraph.traverseBundles((bundle, _, actions) => {\n    if (bundle.isInline) {\n      return;\n    }\n\n    idToName[getPublicBundleId(bundle)] = (0, _nullthrows.default)(bundle.name);\n\n    if (bundle !== entryBundle && isNewContext(bundle, bundleGraph)) {\n      // New contexts have their own manifests, so there's no need to continue.\n      actions.skipChildren();\n    }\n  }, entryBundle);\n  return \"require('./bundle-manifest').register(JSON.parse(\" + JSON.stringify(JSON.stringify(idToName)) + '));';\n}\n\nfunction getRelativePathExpr(from, to) {\n  if (shouldUseRuntimeManifest(from)) {\n    return `require('./relative-path')(${JSON.stringify(getPublicBundleId(from))}, ${JSON.stringify(getPublicBundleId(to))})`;\n  }\n\n  return JSON.stringify((0, _utils.relativeBundlePath)(from, to, {\n    leadingDotSlash: false\n  }));\n}\n\nfunction shouldUseRuntimeManifest(bundle) {\n  let env = bundle.env;\n  return !env.isLibrary && env.outputFormat === 'global' && env.isBrowser();\n}\n\nfunction getPublicBundleId(bundle) {\n  return bundle.id.slice(-16);\n}"],"names":["_ui","require","_version","_manifest","body","document","documentElement","isSupportingBrowser","window","hasOwnProperty","deferredPrompt","installed","hasPrompt","async","defer","manifestData","relatedApps","isIOS","navigator","userAgent","includes","maxTouchPoints","cancelInstall","Promise","resolve","reject","openModal","addEventListener","event","key","getManifestData","response","fetch","manifestPath","data","json","manifestToCheck","icons","name","description","console","error","err","begin","showInstaller","length","standalone","getInstalledRelatedApps","firstUpdated","classList","add","matchMedia","matches","button","createElement","setAttribute","short_name","VERSION","replaceAll","DATE","style","setProperty","src","innerHTML","addTooltip","setToast","setFeedback","success","prompt","userChoice","outcome","log","install","querySelector","display","destination","appendChild","preventDefault","once","module","exports","getBundleURL"],"version":3,"file":"install.b0ecbad0.js.map"}