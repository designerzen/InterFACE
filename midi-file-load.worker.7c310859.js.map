{"mappings":"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,cAAc;QACtD,OAAO,EAAE,gEAAgE;;IAC1E;AACD;kBApRqB;;;ACJrB,qGAAqG;AACrG,gFAAgF;AAChF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;8DACa;0EAmIA;wEAmBA;2DAoBA;sEAGA;uDAEA;sDAcA;AA7LN,MAAM,2BAA2B;IACvC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACA;AAEM,MAAM,uCAAuC;IACnD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACA;AAEM,MAAM,qCAAqC;IACjD,GAAG;IACH,GAAG;IACH,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,oDAAoD;IACpD,KAAK;IACL,KAAK;IACL,KAAK;AACN;AAEO,MAAM,wBAAwB,IAAI;AAGlC,MAAM,mCAAmC,CAAC;AAE1C,MAAM,oBAAoB,CAAC;AACl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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-78096950e7f97c44.js","source/audio/midi/midi-file-load.worker.js","source/audio/midi/midi-file-load.js","source/audio/midi/midi-stream.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","source/audio/midi/midi-decode.js","source/audio/midi/midi-command.js","source/audio/midi/midi-track.js","source/audio/midi/general-midi.js","source/audio/midi/midi-commands.js","source/audio/notes.js","source/maths/maths.js","source/utils.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"a8fb9c35fdafe466\";module.bundle.HMR_BUNDLE_ID = \"e9b2d09d7c310859\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: {|[string]: mixed|};\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData[moduleName],\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData[moduleName] = undefined;\n}\nmodule.bundle.Module = Module;\nmodule.bundle.hotData = {};\nvar checkedAssets /*: {|[string]: boolean|} */, assetsToDispose /*: Array<[ParcelRequire, string]> */, assetsToAccept /*: Array<[ParcelRequire, string]> */;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\nfunction getPort() {\n  return HMR_PORT || location.port;\n}\n\n// eslint-disable-next-line no-redeclare\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/');\n\n  // Web extension context\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome;\n\n  // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n  var supportsSourceURL = false;\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  }\n\n  // $FlowFixMe\n  ws.onmessage = async function (event /*: {data: string, ...} */) {\n    checkedAssets = {} /*: {|[string]: boolean|} */;\n    assetsToAccept = [];\n    assetsToDispose = [];\n    var data /*: HMRMessage */ = JSON.parse(event.data);\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH);\n\n      // Handle HMR Update\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n      if (handled) {\n        console.clear();\n\n        // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n        await hmrApplyUpdates(assets);\n\n        // Dispose all old assets.\n        let processedAssets = {} /*: {|[string]: boolean|} */;\n        for (let i = 0; i < assetsToDispose.length; i++) {\n          let id = assetsToDispose[i][1];\n          if (!processedAssets[id]) {\n            hmrDispose(assetsToDispose[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n\n        // Run accept callbacks. This will also re-execute other disposed assets in topological order.\n        processedAssets = {};\n        for (let i = 0; i < assetsToAccept.length; i++) {\n          let id = assetsToAccept[i][1];\n          if (!processedAssets[id]) {\n            hmrAccept(assetsToAccept[i][0], id);\n            processedAssets[id] = true;\n          }\n        }\n      } else fullReload();\n    }\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html);\n        // $FlowFixMe\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n  ws.onclose = function () {\n    console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n  };\n}\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\nfunction getParents(bundle, id) /*: Array<[ParcelRequire, string]> */{\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n  var parents = [];\n  var k, d, dep;\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n  return parents;\n}\nfunction updateLink(link) {\n  var href = link.getAttribute('href');\n  if (!href) {\n    return;\n  }\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n  newLink.setAttribute('href',\n  // $FlowFixMe\n  href.split('?')[0] + '?' + Date.now());\n  // $FlowFixMe\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href /*: string */ = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n    cssTimeout = null;\n  }, 50);\n}\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n      return new Promise((resolve, reject) => {\n        var _document$head;\n        script.onload = () => resolve(script);\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\nfunction hmrApply(bundle /*: ParcelRequire */, asset /*:  HMRAsset */) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      }\n\n      // $FlowFixMe\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    }\n\n    // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n    delete modules[id];\n    delete bundle.cache[id];\n\n    // Now delete the orphans.\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\nfunction hmrAcceptCheck(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  }\n\n  // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n      parents.push(...p);\n    }\n  }\n  return accepted;\n}\nfunction hmrAcceptCheckOne(bundle /*: ParcelRequire */, id /*: string */, depsByBundle /*: ?{ [string]: { [string]: string } }*/) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n  if (checkedAssets[id]) {\n    return true;\n  }\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToDispose.push([bundle, id]);\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    assetsToAccept.push([bundle, id]);\n    return true;\n  }\n}\nfunction hmrDispose(bundle /*: ParcelRequire */, id /*: string */) {\n  var cached = bundle.cache[id];\n  bundle.hotData[id] = {};\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData[id];\n  }\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData[id]);\n    });\n  }\n  delete bundle.cache[id];\n}\nfunction hmrAccept(bundle /*: ParcelRequire */, id /*: string */) {\n  // Execute the module.\n  bundle(id);\n\n  // Run the accept callbacks in the new version of the module.\n  var cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        assetsToAlsoAccept.forEach(function (a) {\n          hmrDispose(a[0], a[1]);\n        });\n\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n}","import {\r\n\tloadMIDIFile,\r\n\tloadMIDIFileThroughClient\r\n} from './midi-file-load'\r\n\r\n// Capture public methods\r\nself.onmessage = e => {\r\n\tconsole.error(\"MIDI:Worker\",e)\r\n\r\n    const data = e.data\r\n    switch (data.command)\r\n    {\r\n        case \"loadMIDIFile\":\r\n\t\t\tloadMIDIFile(data.url, data.options).then( midi => {\r\n\r\n\t\t\t\tconsole.error(\"MIDI:Worker loaded\", {url:data.url, midi})\r\n\r\n\t\t\t\tpostMessage({ \r\n\t\t\t\t\tevent:data.command, \r\n\t\t\t\t\tmidi\r\n\t\t\t\t})\r\n\t\t\t})\r\n            break\r\n\r\n        case \"loadMIDIFileThroughClient\":\r\n\t\t\tloadMIDIFileThroughClient(data.url, data.options ).then( midi => {\r\n\t\t\t\tconsole.error(\"MIDI:Worker loaded\", {url:data.url, midi})\r\n\t\t\t\tpostMessage({ \r\n\t\t\t\t\tevent:data.command, \r\n\t\t\t\t\tmidi\r\n\t\t\t\t})\r\n\t\t\t})\r\n            break\r\n    }\r\n}","// Midi File\r\n// ==============\r\n// Abstract    - Load a .midi file from a local server\r\n// Description - Buffers a .midi file into memory, parse the commands\r\n// Use         - Load( file.midi, onComplete ) and wait for the callback\r\n\r\nimport MIDIStream from './midi-stream'\r\nimport { decodeMIDI } from './midi-decode'\r\nimport { base64DecToArr } from '../../utils'\r\n\r\n/**\r\n * Clean data\r\n * @param {String} data - raw data\r\n * @returns String of decoded MIDI data\r\n */\r\n const sanitizeResponse = ( data ) => {\r\n\tconst chars = []\r\n\tfor (let i = 0, quantity = data.length; i < quantity; ++i)\r\n\t{\r\n\t\tchars[i] = String.fromCharCode(data.charCodeAt(i) & 255)\r\n\t}\r\n\treturn chars.join('')\r\n}\r\n\r\n/**\r\n * Convert an array of integers into a string of bytes\r\n * NB. & 255 is not neccessary\r\n * @param {*} arrayBuffer \r\n * @returns {String} String Bytes\r\n */\r\nconst arrayBufferToBytes = arrayBuffer => Array.prototype.map.call( arrayBuffer, ch => String.fromCharCode(ch) ).join('')\r\n\r\n/**\r\n * ASCII to Bytes  bufferToBinaryString\r\n * WebWorker compatable atob.\r\n * NB. This is very costly - try and avoid\r\n * @returns \r\n */\r\nconst asciiToBinary = ( ascii ) => {\t\r\n\treturn (typeof window == \"object\" && typeof document == \"object\" && window.document === document) ?\r\n\t\twindow.atob : \r\n\t\tarrayBufferToBytes( base64DecToArr(ascii) )\r\n}\r\n\r\n/**\r\n * load From Base64 String\r\n * @param {string} arr - UInt8Array\r\n * @param {Object} options -\r\n * @returns \r\n */\r\nconst loadMIDIFromArray = async ( arr, options={}, progressCallback=null ) => new Promise( (resolve,reject) => {\r\n\ttry{\r\n\t\tconst data = arrayBufferToBytes( new Uint8Array(arr) )\r\n\t\tconst stream = new MIDIStream( data )\r\n\t\tresolve( decodeMIDI(stream, options) )\r\n\t}catch(error){\r\n\t\treject(error)\r\n\t}\r\n})\r\n\r\n/**\r\n * load From Base64 String\r\n * @param {string} file - Base64 string as raw bytes\r\n * @param {Object} options -\r\n * @returns \r\n */\r\nconst loadMIDIFromBase64 = async ( file, options={}, progressCallback=null ) => new Promise( (resolve,reject) => {\r\n\ttry{\r\n\t\tconst encoded = file.split(',')[1]\r\n\t\tconst data = asciiToBinary(encoded)\r\n\t\tconst stream = new MIDIStream( data )\r\n\t\tresolve( decodeMIDI(stream, options) )\r\n\t}catch(error){\r\n\t\treject(error)\r\n\t}\r\n})\r\n\r\n/**\r\n * loadMIDIFromFile\r\n * FIXME: Use fetch rather than XMLHttpRequest?\r\n * @param {string} url - url\r\n */\r\nexport const loadMIDIFromFile = (url, options={}, progressCallback=null) => new Promise( (resolve,reject) => {\r\n    const fetch = new XMLHttpRequest()\r\n    fetch.open(\"GET\", url, true)\r\n    fetch.responseType = \"arraybuffer\"\r\n\tfetch.onerror = error => reject(error)\r\n\tfetch.onreadystatechange = (e) => {\r\n\t\t/*\r\n\t\t0: request not initialized\r\n\t\t1: server connection established\r\n\t\t2: request received\r\n\t\t3: processing request\r\n\t\t4: request finished and response is ready\r\n\t\t*/\r\n\t\tif (fetch.readyState === 4 && fetch.status === 200)\r\n\t\t{\r\n\t\t\tconst arrayBuffer = fetch.response\r\n\t\t\tif (arrayBuffer) {\r\n\t\t\t  const byteArray = new Uint8Array(arrayBuffer)\r\n\t\t\t  const midi =loadMIDIFromArray(byteArray, options, progressCallback )\r\n\t\t\t  resolve(midi)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    // fetch.onload = () => {}\r\n    fetch.send(null)\r\n})\r\n\r\n/**\r\n * Open a file from the client's local machine and load it\r\n * into memory\r\n * @param {*} file \r\n * @param {*} progressCallback \r\n * @returns \r\n */\r\nconst loadRawFile = (file, progressCallback, base64=true) => new Promise( (resolve,reject) => {\r\n\tconst fileReader = new FileReader()\r\n\tfileReader.onload = event => resolve(fileReader.result)\r\n\tfileReader.onprogress = event => progressCallback && progressCallback(event)\r\n\tfileReader.onerror = event => reject(fileReader.error)\r\n\tbase64 ? \r\n\t\tfileReader.readAsDataURL(file) :\r\n\t\tfileReader.readAsArrayBuffer(file)\r\n})\r\n\r\n\r\n/**\r\n * url can either be a file name as a string or \r\n * it can be a base64 encoded midi file\r\n * @param {string} urlOrBlob - URL string or base64 encoded string\r\n * @returns {MIDITrack} MIDIStream instance\r\n */\r\nexport const loadMIDIFile = ( urlOrBlob, options={}, progressCallback=null ) => new Promise( async (resolve,reject) => {\r\n\tconst isString = typeof urlOrBlob === \"string\"\r\n\tlet midiFile\r\n\r\n\tif (isString)\r\n\t{\r\n\t\tconst isBase64 = urlOrBlob.indexOf('base64,') === -1\r\n\t\tif (isBase64)\r\n\t\t{\r\n\t\t\tmidiFile = await loadMIDIFromFile( urlOrBlob, options, progressCallback ) \r\n\t\t}else{\r\n\t\t\tmidiFile = await loadMIDIFromBase64( urlOrBlob, options, progressCallback )\r\n\t\t}\r\n\t\tconsole.error(\"loadMIDIFile via BASE64\",{urlOrBlob, midiFile})\r\n\t\t\r\n\t}else{\r\n\r\n\t\tmidiFile = await loadMIDIFromArray( urlOrBlob, options, progressCallback )\r\n\t\tconsole.error(\"loadMIDIFile via ArrayBuffer\",{ urlOrBlob, midiFile})\r\n\t}\r\n\tresolve(midiFile)\r\n})\r\n\r\n/**\r\n * Load MIDI Performance from FILE / String / Local\r\n * @param {string} file \r\n * @param {Object} options \r\n * @param {Function} progressCallback \r\n * @param {Function} useBase64 - false \r\n * @returns {MIDITrack}\r\n */\r\nexport const loadMIDIFileThroughClient = async (file, options, progressCallback, useBase64=false ) => {\r\n\t\r\n\tconst rawFile = await loadRawFile( file, progressCallback, useBase64 )\r\n\tconst midiTrack = await loadMIDIFile( rawFile, {\r\n\t\t...options,\r\n\t\ttrackName:(file.name).split(\".mid\")[0].replace(\"_\", \" \")\r\n\t}, progressCallback )\r\n\treturn midiTrack\r\n}","/**\r\n * Midi Stream\r\n * Abstract    - A string based byte nibbler and convertor\r\n * Description - Feed it a data file then request bytes as needed\r\n */\r\nexport default class MIDIStream {\r\n\r\n\tposition = 0\r\n\tstr\r\n\r\n\t/**\r\n\t * Create an instance of a MIDI data stream\r\n\t * @param {String} data - RAW data\r\n\t */\r\n\tconstructor(data) {\r\n\t\tthis.str = data\r\n\t}\r\n\r\n\t/**\r\n\t * Read X length of the internal string\r\n\t * @param {*} length \r\n\t * @returns {String} \r\n\t */\r\n\tread(length) {\r\n\t\tconst result = this.str.substr(this.position, length)\r\n\t\tthis.position += length\r\n\t\treturn result\r\n\t}\r\n\r\n\t/**\r\n\t * Read a big-endian 32-bit integer\r\n\t * @returns {String} XXXX\r\n\t */\r\n\treadInt32() {\r\n\t\tconst result = (\r\n\t\t\t(this.str.charCodeAt(this.position) << 24)\r\n\t\t\t+ (this.str.charCodeAt(this.position + 1) << 16)\r\n\t\t\t+ (this.str.charCodeAt(this.position + 2) << 8)\r\n\t\t\t+ this.str.charCodeAt(this.position + 3))\r\n\t\tthis.position += 4\r\n\t\treturn result\r\n\t}\r\n\r\n\t/**\r\n\t * Read a big-endian 16-bit integer\r\n\t * @returns {String} XX\r\n\t */\r\n\treadInt16() {\r\n\t\tconst result = (\r\n\t\t\t(this.str.charCodeAt(this.position) << 8)\r\n\t\t\t+ this.str.charCodeAt(this.position + 1))\r\n\t\tthis.position += 2\r\n\t\treturn result\r\n\t}\r\n\r\n\t/**\r\n\t * read an 8-bit integer\r\n\t * @param {Boolean} signed \r\n\t * @returns {String} X\r\n\t */\r\n\treadInt8(signed = false) {\r\n\t\tconst result = this.str.charCodeAt(this.position)\r\n\t\tif (signed && result > 127) {\r\n\t\t\tresult -= 256\r\n\t\t}\r\n\t\tthis.position += 1\r\n\t\treturn result\r\n\t}\r\n\r\n\t/**\r\n\t * Read a MIDI-style variable-length integer\r\n\t * (big-endian value in groups of 7 bits,\r\n\t * with top bit set to signify that another byte follows)\r\n\t * @returns {Number} A\r\n\t */\r\n\treadVarInt() {\r\n\t\tlet result = 0\r\n\t\twhile (true) {\r\n\t\t\tconst b = this.readInt8(false)\r\n\t\t\tif (b & 0x80) {\r\n\t\t\t\tresult += (b & 0x7f)\r\n\t\t\t\tresult <<= 7\r\n\t\t\t} else {\r\n\t\t\t\treturn result + b\r\n\t\t\t\t// b is the last byte\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// End of File - bool\r\n\teof() {\r\n\t\treturn this.position >= this.str.length\r\n\t}\r\n}","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","/*//////////////////////////////////////////////////////////////////////////////\r\n\r\nMIT Licence\r\n\r\nMidi File\r\n==============\r\nAbstract    - decode a .midi file from an object in memory\r\nDescription - Buffers a .midi file into memory, parses the commands\r\nUse         - Load( file.midi, onComplete ) and wait for the callback\r\nMethods     -\r\nInspired by - https://github.com/gasman/jasmid/blob/master/stream.js#L2\r\nReferences  - http://www.indiana.edu/~emusic/etext/MIDI/chapter3_MIDI3.shtml\r\n\r\nChannel Voice\r\n    Control the instrument's 16 voices (timbres, patches), plays notes, sends\r\n    controller data, etc.\r\n\r\nChannel Mode\r\n    Define instrument's response to Voice messages, sent over instrument's\r\n    'basic' channel\r\n\r\nSystem Common\r\n    Messages intended to all networked instruments and devices\r\n\r\nSystem Real-Time\r\n    Intended for all networked instruments and devices. Contain only status\r\n    bytes and is used for syncronization of all devices. essentially a timing\r\n    clock\r\n\r\nSystem Exclusive\r\n    Originally used for manufacturer-specific codes, such as editor/librarians,\r\n    has been expanded to include MIDI Time Code, MIDI Sample Dump Standard and\r\n    MIDI Machine Control\r\n\r\n//////////////////////////////////////////////////////////////////////////////*/\r\nimport MIDIStream from './midi-stream'\r\nimport MIDICommand from './midi-command'\r\nimport MIDITrack from './midi-track'\r\nimport * as MIDICommands from './midi-commands'\r\nimport {convertMIDINoteNumberToName} from '../notes'\r\n\r\nconst TIME_CODE_BASED = \"time-code-based\" \r\nconst METRIC_TIME = \"metrical\"\r\n\r\n// some systems leave the last byte out\r\n// to preserve memory but here we can\r\n// re-add it if we want to :)\r\nlet lastEventTypeByte\r\n\r\n/**\r\n * Take a 4 byte chunk out of the data set\r\n * @param {MidiStream} stream \r\n * @returns {Object}\r\n */\r\nconst readChunk = (stream, size=4) => \r\n{\r\n\tconst chunk = {}\r\n\t// Each midi event message is 4 bytes big...\r\n\tchunk.id = stream.read(size)\r\n\tchunk.length = stream.readInt32()\r\n\tchunk.data = stream.read(chunk.length)\r\n\treturn chunk\r\n}\r\n\r\n/**\r\n * Get the amount of frames per second from the division\r\n * @param {Number} timeDivision \r\n * @returns {Number}\r\n */\r\nconst getFramesPerSecond = timeDivision => {\r\n    const bit8_15 = (timeDivision & 0xFF00) >> 8\r\n    const flippedBit8_15 = bit8_15 ^ 0xFF\r\n    return flippedBit8_15 + 1\r\n}\r\n\r\n/**\r\n * Convert Raw header data into readable object data\r\n * @param {MidiStream} stream \r\n * @param {Object} options - defaults\r\n * @returns \r\n */\r\nconst decodeHeader = ( stream, options={} ) =>\r\n{\r\n\tconst headerChunk = readChunk(stream)\r\n\tconst headerType = headerChunk.id\r\n\t\r\n\tif (headerType !== 'MThd' && headerType !== 'MTrk' || headerChunk.length !== 6)\r\n\t{\r\n\t\tthrow \".mid file could not be read - header chunk 'MThd'/'MTrk' was not found\"\r\n\t}\r\n\r\n\tconst headerStream = new MIDIStream(headerChunk.data)\r\n\r\n\tconst formatType = headerStream.readInt16()\r\n\tconst trackCount = headerStream.readInt16()\r\n\tconst timeDivision = headerStream.readInt16()\r\n\r\n\tconst isTimeCodeBased = timeDivision & 0x8000 \r\n\tconst timeCodeType = isTimeCodeBased ? TIME_CODE_BASED : METRIC_TIME\r\n\t\r\n\tswitch( headerType )\r\n\t{\r\n\t\tcase \"MThd\":\r\n\t\t\tconst division = {}\r\n\t\t\tif (timeCodeType === TIME_CODE_BASED) {\r\n\t\t\t\tdivision.ticksPerFrame = timeDivision & 0x00FF\r\n\t\t\t\tdivision.framesPerSecond = getFramesPerSecond(timeDivision)\r\n\t\t\t} else {\r\n\t\t\t\tdivision.ticksPerQuarterNote = timeDivision & 0x7FFF\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tformatType, trackCount, timeDivision, isTimeCodeBased, timeCodeType, division\r\n\t\t\t}\r\n\t\t\t\r\n\t\tcase \"MTrk\":\t\r\n\t\t\treturn {\r\n\t\t\t\tformatType, trackCount, timeDivision, isTimeCodeBased, timeCodeType\r\n\t\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * \r\n * @param {MIDITrack} track \r\n * @param {MidiStream} stream \r\n * @returns \r\n */\r\nconst decodeTracks = ( track, stream ) => \r\n{\r\n\tconst quantity = track.header.trackCount\r\n\tfor (let i = 0; i < quantity; i++)\r\n\t{\r\n\t\tconst trackChunk = readChunk(stream)\r\n\t\tswitch(trackChunk.id)\r\n\t\t{\r\n\t\t\tcase \"MTrk\":\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"MThd\":\r\n\t\t\t\tthrow `Still working on MThd implementation... ${trackChunk.id}`\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow `Unexpected chunk - expected MTrk, got ${trackChunk.id}`\r\n\t\t}\r\n\t\t\r\n\t\tconst trackStream = new MIDIStream(trackChunk.data)\r\n\t\twhile (!trackStream.eof())\r\n\t\t{\r\n\t\t\tconst event = convertEventToCommand(trackStream)\r\n\t\t\t//tracks[i].push(event);\r\n\t\t\ttrack.addEvent(i,event)\r\n\t\t}\r\n\t}\r\n\treturn track\r\n}\r\n\r\n/**\r\n * \r\n * @param {MidiStream} stream \r\n * @returns {MIDICommand}\r\n */\r\nconst convertEventToCommand = (stream) => \r\n{\r\n\tconst event = new MIDICommand()\r\n\tconst time = stream.readVarInt()\r\n\tconst eventTypeByte = stream.readInt8()\r\n\r\n\tevent.deltaTime = time\r\n\r\n\tconst isSystemEvent = (eventTypeByte & 0xf0) === 0xf0\r\n\treturn isSystemEvent ? \r\n\t\tdecodeSystemEvent( stream, event, eventTypeByte) :\r\n\t\tdecodeChannelEvent( stream, event, eventTypeByte)\r\n}\r\n\r\n/**\r\n * Control the instrument's 16 voices (timbres, patches),\r\n * plays notes, sends controller data, etc.\r\n * @param {MIDIStream} stream -\r\n * @param {MIDICommand} event -\r\n * @param {number} eventTypeByte - \r\n * @returns {MIDICommand}\r\n */\r\nconst decodeChannelEvent = (stream, event, eventTypeByte ) =>\r\n{\r\n\tlet firstParameter\r\n\r\n\tif ((eventTypeByte & 0x80) === 0)\r\n\t{\r\n\t\t/* running status - \r\n\t\treuse lastEventTypeByte as the event type.\r\n\t\tthis allows bytes to be saved if the command repeats\r\n\t\t\teventTypeByte is actually the first parameter\r\n\t\t*/\r\n\t\tfirstParameter = eventTypeByte\r\n\t\teventTypeByte = lastEventTypeByte\r\n\t} else {\r\n\t\tfirstParameter = stream.readInt8()\r\n\t\tlastEventTypeByte = eventTypeByte\r\n\t}\r\n\r\n\tconst eventType = eventTypeByte >> 4\r\n\t\r\n\tevent.channel = eventTypeByte & 0x0f\r\n\tevent.type = MIDICommands.TYPE_CHANNEL\r\n\t//event.raw = `\"type\":${event.type},\"channel\":${event.channel}`\r\n\r\n\tswitch (eventType)\r\n\t{\r\n\t\tcase 0x08:\r\n\t\t\tevent.subtype = MIDICommands.COMMAND_NOTE_OFF\r\n\t\t\t//'noteOff';\r\n\t\t\tevent.noteNumber = firstParameter\r\n\t\t\tevent.noteName = convertMIDINoteNumberToName(firstParameter)\r\n\t\t\tevent.velocity = stream.readInt8()\r\n\t\t\t//event.raw += `\"subtype\":${event.subtype},\"noteNumber\":${firstParameter}`\r\n\t\t\treturn event\r\n\r\n\t\tcase 0x09:\r\n\t\t\tevent.noteNumber = firstParameter\r\n\t\t\tevent.noteName = convertMIDINoteNumberToName(firstParameter)\r\n\t\t\tevent.velocity = stream.readInt8()\r\n\t\t\tif (event.velocity === 0)\r\n\t\t\t{\r\n\t\t\t\tevent.subtype = MIDICommands.COMMAND_NOTE_OFF\r\n\t\t\t} else {\r\n\t\t\t\tevent.subtype = MIDICommands.COMMAND_NOTE_ON;//'noteOn';\r\n\t\t\t}\r\n\t\t\treturn event\r\n\r\n\t\tcase 0x0a:\r\n\t\t\tevent.subtype = MIDICommands.COMMAND_NOTE_AFTER_TOUCH;//'noteAftertouch';\r\n\t\t\tevent.noteNumber = firstParameter\r\n\t\t\tevent.noteName = convertMIDINoteNumberToName(firstParameter)\r\n\t\t\tevent.amount = stream.readInt8()\r\n\t\t\treturn event\r\n\r\n\t\tcase 0x0b:\r\n\t\t\tevent.subtype = MIDICommands.COMMAND_CONTROLLER;//'controller';\r\n\t\t\tevent.controllerType = firstParameter\r\n\t\t\tevent.value = stream.readInt8()\r\n\t\t\treturn event\r\n\r\n\t\tcase 0x0c:\r\n\t\t\tevent.subtype = MIDICommands.COMMAND_PROGRAM_CHANGE;//'programChange';\r\n\t\t\tevent.programNumber = firstParameter\r\n\t\t\treturn event\r\n\r\n\t\tcase 0x0d:\r\n\t\t\tevent.subtype = MIDICommands.COMMAND_CHANNEL_AFTER_TOUCH;//'channelAftertouch';\r\n\t\t\tevent.amount = firstParameter\r\n\t\t\treturn event\r\n\r\n\t\tcase 0x0e:\r\n\t\t\tevent.subtype = MIDICommands.COMMAND_PITCH_BEND\r\n\t\t\tevent.value = firstParameter + (stream.readInt8() << 7)\r\n\r\n\t\t\treturn event;\r\n\r\n\t\tdefault:\r\n\t\t\tthrow \"Unrecognised MIDI event type: \" + eventType;\r\n\t\t\t/*\r\n\t\t\tconsole.log(\"Unrecognised MIDI event type: \" + eventType);\r\n\t\t\tstream.readInt8();\r\n\t\t\tevent.subtype = 'unknown';\r\n\t\t\treturn event;\r\n\t\t\t*/\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {MIDIStream} stream \r\n * @param {MIDICommand} event \r\n * @param {number} eventTypeByte \r\n * @returns MIDICommand\r\n */\r\nconst decodeSystemEvent = ( stream, event, eventTypeByte ) =>\r\n{\r\n\t// system / meta event\r\n\tif (eventTypeByte === 0xff)\r\n\t{\r\n\t\t// meta event\r\n\t\tevent.type =  MIDICommands.TYPE_META\r\n\t\tconst subtypeByte = stream.readInt8()\r\n\t\tconst length = stream.readVarInt()\r\n\r\n\t\tswitch(subtypeByte)\r\n\t\t{\r\n\t\t\tcase 0x00:\r\n\t\t\t\tevent.subtype = 'sequenceNumber'\r\n\t\t\t\tif (length !== 2) { throw \"Expected length for sequenceNumber event is 2, got \" + length}\r\n\t\t\t\tevent.sequenceNumber = stream.readInt16()\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x01:\r\n\t\t\t\tevent.subtype = 'text'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x02:\r\n\t\t\t\tevent.subtype = 'copyrightNotice'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x03:\r\n\t\t\t\tevent.subtype = 'trackName'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x04:\r\n\t\t\t\tevent.subtype = 'instrumentName'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event;\r\n\r\n\t\t\tcase 0x05:\r\n\t\t\t\tevent.subtype = 'lyrics'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x06:\r\n\t\t\t\tevent.subtype = 'marker'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x07:\r\n\t\t\t\tevent.subtype = 'cuePoint'\r\n\t\t\t\tevent.text = stream.read(length)\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x20:\r\n\t\t\t\tevent.subtype = 'midiChannelPrefix'\r\n\t\t\t\tif (length !== 1){ throw \"Expected length for midiChannelPrefix event is 1, got \" + length}\r\n\t\t\t\tevent.channel = stream.readInt8()\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x2f:\r\n\t\t\t\tevent.subtype = 'endOfTrack'\r\n\t\t\t\tif (length !== 0) { throw \"Expected length for endOfTrack event is 0, got \" + length }\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x51:\r\n\t\t\t\tevent.subtype = 'setTempo'\r\n\t\t\t\tif (length !== 3) { throw \"Expected length for setTempo event is 3, got \" + length}\r\n\t\t\t\tevent.microsecondsPerBeat = (\r\n\t\t\t\t\t(stream.readInt8() << 16)\r\n\t\t\t\t\t+ (stream.readInt8() << 8)\r\n\t\t\t\t\t+ stream.readInt8()\r\n\t\t\t\t)\r\n\t\t\t\treturn event;\r\n\r\n\t\t\tcase 0x54:\r\n\t\t\t\tevent.subtype = 'smpteOffset'\r\n\t\t\t\tif (length !== 5) { throw \"Expected length for smpteOffset event is 5, got \" + length}\r\n\t\t\t\tconst hourByte = stream.readInt8()\r\n\r\n\t\t\t\t// magic\r\n\t\t\t\tevent.frameRate = {\r\n\t\t\t\t\t0x00: 24, 0x20: 25, 0x40: 29, 0x60: 30\r\n\t\t\t\t}[hourByte & 0x60]\r\n\t\t\t\t//console.error( event.frameRate )\r\n\r\n\t\t\t\tevent.hour = hourByte & 0x1f\r\n\t\t\t\tevent.min = stream.readInt8()\r\n\t\t\t\tevent.sec = stream.readInt8()\r\n\t\t\t\tevent.frame = stream.readInt8()\r\n\t\t\t\tevent.subframe = stream.readInt8()\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x58:\r\n\t\t\t\tevent.subtype = 'timeSignature'\r\n\t\t\t\tif (length !== 4){ throw \"Expected length for timeSignature event is 4, got \" + length }\r\n\t\t\t\tevent.numerator = stream.readInt8()\r\n\t\t\t\tevent.denominator = Math.pow(2, stream.readInt8())\r\n\t\t\t\tevent.metronome = stream.readInt8()\r\n\t\t\t\tevent.thirtyseconds = stream.readInt8()\r\n\t\t\t\treturn event\r\n\r\n\t\t\tcase 0x59:\r\n\t\t\t\tevent.subtype = 'keySignature'\r\n\t\t\t\tif (length !== 2){ throw \"Expected length for keySignature event is 2, got \" + length;}\r\n\t\t\t\tevent.key = stream.readInt8(true)\r\n\t\t\t\tevent.scale = stream.readInt8()\r\n\t\t\t\treturn event;\r\n\r\n\t\t\tcase 0x7f:\r\n\t\t\t\tevent.subtype = 'sequencerSpecific'\r\n\t\t\t\tevent.data = stream.read(length)\r\n\t\t\t\treturn event;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// console.log(\"Unrecognised meta event subtype: \" + subtypeByte);\r\n\t\t\t\tevent.subtype = 'unknown'\r\n\t\t\t\tevent.data = stream.read(length)\r\n\t\t\t\treturn event;\r\n\t\t}\r\n\r\n\t} else if (eventTypeByte === 0xf0) {\r\n\r\n\t\tevent.type = MIDICommands.TYPE_SYSTEM_EXCLUSIVE\r\n\t\tconst length = stream.readVarInt()\r\n\t\tevent.data = stream.read(length)\r\n\t\treturn event;\r\n\r\n\t} else if (eventTypeByte === 0xf7) {\r\n\r\n\t\tevent.type = MIDICommands.TYPE_DIVIDED_SYSTEM_EXCLUSIVE\r\n\t\tconst length = stream.readVarInt()\r\n\t\tevent.data = stream.read(length)\r\n\t\treturn event\r\n\r\n\t} else {\r\n\t\tthrow \"Unrecognised MIDI event type byte: \" + eventTypeByte\r\n\t}\r\n}\r\n\r\n/**\r\n * Pass in a stream of raw data - get resolved data classes\r\n * @param {MidiStream} stream \r\n * @returns {MIDITrack}\r\n */\r\nexport const decodeMIDI = ( stream, options={} ) =>\r\n{\r\n\tconst header = decodeHeader( stream)\r\n\tconst track = new MIDITrack( header, options )\r\n\treturn decodeTracks( track, stream )\r\n}","export default class MIDICommand\r\n{\r\n\t// Uint8Array\r\n\traw\r\n\r\n\ttime = 0\r\n\ttimeCode = 0\r\n\r\n\tdeltaTime\r\n\tframeRate\r\n\tchannel\r\n\r\n\ttype\r\n\tsubtype\r\n\ttext\r\n\tdata\r\n\r\n\thour\r\n\tmin\r\n\tsec\r\n\tframe\r\n\tsubframe\r\n\tmicrosecondsPerBeat\r\n\r\n\tkey\r\n\tscale\r\n\tnumerator\r\n\tdenominator\r\n\tmetronome\r\n\tthirtyseconds\r\n\r\n\tamount\r\n\tnoteNumber\r\n\t// not an official MIDI spec but we use it in our app\r\n\tnoteName\r\n\tvelocity\r\n\r\n\t// pitch value from MIDI is 0 -> 16383\r\n\tvalue\r\n\r\n\tcontrollerType\r\n\tprogramNumber\r\n\tsequenceNumber\r\n\r\n\tconstructor(){\r\n\t}\r\n\r\n\ttoString()\r\n\t{\r\n\t\tlet output = `${this.time}. MIDI:Input::${this.subtype} Type:${this.type}`\r\n\t\tif (this.channel){ output += ` [Channel ${this.channel}] ` }\r\n\t\tif (this.noteNumber){ output += ` Note:${this.noteNumber} -> ${this.noteName}` }\r\n\t\tif (this.velocity){ output += ` Velocity:${this.velocity}` }\r\n\t\treturn output + '\\n'\r\n\t}\r\n}\r\n","import { GENERAL_MIDI_INSTRUMENTS } from './general-midi'\r\nimport MIDICommand from './midi-command'\r\nimport * as MIDICommands from './midi-commands'\r\n\r\nexport default class MidiTrack\r\n{\r\n\t// :MidiHeader\r\n\theader\r\n\r\n\t// :Array<MIDICommands>\r\n\ttracks = []\r\n\tcommands = []\r\n\tinstruments = []\r\n\tnoteOnCommands = []\r\n\r\n\ttrackName = \"\"\r\n\tmeta = \"\"\r\n\tcopyrightNotice = \"Copyright held by respective owners\"\r\n\tlyrics = \"\"\r\n\r\n\ttrackPosition = 0\r\n\tcommandPosition = 0\r\n\tduration = 0\r\n\r\n\tmimeType = \"audio/mid\"\r\n\r\n\tget ticksPerBeat(){\r\n\t\t// return \r\n\t}\r\n\r\n\tget tempo(){\r\n\t\t\r\n\t}\r\n\r\n\tget timeSignature(){\r\n\t\treturn [4,4]\r\n\t}\r\n\r\n\tgetMatchingCommands( types=[MIDICommands.COMMAND_NOTE_ON], type=\"channel\" )\r\n\t{\r\n\t\t// check if array or string and if string make array\r\n\t\tif (typeof types === String)\r\n\t\t{\r\n\t\t\ttypes = [types]\r\n\t\t}\r\n\t\treturn this.commands.filter( value => {\r\n\t\t\t//console.log(\"getMatchingCommands\",value.type === type,value)\r\n\t\t\t\r\n\t\t\tif (value.type === type)\r\n\t\t\t{\r\n\t\t\t\tconst typePosition = types.indexOf(value.subtype)\r\n\t\t\t\t//console.log(\"typePosition > -1\", typePosition > -1, types, value.subType)\r\n\t\t\t\treturn typePosition > -1\r\n\t\t\t}else{\r\n\t\t\t\t//console.log(\"getMatchingCommands\",value.type,value)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false\r\n\t\t})\r\n\t}\r\n\r\n\tgetNextNoteCommand(){\r\n\r\n\t\tconst commands = []\r\n\t\tlet track = this.tracks[++this.trackPosition]\r\n\t\twhile ( track && track.subtype !== MIDICommands.COMMAND_NOTE_ON || track.subtype !== MIDICommands.COMMAND_NOTE_OFF  )\r\n\t\t{\r\n\t\t\ttrack = this.tracks[++this.trackPosition]\r\n\t\t}\r\n\r\n\t\twhile ( track && ( track.subtype === MIDICommands.COMMAND_NOTE_ON || track.subtype === MIDICommands.COMMAND_NOTE_OFF )  )\r\n\t\t{\r\n\t\t\tcommands.push(track)\r\n\t\t\ttrack = this.tracks[++this.trackPosition]\r\n\t\t}\r\n\t\t\r\n\t\treturn commands\r\n\t}\r\n\r\n\tgetNextNoteOnCommand(){\r\n\r\n\t\tconst commands = []\r\n\t\tlet track = this.tracks[++this.trackPosition]\r\n\t\r\n\t\twhile ( track && track.subtype === MIDICommands.COMMAND_NOTE_ON )\r\n\t\t{\r\n\t\t\tcommands.push(track)\r\n\t\t\ttrack = this.tracks[ ++this.trackPosition ]\r\n\t\t}\r\n\t\t\r\n\t\treturn commands\r\n\t}\r\n\r\n\tgetNextCommands(){\r\n\t\treturn this.tracks[ ++this.trackPosition ]\r\n\t}\r\n\r\n\tgetNextNoteOnCommand(){\r\n\t\treturn this.noteOnCommands[ ++this.commandPosition ]\r\n\t}\r\n\r\n\tgetDurationUntilNextCommand(){\r\n\t\tconst r = this.tracks[ this.trackPosition + 1 ]\r\n\t\treturn r ? r.deltaTime : -1\r\n\t}\r\n\r\n\t/**\r\n\t * If you want all of the events to also be stretchable\r\n\t * we can condense an entire track into 1 second and\r\n\t * move all of the events proportionally so that the \r\n\t * timings align with whatever you would like to fit it too\r\n\t * @param {MIDICommand} command \r\n\t */\r\n\tconvertTimeToFraction( command ){\r\n\t\treturn command.time / this.duration\r\n\t}\r\n\r\n\tcopyCommand( command ) {\r\n\t\tconst copy = new MIDICommand()\r\n\t\tfor (let i in command)\r\n\t\t{\r\n\t\t\tcopy[i] = command[i]\r\n\t\t}\r\n\t\treturn copy\r\n\t}\r\n\r\n\tconstructor( header=null, defaultOptions={} )\r\n\t{\r\n\t\tif (header) \r\n\t\t{\r\n\t\t\tthis.header = header\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i in defaultOptions)\r\n\t\t{\r\n\t\t\t// check to see if they are one of our subclasses...\r\n\t\t\tswitch (i)\r\n\t\t\t{\r\n\t\t\t\t// case \"header\": \r\n\t\t\t\t// \tthis.header = defaultOptions[i]\r\n\t\t\t\t// \tbreak\r\n\r\n\t\t\t\tcase \"commands\":\r\n\t\t\t\tcase \"noteOnCommands\":\r\n\t\t\t\t\tthis[i] = defaultOptions[i].map( command => this.copyCommand(command) )\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// check if is command\r\n\t\t\t\t\tthis[i] = defaultOptions[i]\r\n\t\t\t\t\tconsole.log(i, this[i] )\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t// A way of adding an event and multiple events to track\r\n\taddEvent( index, midiCommand )\r\n\t{\r\n\t\t// current previous event\r\n\t\tconst currentFinalCommand = this.commands[this.commands.length - 1]\r\n\t\t\r\n\t\t// check to see if there is an pocket already open\r\n\t\t// open a new pocket\r\n\t\tif (midiCommand.type === MIDICommands.TYPE_META)\r\n\t\t{\r\n\t\t\tswitch( midiCommand.subtype )\r\n\t\t\t{\r\n\t\t\t\tcase \"trackName\":\r\n\t\t\t\t\tif (midiCommand.text && midiCommand.text !== \"Untitled\" )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis[midiCommand.subtype] = midiCommand.text\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\r\n\t\t\t\tcase \"text\":\r\n\t\t\t\tcase \"copyrightNotice\":\r\n\t\t\t\tcase \"lyrics\":\r\n\t\t\t\t\tif (midiCommand.text)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis[midiCommand.subtype] += midiCommand.text\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (midiCommand.text)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.meta += midiCommand.text\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}else{\r\n\r\n\t\t\t// Deal with instrument changes\r\n\t\t\tswitch( midiCommand.subtype )\r\n\t\t\t{\r\n\t\t\t\tcase MIDICommands.COMMAND_PROGRAM_CHANGE:\r\n\t\t\t\t\tconst instrumentName = GENERAL_MIDI_INSTRUMENTS[midiCommand.programNumber]\r\n\t\t\t\t\tthis.instruments.push( instrumentName )\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\r\n\t\t\tswitch( midiCommand.subtype )\r\n\t\t\t{\r\n\t\t\t\tcase MIDICommands.COMMAND_NOTE_ON:\r\n\t\t\t\tcase MIDICommands.COMMAND_NOTE_OFF:\r\n\t\t\t\tcase MIDICommands.COMMAND_CONTROLLER:\r\n\t\t\t\tcase MIDICommands.COMMAND_PITCH_BEND:\r\n\t\t\t\tcase MIDICommands.COMMAND_PROGRAM_CHANGE:\r\n\t\t\t\tcase MIDICommands.COMMAND_CHANNEL_AFTER_TOUCH:\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t// add multidimnsionally?\r\n\t\t\t\t\tif (!currentFinalCommand)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// first command!\r\n\t\t\t\t\t\t//console.log( \"Adding command\", {currentFinalCommand, midiCommand} )\r\n\t\t\t\t\t\tthis.tracks.push([midiCommand])\r\n\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tif (midiCommand.deltaTime === 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tconst previousDeltaTime = currentFinalCommand.timeCode\r\n\t\t\t\t\t\t\tmidiCommand.timeCode = previousDeltaTime\r\n\t\t\t\t\t\t\tmidiCommand.time = this.duration\r\n\r\n\t\t\t\t\t\t\t// modify command to contain correct timecode\r\n\t\t\t\t\t\t\tconst commandsAtLocation = this.tracks[ this.tracks.length - 1 ]\r\n\t\t\t\t\t\t\tcommandsAtLocation.push(midiCommand)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//console.log( \"Appending deltaTime 0\", {commandsAtLocation, currentFinalCommand, midiCommand} )\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\t// add to duration\r\n\t\t\t\t\t\t\tthis.duration += midiCommand.deltaTime || 0 \r\n\r\n\t\t\t\t\t\t\tmidiCommand.timeCode = midiCommand.deltaTime\r\n\t\t\t\t\t\t\tmidiCommand.time = this.duration\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//console.log( \"Adding\", {currentFinalCommand, midiCommand} )\r\n\t\t\t\t\t\t\tthis.tracks.push([midiCommand])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.commands.push(midiCommand)\r\n\t\t\t}\r\n\r\n\t\t\tswitch( midiCommand.subtype )\r\n\t\t\t{\r\n\t\t\t\tcase MIDICommands.COMMAND_NOTE_ON:\r\n\t\t\t\t\tthis.noteOnCommands.push(midiCommand)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t\r\n\ttoString()\r\n\t{\r\n\t\treturn `MIDI:Track::${this.commands.map( track => track.toString() ).join(\", \")}`\r\n\t}\r\n\r\n\r\n\tcommandToJSON( command )\r\n\t{\r\n\t\tlet output = `${command.time}. MIDI:Input::${command.subtype} Type:${command.type}`\r\n\t\tif (command.channel){ output += ` [Channel ${command.channel}] ` }\r\n\t\tif (command.noteNumber){ output += ` Note:${command.noteNumber} -> ${command.noteName}` }\r\n\t\tif (command.velocity){ output += ` Velocity:${command.velocity}` }\r\n\t\treturn output\r\n\t}\r\n\r\n\t// To load save midi tracks in a web friendlier way, we can serialise it to JSON\r\n\ttoJSON()\r\n\t{\r\n\t\tconst o = this.commands.map( command => commandToJSON(command) )\r\n\t\treturn o // `[${this.tracks.map( track => track.toString() ).join(\",\")}]`\r\n\t}\r\n}","// [General MIDI Instrument Patch Map](https://www.midi.org/specifications/item/gm-level-1-sound-set)\r\n// [General MIDI Instrument Patch Map](http://cs.uccs.edu/~cs525/midi/midi.html)\r\n/*\r\nGeneral MIDI Level 1 Instrument Families\r\n\r\nThe General MIDI Level 1 instrument sounds are grouped by families.\r\nIn each family are 8 specific instruments.\r\n\r\nPC# \tFamily Name\r\n1-8 \tPiano\r\n9-16 \tChromatic Percussion\r\n17-24 \tOrgan\r\n25-32 \tGuitar\r\n33-40 \tBass\r\n41-48 \tStrings\r\n49-56 \tEnsemble\r\n57-64 \tBrass\r\n65-72 \tReed\r\n73-80 \tPipe\r\n81-88 \tSynth Lead\r\n89-96 \tSynth Pad\r\n97-104 \tSynth Effects\r\n105-112 Ethnic\r\n113-120 Percussive\r\n121-128 Sound Effects\r\n\r\nOn MIDI Channel 10, each MIDI Note number (\"Key#\") corresponds to a different drum sound, as shown below.\r\nGM-compatible instruments must have the sounds on the keys shown here.\r\n\r\nWhile many current instruments also have additional sounds above or below the range show here,\r\nand may even have additional \"kits\" with variations of these sounds, only these sounds are supported\r\nby General MIDI Level 1 devices.\r\n\r\n*/\r\nexport const GENERAL_MIDI_INSTRUMENTS = [\r\n\t\"acoustic grand piano\",\r\n\t\"bright acoustic piano\",\r\n\t\"electric grand piano\",\r\n\t\"honky-tonk piano\",\r\n\t\"electric piano 1\",\r\n\t\"electric piano 2\",\r\n\t\"harpsichord\",\r\n\t\"clavi\",\r\n\t\"celesta\",\r\n\t\"glockenspiel\",\r\n\t\"music box\",\r\n\t\"vibraphone\",\r\n\t\"marimba\",\r\n\t\"xylophone\",\r\n\t\"tubular bells\",\r\n\t\"dulcimer\",\r\n\t\"drawbar organ\",\r\n\t\"percussive organ\",\r\n\t\"rock organ\",\r\n\t\"church organ\",\r\n\t\"reed organ\",\r\n\t\"accordion\",\r\n\t\"harmonica\",\r\n\t\"tango accordion\",\r\n\t\"acoustic guitar (nylon)\",\r\n\t\"acoustic guitar (steel)\",\r\n\t\"electric guitar (jazz)\",\r\n\t\"electric guitar (clean)\",\r\n\t\"electric guitar (muted)\",\r\n\t\"overdriven guitar\",\r\n\t\"distortion guitar\",\r\n\t\"guitar harmonics\",\r\n\t\"acoustic bass\",\r\n\t\"electric bass (finger)\",\r\n\t\"electric bass (pick)\",\r\n\t\"fretless bass\",\r\n\t\"slap bass 1\",\r\n\t\"slap bass 2\",\r\n\t\"synth bass 1\",\r\n\t\"synth bass 2\",\r\n\t\"violin\",\r\n\t\"viola\",\r\n\t\"cello\",\r\n\t\"contrabass\",\r\n\t\"tremolo strings\",\r\n\t\"pizzicato strings\",\r\n\t\"orchestral harp\",\r\n\t\"timpani\",\r\n\t\"string ensemble 1\",\r\n\t\"string ensemble 2\",\r\n\t\"synthstrings 1\",\r\n\t\"synthstrings 2\",\r\n\t\"choir aahs\",\r\n\t\"voice oohs\",\r\n\t\"synth voice\",\r\n\t\"orchestra hit\",\r\n\t\"trumpet\",\r\n\t\"trombone\",\r\n\t\"tuba\",\r\n\t\"muted trumpet\",\r\n\t\"french horn\",\r\n\t\"brass section\",\r\n\t\"synthbrass 1\",\r\n\t\"synthbrass 2\",\r\n\t\"soprano sax\",\r\n\t\"alto sax\",\r\n\t\"tenor sax\",\r\n\t\"baritone sax\",\r\n\t\"oboe\",\r\n\t\"english horn\",\r\n\t\"bassoon\",\r\n\t\"clarinet\",\r\n\t\"piccolo\",\r\n\t\"flute\",\r\n\t\"recorder\",\r\n\t\"pan flute\",\r\n\t\"blown bottle\",\r\n\t\"shakuhachi\",\r\n\t\"whistle\",\r\n\t\"ocarina\",\r\n\t\"lead 1 (square)\",\r\n\t\"lead 2 (sawtooth)\",\r\n\t\"lead 3 (calliope)\",\r\n\t\"lead 4 (chiff)\",\r\n\t\"lead 5 (charang)\",\r\n\t\"lead 6 (voice)\",\r\n\t\"lead 7 (fifths)\",\r\n\t\"lead 8 (bass + lead)\",\r\n\t\"pad 1 (new age)\",\r\n\t\"pad 2 (warm)\",\r\n\t\"pad 3 (polysynth)\",\r\n\t\"pad 4 (choir)\",\r\n\t\"pad 5 (bowed)\",\r\n\t\"pad 6 (metallic)\",\r\n\t\"pad 7 (halo)\",\r\n\t\"pad 8 (sweep)\",\r\n\t\"fx 1 (rain)\",\r\n\t\"fx 2 (soundtrack)\",\r\n\t\"fx 3 (crystal)\",\r\n\t\"fx 4 (atmosphere)\",\r\n\t\"fx 5 (brightness)\",\r\n\t\"fx 6 (goblins)\",\r\n\t\"fx 7 (echoes)\",\r\n\t\"fx 8 (sci-fi)\",\r\n\t\"sitar\",\r\n\t\"banjo\",\r\n\t\"shamisen\",\r\n\t\"koto\",\r\n\t\"kalimba\",\r\n\t\"bag pipe\",\r\n\t\"fiddle\",\r\n\t\"shanai\",\r\n\t\"tinkle bell\",\r\n\t\"agogo\",\r\n\t\"steel drums\",\r\n\t\"woodblock\",\r\n\t\"taiko drum\",\r\n\t\"melodic tom\",\r\n\t\"synth drum\",\r\n\t\"reverse cymbal\",\r\n\t\"guitar fret noise\",\r\n\t\"breath noise\",\r\n\t\"seashore\",\r\n\t\"bird tweet\",\r\n\t\"telephone ring\",\r\n\t\"helicopter\",\r\n\t\"applause\",\r\n\t\"gunshot\",\r\n]\r\n\r\nexport const GENERAL_MIDI_INSTRUMENT_FAMILY_NAMES = [\r\n\t\"piano\",\r\n\t\"chromatic percussion\",\r\n\t\"organ\",\r\n\t\"guitar\",\r\n\t\"bass\",\r\n\t\"strings\",\r\n\t\"ensemble\",\r\n\t\"brass\",\r\n\t\"reed\",\r\n\t\"pipe\",\r\n\t\"synth lead\",\r\n\t\"synth pad\",\r\n\t\"synth effects\",\r\n\t\"ethnic\",\r\n\t\"percussive\",\r\n\t\"sound effects\",\r\n]\r\n\r\nexport const GENERAL_MIDI_INSTRUMENT_FAMILY_IDS = {\r\n\t0: \"piano\",\r\n\t7: \"chromatic percussion\",\r\n\t12: \"organ\",\r\n\t25: \"guitar\",\r\n\t33: \"bass\",\r\n\t41: \"strings\",\r\n\t49: \"ensemble\",\r\n\t57: \"brass\",\r\n\t65: \"reed\",\r\n\t69: \"pipe\",\r\n\t81: \"synth lead\",\r\n\t89: \"synth pad\",\r\n\t97: \"synth effects\",\r\n\t// some rasict shit right here akin to \"world\" music\r\n\t105: \"ethnic\",\r\n\t113: \"percussive\",\r\n\t123: \"sound effects\"\r\n}\r\n\r\nexport const GENERAL_MIDI_FAMILIES = new Map()\r\n\r\n// This creates a Map of instument arrays\r\nexport const GENERAL_MIDI_INSTRUMENT_FAMILIES = {}\r\n\r\nexport const FAMILY_DICTIONARY = {}\r\nlet latch = GENERAL_MIDI_INSTRUMENT_FAMILY_IDS[0]\r\nGENERAL_MIDI_INSTRUMENTS.forEach( (instrument, index) => {\r\n\t\r\n\tif (GENERAL_MIDI_INSTRUMENT_FAMILY_IDS[index])\r\n\t{\r\n\t\tlatch = GENERAL_MIDI_INSTRUMENT_FAMILY_IDS[index]\r\n\t}\r\n\t// GENERAL_MIDI_INSTRUMENT_FAMILY_IDS[index]\r\n\tGENERAL_MIDI_FAMILIES.set( latch, [...(GENERAL_MIDI_FAMILIES.get(latch) || []), instrument] )\r\n\tFAMILY_DICTIONARY[instrument] = latch\r\n})\r\n\r\n\r\nexport const DrumKitByPatchID = {\r\n\t 0: \"standard kit\",\r\n\t 8: \"room kit\",\r\n\t16: \"power kit\",\r\n\t24: \"electronic kit\",\r\n\t25: \"tr-808 kit\",\r\n\t32: \"jazz kit\",\r\n\t40: \"brush kit\",\r\n\t48: \"orchestra kit\",\r\n\t56: \"sound fx kit\",\r\n}\r\n\r\n/*\r\n\r\nChannel 10 Drum sounds (overwrites the noteNumber)\r\n\r\nDrum Sound - 35\r\nAcoustic Bass Drum - 36\r\nBass Drum 1 - 37\r\nSide Stick 38 \r\nAcoustic Snare - 39\r\nHand Clap 40\r\nElectric Snare 41\r\nLow Floor Tom 42\r\nClosed Hi Hat 43\r\nHigh Floor Tom 44\r\nPedal Hi-Hat 45\r\nLow Tom 46\r\nOpen Hi-Hat 47\r\nLow-Mid Tom 48\r\nHi-Mid Tom 49\r\nCrash Cymbal 1 50\r\nHigh Tom 51\r\nRide Cymbal 1 52\r\nChinese Cymbal 53\r\nRide Bell 54\r\nTambourine 55\r\nSplash Cymbal 56\r\nCowbell 57\r\nCrash Cymbal 2 58\r\nVibraslap 59\r\nRide Cymbal 2 60\r\nHi Bongo 61\r\nLow Bongo 62\r\nMute Hi Conga 63\r\nOpen Hi Conga 64\r\nLow Conga 65\r\nHigh Timbale 66\r\nLow Timbale 67\r\nHigh Agogo 68\r\nLow Agogo 69\r\nCabasa 70\r\nMaracas 71\r\nShort Whistle \r\n72\r\nLong Whistle \r\n73\r\nShort Guiro \r\n74\r\nLong Guiro \r\n75\r\nClaves\r\n76\r\nHi Wood Block\r\n77\r\nLow Wood Block\r\n78\r\nMute Cuica\r\n79\r\nOpen Cuica\r\n80\r\nMute Triangle\r\n81\r\nOpen Triangle\r\n*/","// Types!\r\nexport const TYPE_CHANNEL                   = 'channel'\r\nexport const TYPE_META                      = 'meta'\r\nexport const TYPE_SYSTEM_EXCLUSIVE          = 'sysEx'\r\nexport const TYPE_DIVIDED_SYSTEM_EXCLUSIVE  = 'dividedSysEx'\r\n\r\n// Commands!\r\nexport const COMMAND_NOTE_OFF               = 'noteOff'\r\nexport const COMMAND_NOTE_ON                = 'noteOn'\r\nexport const COMMAND_NOTE_AFTER_TOUCH       = 'noteAftertouch'\r\nexport const COMMAND_CONTROLLER             = 'controller'\r\nexport const COMMAND_PROGRAM_CHANGE         = 'programChange'\r\n\r\nexport const COMMAND_CHANNEL_AFTER_TOUCH    = 'channelAftertouch'\r\nexport const COMMAND_CHANNEL_PRESSURE       = 'channelPressure'\r\n\r\nexport const COMMAND_PITCH_BEND             = 'pitchBend'\r\nexport const COMMAND_SYSTEM_MESSAGE         = 'systemMessage'\r\n\r\nexport const COMMANDS = [\r\n\tCOMMAND_NOTE_OFF,\r\n\tCOMMAND_NOTE_ON,\r\n\tCOMMAND_NOTE_AFTER_TOUCH,\r\n\tCOMMAND_CONTROLLER,\r\n\tCOMMAND_PROGRAM_CHANGE,\r\n\tCOMMAND_CHANNEL_PRESSURE,\r\n\tCOMMAND_PITCH_BEND,\r\n\tCOMMAND_SYSTEM_MESSAGE\r\n]","/**\r\n * Having written this numerous times here are some\r\n * notes for next time around.\r\n * \r\n * There are MORE MIDI notes than SAMPLES\r\n * so we have to restrict the octaves from 1-9 to 1-7\r\n * \r\n */\r\n\r\nimport {clamp} from \"../maths/maths\"\r\nimport { memoize } from \"../utils\"\r\n\r\n// Memoize as much as possible\r\n\r\nconst NOTES_ALPHABETICAL = [\"A\",\"Ab\",\"B\",\"Bb\",\"C\",\"D\", \"Db\",\"E\", \"Eb\", \"F\", \"G\",\"Gb\"]\r\n// const CONVERSION_NOTES = [\"A\", \"A#\", \"B\", \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\"]\r\n\r\nconst NOTES_BLACK = [\"Ab\", \"Bb\", \"Db\", \"Eb\", \"Gb\"]\r\nconst NOTES_WHITE = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\" ]\r\nconst NOTES_BLACK_INDEXES = NOTES_BLACK.length - 1\r\nconst NOTES_WHITE_INDEXES = NOTES_WHITE.length - 1\r\nconst NOTE_RANGE = NOTES_ALPHABETICAL.length\r\n\r\n// renamed white notes\r\nexport const SOLFEGE_SCALE = ['Doe', 'Ray', 'Me', 'Far', 'Sew', 'La', 'Tea' ]\r\n\r\n// this is an object with the keys being the NOTE_NAMES\r\n// MIDI conversion stuff\r\nconst NOTE_NAME_MAP = {}\r\nconst NOTE_FRIENDLY_NAME_MAP = {}\r\n\r\nconst MIDI_NOTE_NUMBER_MAP = []\r\nconst MIDI_NOTE_NUMBERS = []\r\nconst MIDI_NOTE_NAMES = []\r\nconst MIDI_NOTE_FRIENDLY_NAMES = []\r\n\r\nconst MIDI_NOTE_FREQUENCIES = []\r\nconst GENERAL_MIDI_INSTRUMENTS = []\r\n\r\n\r\n/**\r\n * Convert a MIDI Note Number into a frequency in hertz\r\n * @param {Number} note \r\n * @returns {Number}\r\n */\r\n export const noteNumberToFrequency = (note) => {\r\n\tconst c = (note - 69) / 12\r\n\treturn 440 * c * c\r\n}\r\n\r\n\r\n/**\r\n * returns a note name from an index and offset\r\n * @param {Number} index \r\n * @param {Number} offset \r\n * @returns {Number} noteNumber\r\n */\r\nconst getNoteFromBank = (index=0, offset=0) => {\r\n\tconst rotation = index + offset\r\n\treturn NOTES_ALPHABETICAL[ rotation < 0 ? NOTE_RANGE + rotation : rotation % NOTE_RANGE ]\r\n}\r\n\r\n/**\r\n * The instruments are all named the same way and this method\r\n * creates the data model\r\n * \r\n * @param {String} fileType - audio file type (wav, ogg or mp3)\r\n * @param {String} dot - delimiter before file type\r\n * @returns {String} Array containing the following strings...\r\n * A0-7 / Ab1-7 / B0-7 / Bb1-Bb7 / C1-C8 / D1-7 / Db1-7 / E1-7 / Eb1-7 / F1-7 / G1-7 / Gb1-7\r\n */\r\nexport const createInstrumentBanks = (fileType=\"mp3\", dot=\".\")=>{\r\n\tconst bank = []\r\n\tfor (let b=0; b<NOTES_ALPHABETICAL.length;++b)\r\n\t{\r\n\t\tconst key = NOTES_ALPHABETICAL[b]\r\n\t\t\r\n\t\tif (key===\"A\")\r\n\t\t{\r\n\t\t\tbank.push( `A0${dot}${fileType}` )\r\n\r\n\t\t}else if (key===\"B\"){\r\n\r\n\t\t\tbank.push( `B0${dot}${fileType}` )\r\n\t\t}\r\n\r\n\t\tfor (let i=1; i<8; ++i)\r\n\t\t{\r\n\t\t\tbank.push( `${key}${i}${dot}${fileType}` )\r\n\t\t}\r\n\r\n\t\t// add an extra one for C\r\n\t\tif (key===\"C\")\r\n\t\t{\r\n\t\t\tbank.push( `C8${dot}${fileType}` )\r\n\t\t}\r\n\t}\r\n\treturn bank\r\n}\r\n\r\nconst extractKeyAndOctave = note => {\r\n\tconst key = note.charAt(0)\r\n\tconst octave = parseInt( note.charAt( note.length - 1 ) ) // + 1\r\n\treturn {\r\n\t\tkey, octave\r\n\t}\r\n}\r\n\r\nconst friendly = note => {\r\n\t\r\n\tconst {key, octave} = extractKeyAndOctave(note)\r\n\tnote = note.replace( octave, `-${octave}` )\r\n\tnote = note.replace(\"b\",\"#\")\r\n\r\n\treturn note\r\n}\r\n\r\n// This is a A0-7 / Ab1-7 / B0-7 / Bb1-Bb7 / C1-C8 / D1-7 / Db1-7 / E1-7 / Eb1-7 / F1-7 / G1-7 / Gb1-7\r\nexport const NOTE_NAMES = createInstrumentBanks('','')\r\n\r\n// for each name we do a clever thing innit...\r\nconst NOTE_NAMES_FRIENDLY = NOTE_NAMES.map( note => friendly(note) )\r\n\r\n// NB. We only have instruments for the GM Range so \r\n//\t\tall MIDI numbers below 21 should be ignored really!\r\nfor(let noteNumber = 0; noteNumber < 127; noteNumber++) \r\n{\r\n\t// const noteName = NOTE_NAMES[noteNumber]\r\n\r\n\t// MIDI scale starts at octave = -1\r\n\tconst octave = ((noteNumber / NOTE_RANGE) | 0) - 1\r\n\t// Determine which key it is from the number?\r\n\tconst key = getNoteFromBank(noteNumber % NOTE_RANGE, 4)\r\n\r\n\tconst midiNoteName = `${key}${octave}`\r\n\tconst friendlyName = friendly(midiNoteName)\r\n\r\n\t//console.log( noteNumber, \"note\", { midiNoteName, friendlyName, octave, key })\r\n\r\n\tNOTE_FRIENDLY_NAME_MAP[midiNoteName] = friendlyName\r\n\tNOTE_NAME_MAP[midiNoteName] = noteNumber\r\n\r\n\t// MIDI_NOTE_NUMBERS[noteNumber] = midiNoteName\r\n\tMIDI_NOTE_NAMES[noteNumber] = midiNoteName\r\n\tMIDI_NOTE_FRIENDLY_NAMES[noteNumber] = friendlyName\r\n\tMIDI_NOTE_NUMBER_MAP[noteNumber] = {octave,key}\r\n\r\n\tMIDI_NOTE_FREQUENCIES[noteNumber] = noteNumberToFrequency(noteNumber)\r\n\r\n\t// console.log(noteNumber, \"Converting\", {noteName, octave, key, midiNoteName, friendlyName })\r\n\r\n\t// // ensure that it exists in our super array...\r\n\tconst hasSample = NOTE_NAMES.indexOf(midiNoteName) > -1\r\n\tGENERAL_MIDI_INSTRUMENTS[noteNumber] = hasSample ? midiNoteName : `UNKNOWN`\r\n}\r\n\r\n\r\n\r\n// export const getNoteText = noteName => {\r\n// \tconst note = noteName.charAt(0)\r\n// \tlet octave\r\n// \t// if we have 3 figures we swap out the 2nd one for a \r\n// \tif (noteName.length === 3)\r\n// \t{\r\n// \t\toctave = parseInt( noteName.charAt(2) ) + 1\r\n// \t\treturn `${note}#${octave}`\r\n// \t}\r\n// \toctave = parseInt( noteName.charAt(1) ) + 1\r\n// \treturn `${note}${octave}`\r\n// }\r\n\r\n\r\n/**\r\n * what percentage of an octave results in\r\n * which musical notes\r\n * @param {Number} percent \r\n * @param {Number} octave - octaves 1-7\r\n * @param {Boolean} isMinor \r\n * @returns A1 Ab1 etc\r\n */\r\nexport const getNoteName = (percent, octave=3, isMinor=false) => {\r\n\r\n\t// restrict to 1-7 even though 0 is available for many\r\n\t// octave = clamp(octave, 1, 7)\r\n\tlet noteNumber\r\n\tlet noteName\r\n\t\r\n\tif (isMinor)\r\n\t{\r\n\t\tnoteNumber = Math.floor( percent * NOTES_BLACK_INDEXES )\r\n\t\tnoteName = NOTES_BLACK[noteNumber]\r\n\t}else{\r\n\t\tnoteNumber = Math.floor( percent * NOTES_WHITE_INDEXES )\r\n\t\tnoteName = NOTES_WHITE[noteNumber]\r\n\t}\r\n\r\n\t// here is where we need to do our majic\r\n\t// const BANKS = [\"A\",\"Ab\",\"B\",\"Bb\",\"C\",\"D\", \"Db\",\"E\", \"Eb\", \"F\", \"G\",\"Gb\"]\r\n\t// play a note from bank (this is the same for every octave?)\r\n\t// const noteNumber = Math.floor( percent * (BANKS.length-1) )\r\n\t\r\n\t// console.log(\"Creating note\", {percent, octave, isMinor, noteNumber, noteName} )\r\n\t// const noteNumber = Math.floor( percent * (NOTE_NAMES.length-1) )\r\n\t// const noteNumber = Math.floor( percent * (NOTE_NAMES.length-1) )\r\n\t// const noteNumber = Math.floor( lipPercentage * (INSTRUMENT_NAMES.length-1) )\r\n\t// const noteName = NOTE_NAMES[noteNumber]\r\n\r\n\t// just in case the note name is not found?\r\n\treturn `${noteName}${clamp(octave, 1, 7)}`\r\n\t// return noteName ? `${noteName}${clamp(octave, 1, 7)}` : `A0`\r\n}\r\n\r\n/**\r\n * return the relevent do re me fah so lat ti\r\n * @param {Number} percent \r\n * @param {*} isMinor \r\n * @returns \r\n */\r\nexport const getNoteSound = (percent, isMinor=false) => SOLFEGE_SCALE[ Math.floor( percent * (SOLFEGE_SCALE.length-1) ) ]\r\n\r\n// Pass in A0 get out the equivalent friendly name\r\nexport const getFriendlyNoteName = noteName => NOTE_FRIENDLY_NAME_MAP[noteName] || noteName\r\n\r\n\r\n/**\r\n * Get the note name (in scientific notation) of the given midi number\r\n *\r\n * It uses MIDI's [Tuning Standard](https://en.wikipedia.org/wiki/MIDI_Tuning_Standard)\r\n * where A4 is 69\r\n *\r\n * This method doesn't take into account diatonic spelling. Always the same\r\n * pitch class is given for the same midi number.\r\n *\r\n * @name midi.note\r\n * @function\r\n * @param {Integer} midi - the midi number\r\n * @return {String} the pitch\r\n */\r\nexport const convertNoteNameToMIDINoteNumber = name => NOTE_NAME_MAP[name]\r\n\r\n/**\r\n * \r\n * @param {*} note \r\n * @returns \r\n */\r\nexport const convertMIDINoteNumberToName = note => GENERAL_MIDI_INSTRUMENTS[note]\r\n\r\n/**\r\n * \r\n */\r\nexport const noteNumberToFrequencyFast = memoize(noteNumberToFrequency)\r\n\r\n\r\nconst L = Math.log(2)\r\n\r\n/**\r\n * \r\n * @param {*} f \r\n * @returns \r\n */\r\nexport const frequencyToNoteNumber = (f) => {\r\n\tconst log = Math.log(f / 440) / L\r\n\treturn Math.round(12 * log + 69)\r\n}\r\n\r\n\r\n// MIDI_NOTE_NAMES.forEach( note => \r\n// \tconsole.error(\"convertNoteNameToMIDINoteNumber\", note, convertNoteNameToMIDINoteNumber(note) , {NOTE_NAMES, NOTE_NAME_MAP, MIDI_NOTE_NAMES} ) \r\n// )\r\n\r\n// console.error(\"NOTE_NAMES\", NOTE_NAMES )\r\n// console.error(\"NOTE_NAMES_FRIENDLY\", NOTE_NAMES_FRIENDLY )\r\n\r\n// console.error(\"MIDI_NOTE_NAMES\", MIDI_NOTE_NAMES )\r\n\r\n// // console.error(\"MIDI_NOTE_FREQUENCIES\", MIDI_NOTE_FREQUENCIES )\r\n\r\n// console.error(\"MIDI_NOTE_NUMBERS\", MIDI_NOTE_NUMBERS )\r\n// console.error(\"NOTE_FRIENDLY_NAME_MAP\", NOTE_FRIENDLY_NAME_MAP )\r\n// console.error(\"MIDI_NOTE_FRIENDLY_NAMES\", MIDI_NOTE_FRIENDLY_NAMES )\r\n// console.error(\"MIDI_NOTE_NUMBER_MAP\", MIDI_NOTE_NUMBER_MAP )\r\n// console.error(\"NOTE_NAME_MAP\", NOTE_NAME_MAP  )\r\n// console.error(\"MIDI\", { NOTES_ALPHABETICAL, CHROMATIC, CONVERSION_NOTES, MIDI_NOTE_NUMBERS, MIDI_CONVERTOR })\r\n// console.error({GENERAL_MIDI_INSTRUMENTS, NOTES_ALPHABETICAL, MIDI_NOTE_NUMBERS, MIDI_NOTE_NUMBER_MAP, NOTE_NAME_MAP, NOTE_NAMES,NOTE_FRIENDLY_NAME_MAP, NOTE_NAMES_FRIENDLY})\r\n","export const TAU = 2 * Math.PI\r\nexport const HALF_PI = Math.PI * 0.5\r\nexport const TWO_PI = Math.PI * 2\r\n\r\nconst {PI, sqrt, atan2, tan} = Math\r\n\r\nexport const range = (input, inputMin, inputMax, outputMin, outputMax) => {\r\n\tconst value = (input - inputMin) * (outputMax - outputMin) / (inputMax - inputMin) + outputMin\r\n\tif (value < outputMin) {return outputMin}\r\n\telse if (value > outputMax) {return outputMax}\r\n\treturn value\r\n}\r\n\r\nexport const rangeRounded = (input, inputMin, inputMax, outputMin, outputMax ) => {\r\n\tconst value = Math.round( (input - inputMin) * (outputMax - outputMin) / (inputMax - inputMin) + outputMin )\r\n\tif (value < outputMin) {return outputMin}\r\n\telse if (value > outputMax) {return outputMax}\r\n\treturn value\r\n}\r\n\r\n// provide the value and a smallest and largest original then new sizes\r\n// Functional Program\r\nexport const rescale = ( smallest=0, largest=1 ) => {\r\n    // find the scale and create a method that allows \r\n    // you to simply rescale at will\r\n    const fullRange = 1 / ( largest - smallest )\r\n\r\n    // return a method that you can pass a value to\r\n    return value => fullRange * ( value - smallest )\r\n}\r\n\r\n// Feed it a right angle triangle and get the angle between the edges\r\nexport const determineAngle = ( pointA, pointB ) => {\r\n\r\n\t// work out the lengths of the known edges\r\n\tconst oppositeLength = pointA.y - pointB.y\r\n\tconst adjacentLength = pointB.x - pointA.x\r\n\tconst angleInRadians = atan2(oppositeLength, adjacentLength)\r\n\t// process?\r\n\treturn angleInRadians\r\n}\r\n// ** === ^\r\n/*\r\n// distance between a & b via right angled triangle\r\nexport const distanceBetween2Points = (pointA, pointB) => sqrt(\r\n    ( pointA[ 0 ] - pointB[ 0 ] ) ** 2 + \r\n    ( pointA[ 1 ] - pointB[ 1 ] ) ** 2\r\n)\r\nexport const distanceBetween3Points = (pointA, pointB) => sqrt(\r\n    ( pointA[ 0 ] - pointB[ 0 ] ) ** 2 + \r\n    ( pointA[ 1 ] - pointB[ 1 ] ) ** 2 +\r\n    ( pointA[ 2 ] - pointB[ 2 ] ) ** 2\r\n)\r\n*/\r\nexport const distance3D = (aX,bX,  aY,bY, aZ,bZ ) => sqrt(\r\n    (aX - bX) ** 2 + \r\n    (aY - bY) ** 2 + \r\n    (aZ - bZ) ** 2\r\n)\r\n\r\n// distance between a & b via right angled triangle\r\nexport const distance2D = (aX,aY,bX,bY) => sqrt(\r\n    (aX - bX) ** 2 + \r\n    (aY - bY) ** 2\r\n)\r\n\r\n// distance between a & b via right angled triangle\r\nexport const hypoteneuse2D = ( pointA,pointB) => sqrt(\r\n    (pointA.x - pointB.x) ** 2 + \r\n    (pointA.y - pointB.y) ** 2\r\n)\r\nexport const hypoteneuse3D = (pointA, pointB) => sqrt(\r\n    (pointA.x - pointB.x) ** 2 + \r\n    (pointA.y - pointB.y) ** 2 +\r\n    (pointA.z - pointB.z) ** 2\r\n)\r\n\r\n\r\nexport const add3D = (a, b, output={} ) => {\r\n\toutput.x = a.x + b.x\r\n\toutput.y = a.y + b.y\r\n\toutput.z = a.z + b.z\r\n\treturn output\r\n}\r\n\r\nexport const subtract3D = (a, b, output={} ) => {\r\n\toutput.x = a.x - b.x\r\n\toutput.y = a.y - b.y\r\n\toutput.z = a.z - b.z\r\n\treturn output\r\n}\r\n\r\n// multiply points\r\nexport const  multiply3D = (a, b, output={} ) => {\r\n\toutput.x = a.x * b.x\r\n\toutput.y = a.y * b.y\r\n\toutput.z = a.z * b.z\t\r\n\treturn output\r\n}\r\n\r\nexport const cross3D = (a, b, output={} ) => {\r\n\toutput.x = a.y * b.z - a.z * b.y\r\n\toutput.y = a.z * b.x - a.x * b.z\r\n\toutput.z = a.x * b.y - a.y * b.x\r\n\treturn output\r\n}\r\n\r\nexport const divide3D = (a, b, output={} ) => {\r\n\toutput.x = a.x / b.x\r\n\toutput.y = a.y / b.y\r\n\toutput.z = a.z / b.z\r\n\treturn output\r\n}\r\n\r\n\r\nexport const lerp = (start, end, amt) => (1-amt) * start + amt * end\r\n\r\n// Restrict between\r\nexport const clamp = (val, min, max) => val > max ? max : val < min ? min : val\r\n\r\n// cheaper than TAN\r\nexport const twist = (value, amount=0) => {\r\n\r\n\t// if it is negative, invert\r\n\tif (value < 0)\r\n\t{\r\n\t\tvalue = (value + 1) * -1\r\n\t}else{\r\n\t\tvalue = 1 - value\r\n\t}\r\n\t//return value + amount\r\n\treturn clamp(value + amount,-1,1)\r\n}\r\n\r\n\r\n\r\n// export const lerp = (a, b, t) => (b-a)*t+a\r\n// export const unlerp = (a, b, t) => (t-a)/(b-a)\r\n// export const remap = (a1, b1, a2, b2, t) => lerp(a2, b2, unlerp(a1, b1, t))\r\n\r\n\r\nexport const round = (somenum) => {\r\n\t// With a bitwise or.\r\n\treturn (0.5 + somenum) | 0\r\n\t// A double bitwise not.\r\n\treturn ~~ (0.5 + somenum)\r\n\t// Finally, a left bitwise shift.\r\n\treturn (0.5 + somenum) << 0\r\n}\r\n","export const convertOptionToObject = items => items.reduce( (accumulator, current) => {\r\n\tconst c = current.split(\":\")\r\n\taccumulator[c[0]] = parseFloat(c[1])\r\n\treturn accumulator\r\n}, {})\r\n\r\nexport const debounce = (callback, wait) => {\r\n\tlet timerId\r\n\t\r\n\treturn (...args) => {\r\n\t\t//console.error(args, \"debounce\", arguments)\r\n\t  clearTimeout(timerId)\r\n\t  timerId = setTimeout(() => callback(...args), wait)\r\n\t  return timerId\r\n\t}\r\n}\r\n\r\n\r\n// memoize this method\r\nexport const memoize = ( method ) => {\r\n\r\n\t// store outputs and inputs\r\n\tconst cache = new Map()\r\n\r\n\t// takes same args as the method\r\n\treturn (...args) => {\r\n\r\n\t\t// check to see if we have a cached entry\r\n\t\tif (cache.has(args))\r\n\t\t{\r\n\t\t\treturn cache.get(args)\r\n\t\t}\r\n\r\n\t\tconst result = method.apply( this, args )\r\n\t\tcache.set( args, result )\r\n\t\treturn result\r\n\t}\r\n}\r\n\r\n\r\nexport const injectJavascript = async(url) => new Promise((resolve, reject) => {\r\n\tconst script = document.createElement(\"script\")\r\n\tscript.onload = () => { resolve(url) }\r\n\tscript.onerror = error => { reject(error) }\r\n\tscript.src = url\r\n\tdocument.head.appendChild(script)\r\n\t// console.error(\"injecting JS\", url , script)\r\n})\r\n\r\n\r\n// DECODE UTILITIES\r\n\r\n\r\n/*\r\nBase64 / binary data / UTF-8 strings utilities\r\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\r\nhttps://github.com/audiojs/audio-loader/blob/master/lib/base64.js\r\n*/\r\nexport const b64ToUint6 = nChr => {\r\n\treturn nChr > 64 && nChr < 91 ? nChr - 65\r\n\t  : nChr > 96 && nChr < 123 ? nChr - 71\r\n\t  : nChr > 47 && nChr < 58 ? nChr + 4\r\n\t  : nChr === 43 ? 62\r\n\t  : nChr === 47 ? 63\r\n\t  : 0\r\n}\r\n\r\n/**\r\n * Base64 string to array encoding \r\n * @param {Uint6} nUint6 \r\n * @returns \r\n */\r\nexport const uint6ToB64 = nUint6 => {\r\n\treturn nUint6 < 26 ? nUint6 + 65\r\n\t  : nUint6 < 52 ? nUint6 + 71\r\n\t  : nUint6 < 62 ? nUint6 - 4\r\n\t  : nUint6 === 62 ? 43\r\n\t  : nUint6 === 63 ? 47\r\n\t  : 65\r\n}\r\n\r\n/**\r\n * Decode Base64 to Uint8Array\r\n * @param {sBase64} sBase64 \r\n * @param {nBlocksSize} nBlocksSize \r\n * @returns Uint8Array\r\n */\r\nexport const decodeBase64 = (sBase64, nBlocksSize) => {\r\n\tconst sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\r\n\tconst nInLen = sB64Enc.length\r\n\tconst nOutLen = nBlocksSize\r\n\t  ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\r\n\t  : nInLen * 3 + 1 >> 2\r\n\r\n\tconst taBytes = new Uint8Array(nOutLen)\r\n  \r\n\tfor (let nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) \r\n\t{\r\n\t  nMod4 = nInIdx & 3\r\n\t  nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\r\n\t  if (nMod4 === 3 || nInLen - nInIdx === 1) \r\n\t  {\r\n\t\tfor (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) \r\n\t\t{\r\n\t\t  taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\r\n\t\t}\r\n\t\tnUint24 = 0\r\n\t  }\r\n\t}\r\n\treturn taBytes\r\n}\r\n  \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const base64DecToArr = (sBase64, nBlocksSize) => {\r\n\r\n  var\r\n    sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"), nInLen = sB64Enc.length,\r\n    nOutLen = nBlocksSize ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize : nInLen * 3 + 1 >> 2, taBytes = new Uint8Array(nOutLen);\r\n\r\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\r\n    nMod4 = nInIdx & 3;\r\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 6 * (3 - nMod4);\r\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\r\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\r\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\r\n      }\r\n      nUint24 = 0;\r\n\r\n    }\r\n  }\r\n\r\n  return taBytes;\r\n}\r\n\r\n\r\nexport const base64EncArr = (aBytes) => {\r\n\r\n  let nMod3 = 2, sB64Enc = \"\"\r\n  for (var nLen = aBytes.length, nUint24 = 0, nIdx = 0; nIdx < nLen; nIdx++) \r\n  {\r\n    nMod3 = nIdx % 3\r\n    if (nIdx > 0 && (nIdx * 4 / 3) % 76 === 0) \r\n\t{ \r\n\t\tsB64Enc += \"\\r\\n\" \r\n\t}\r\n    nUint24 |= aBytes[nIdx] << (16 >>> nMod3 & 24)\r\n    if (nMod3 === 2 || aBytes.length - nIdx === 1) \r\n\t{\r\n      sB64Enc += String.fromCodePoint(uint6ToB64(nUint24 >>> 18 & 63), uint6ToB64(nUint24 >>> 12 & 63), uint6ToB64(nUint24 >>> 6 & 63), uint6ToB64(nUint24 & 63))\r\n      nUint24 = 0\r\n    }\r\n  }\r\n\r\n  return sB64Enc.substr(0, sB64Enc.length - 2 + nMod3) + (nMod3 === 2 ? '' : nMod3 === 1 ? '=' : '==');\r\n}\r\n\r\n/**\r\n * UTF-8 array to JS string and vice versa \r\n */\r\nexport const UTF8ArrToStr = (aBytes) => {\r\n  let sView = \"\"\r\n  for (var nPart, nLen = aBytes.length, nIdx = 0; nIdx < nLen; nIdx++) \r\n  {\r\n    nPart = aBytes[nIdx]\r\n    sView += String.fromCodePoint(\r\n      nPart > 251 && nPart < 254 && nIdx + 5 < nLen ? /* six bytes */\r\n        /* (nPart - 252 << 30) may be not so safe in ECMAScript! So...: */\r\n        (nPart - 252) * 1073741824 + (aBytes[++nIdx] - 128 << 24) + (aBytes[++nIdx] - 128 << 18) + (aBytes[++nIdx] - 128 << 12) + (aBytes[++nIdx] - 128 << 6) + aBytes[++nIdx] - 128\r\n      : nPart > 247 && nPart < 252 && nIdx + 4 < nLen ? /* five bytes */\r\n        (nPart - 248 << 24) + (aBytes[++nIdx] - 128 << 18) + (aBytes[++nIdx] - 128 << 12) + (aBytes[++nIdx] - 128 << 6) + aBytes[++nIdx] - 128\r\n      : nPart > 239 && nPart < 248 && nIdx + 3 < nLen ? /* four bytes */\r\n        (nPart - 240 << 18) + (aBytes[++nIdx] - 128 << 12) + (aBytes[++nIdx] - 128 << 6) + aBytes[++nIdx] - 128\r\n      : nPart > 223 && nPart < 240 && nIdx + 2 < nLen ? /* three bytes */\r\n        (nPart - 224 << 12) + (aBytes[++nIdx] - 128 << 6) + aBytes[++nIdx] - 128\r\n      : nPart > 191 && nPart < 224 && nIdx + 1 < nLen ? /* two bytes */\r\n        (nPart - 192 << 6) + aBytes[++nIdx] - 128\r\n      : /* nPart < 127 ? */ /* one byte */\r\n        nPart\r\n    )\r\n  }\r\n  return sView\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} sDOMStr \r\n * @returns \r\n */\r\nexport const strToUTF8Arr = (sDOMStr) => {\r\n\r\n  var aBytes, nChr, nStrLen = sDOMStr.length, nArrLen = 0\r\n\r\n  /* mapping... */\r\n\r\n  for (var nMapIdx = 0; nMapIdx < nStrLen; nMapIdx++) \r\n  {\r\n    nChr = sDOMStr.codePointAt(nMapIdx)\r\n\r\n    if (nChr > 65536) {\r\n      nMapIdx++\r\n    }\r\n\r\n    nArrLen += nChr < 0x80 ? 1 : nChr < 0x800 ? 2 : nChr < 0x10000 ? 3 : nChr < 0x200000 ? 4 : nChr < 0x4000000 ? 5 : 6\r\n  }\r\n\r\n  aBytes = new Uint8Array(nArrLen)\r\n\r\n  /* transcription... */\r\n  for (var nIdx = 0, nChrIdx = 0; nIdx < nArrLen; nChrIdx++) \r\n  {\r\n    nChr = sDOMStr.codePointAt(nChrIdx)\r\n    if (nChr < 128) {\r\n      /* one byte */\r\n      aBytes[nIdx++] = nChr\r\n    } else if (nChr < 0x800) {\r\n      /* two bytes */\r\n      aBytes[nIdx++] = 192 + (nChr >>> 6)\r\n      aBytes[nIdx++] = 128 + (nChr & 63)\r\n    } else if (nChr < 0x10000) {\r\n      /* three bytes */\r\n      aBytes[nIdx++] = 224 + (nChr >>> 12)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 6 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr & 63)\r\n    } else if (nChr < 0x200000) {\r\n      /* four bytes */\r\n      aBytes[nIdx++] = 240 + (nChr >>> 18)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 12 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 6 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr & 63);\r\n      nChrIdx++\r\n    } else if (nChr < 0x4000000) {\r\n      /* five bytes */\r\n      aBytes[nIdx++] = 248 + (nChr >>> 24)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 18 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 12 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 6 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr & 63)\r\n      nChrIdx++\r\n    } else /* if (nChr <= 0x7fffffff) */ {\r\n      /* six bytes */\r\n      aBytes[nIdx++] = 252 + (nChr >>> 30)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 24 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 18 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 12 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr >>> 6 & 63)\r\n      aBytes[nIdx++] = 128 + (nChr & 63)\r\n      nChrIdx++\r\n    }\r\n  }\r\n  return aBytes\r\n}\r\n\r\n\r\nexport const toBytes = (number, byteCount) => {\r\n\tconst bytes = new Array(byteCount)\r\n\tfor (let i = byteCount - 1; i >= 0; i--) \r\n\t{\r\n\t\tbytes[i] = number & 255\r\n\t\tnumber >>= 8\r\n\t}\r\n\treturn bytes\r\n}\r\n\r\nexport const toVarLenBytes = (number) => {\r\n\tconst bytes = []\r\n\tlet last = true\r\n\tdo {\r\n\t\tconst partial_value = number & 127\r\n\t\tnumber >>= 7\r\n\t\tif (last) {\r\n\t\t\t// first bit is off for last byte\r\n\t\t\tbytes.unshift(partial_value)\r\n\t\t\tlast = false\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// set first bit on for all other bytes\r\n\t\t\tbytes.unshift(partial_value | 128)\r\n\t\t}\r\n\t} while (number > 0)\r\n\treturn bytes\r\n}\r\n\r\n\r\n/* Array of bytes to Base64 string decoding */\r\n\r\n// export const b64ToUint6 = (nChr) => {\r\n// \treturn nChr > 64 && nChr < 91 ?\r\n// \t\tnChr - 65\r\n// \t  : nChr > 96 && nChr < 123 ?\r\n// \t\tnChr - 71\r\n// \t  : nChr > 47 && nChr < 58 ?\r\n// \t\tnChr + 4\r\n// \t  : nChr === 43 ?\r\n// \t\t62\r\n// \t  : nChr === 47 ?\r\n// \t\t63\r\n// \t  :\r\n// \t\t0;\r\n//   }  \r\n\r\n/**\r\n * \r\nconst a2b = (a) => {\r\n\tlet b, c, d, e = {}, f = 0, g = 0, h = \"\", i = String.fromCharCode, j = a.length\r\n\tfor (b = 0; 64 > b; b++){\r\n\t\te[\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(b)] = b\r\n\t}\r\n\tfor (c = 0; j > c; c++){\r\n\t\tfor (b = e[a.charAt(c)], f = (f << 6) + b, g += 6; g >= 8; ) {\r\n\t\t\t((d = 255 & f >>> (g -= 8)) || j - 2 > c) && (h += i(d))\r\n\t\t}\r\n\t}\r\n\treturn h\r\n}\r\n */"],"names":[],"version":3,"file":"midi-file-load.worker.7c310859.js.map","sourceRoot":"/__parcel_source_root/"}