!function(t,e,n,i,r){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof o.parcelRequireaaed&&o.parcelRequireaaed,s=a.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(e,n){if(!s[e]){if(!t[e]){var i="function"==typeof o.parcelRequireaaed&&o.parcelRequireaaed;if(!n&&i)return i(e,!0);if(a)return a(e,!0);if(u&&"string"==typeof e)return u(e);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}c.resolve=function(n){var i=t[e][1][n];return null!=i?i:n},c.cache={};var h=s[e]=new l.Module(e);t[e][0].call(h.exports,c,h,h.exports,this)}return s[e].exports;function c(t){var e=c.resolve(t);return!1===e?{}:l(e)}}l.isParcelRequire=!0,l.Module=function(t){this.id=t,this.bundle=l,this.exports={}},l.modules=t,l.cache=s,l.parent=a,l.register=function(e,n){t[e]=[function(t,e){e.exports=n},{}]},Object.defineProperty(l,"root",{get:function(){return o.parcelRequireaaed}}),o.parcelRequireaaed=l;for(var h=0;h<e.length;h++)l(e[h])}({"4Cz1G":[function(t,e,n){var i=t("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"loadBodyModel",(()=>a));t("@tensorflow/tfjs-backend-webgl");var r=t("@tensorflow-models/pose-detection"),o=(t("../maths/maths"),t("@tensorflow/tfjs"));const a=async(t,e)=>{await o.ready();const n=e.maxFaces,i=await r.createDetector(r.SupportedModels.MoveNet),a=async(e,r,o=null)=>{if(!o||o()){const e=await i.estimatePoses(t),o=Math.min(n,e.length);r(e.length?e.slice(0,o):[])}e&&requestAnimationFrame((()=>a(e,r,o)))};return a}},{"@tensorflow/tfjs-backend-webgl":"evSKx","@tensorflow-models/pose-detection":"fOlxg","../maths/maths":"iDBHd","@tensorflow/tfjs":"foAaF","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],fOlxg:[function(t,e,n){var i=t("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(n),i.export(n,"SupportedModels",(()=>Ft)),i.export(n,"TrackerType",(()=>At)),i.export(n,"calculators",(()=>Ae)),i.export(n,"createDetector",(()=>Ee)),i.export(n,"movenet",(()=>Fe)),i.export(n,"util",(()=>Ct));
/**
    * @license
    * Copyright 2022 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */
var r=t("@mediapipe/pose"),o=t("@tensorflow/tfjs-core"),a=t("@tensorflow/tfjs-converter"),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l=function(){return(l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function h(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))}function c(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}var p=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],d=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],g={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},m={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},y=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],v=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]];function w(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function b(t){return h(this,void 0,void 0,(function(){var e,n;return c(this,(function(i){switch(i.label){case 0:return e=document.createElement("canvas"),t instanceof o.Tensor?[4,o.browser.toPixels(t,e)]:[3,2];case 1:return i.sent(),[3,3];case 2:e.width=w(t.width),e.height=w(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),i.label=3;case 3:return[2,e]}}))}))}function x(t){return h(this,void 0,void 0,(function(){var e,n,i,r,a,s;return c(this,(function(u){switch(u.label){case 0:return t instanceof o.Tensor?(e=t.shape.slice(0,2),n=e[0],i=e[1],r=ImageData.bind,[4,o.browser.toPixels(t)]):[3,2];case 1:return[2,new(r.apply(ImageData,[void 0,u.sent(),i,n]))];case 2:return a=document.createElement("canvas"),s=a.getContext("2d"),a.width=w(t.width),a.height=w(t.height),s.drawImage(t,0,0),[2,s.getImageData(0,0,a.width,a.height)]}}))}))}function k(t){return h(this,void 0,void 0,(function(){var e,n;return c(this,(function(i){switch(i.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,b(t)]:[3,2];case 1:return n=i.sent(),[3,3];case 2:n=t,i.label=3;case 3:return e=n,[2,o.browser.fromPixels(e,4)]}}))}))}function T(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got "+t);if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got "+t)}var M={runtime:"mediapipe",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,modelType:"full"},S=function(){function t(t){this.mask=t}return t.prototype.toCanvasImageSource=function(){return h(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.mask]}))}))},t.prototype.toImageData=function(){return h(this,void 0,void 0,(function(){return c(this,(function(t){return[2,x(this.mask)]}))}))},t.prototype.toTensor=function(){return h(this,void 0,void 0,(function(){return c(this,(function(t){return[2,k(this.mask)]}))}))},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t}();function _(t){return T(t),"person"}var E=function(){function t(t){var e,n=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new r.Pose({locateFile:function(e,n){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+e:n+"/"+e}}),t.modelType){case"lite":e=0;break;case"heavy":e=2;break;default:e=1}this.poseSolution.setOptions({modelComplexity:e,smoothLandmarks:t.enableSmoothing,enableSegmentation:t.enableSegmentation,smoothSegmentation:t.smoothSegmentation,selfieMode:this.selfieMode}),this.poseSolution.onResults((function(t){if(n.height=t.image.height,n.width=t.image.width,null==t.poseLandmarks)n.poses=[];else{var e=n.translateOutput(t.poseLandmarks,t.poseWorldLandmarks);t.segmentationMask&&(e.segmentation={maskValueToLabel:_,mask:new S(t.segmentationMask)}),n.poses=[e]}}))}return t.prototype.translateOutput=function(t,e){var n=this,i={keypoints:t.map((function(t,e){return{x:t.x*n.width,y:t.y*n.height,z:t.z,score:t.visibility,name:d[e]}}))};return null!=e&&(i.keypoints3D=e.map((function(t,e){return{x:t.x,y:t.y,z:t.z,score:t.visibility,name:d[e]}}))),i},t.prototype.estimatePoses=function(t,e,n){return h(this,void 0,void 0,(function(){var i,r;return c(this,(function(a){switch(a.label){case 0:return e&&e.flipHorizontal&&e.flipHorizontal!==this.selfieMode&&(this.selfieMode=e.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),t instanceof o.Tensor?(r=ImageData.bind,[4,o.browser.toPixels(t)]):[3,2];case 1:return i=new(r.apply(ImageData,[void 0,a.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:i=t,a.label=3;case 3:return t=i,[4,this.poseSolution.send({image:t},n)];case 4:return a.sent(),[2,this.poses]}}))}))},t.prototype.dispose=function(){this.poseSolution.close()},t.prototype.reset=function(){this.poseSolution.reset()},t.prototype.initialize=function(){return this.poseSolution.initialize()},t}();function A(t){return h(this,void 0,void 0,(function(){var e,n;return c(this,(function(i){switch(i.label){case 0:return e=function(t){if(null==t)return l({},M);var e=l({},t);return e.runtime="mediapipe",null==e.enableSegmentation&&(e.enableSegmentation=M.enableSegmentation),null==e.enableSmoothing&&(e.enableSmoothing=M.enableSmoothing),null==e.smoothSegmentation&&(e.smoothSegmentation=M.smoothSegmentation),null==e.modelType&&(e.modelType=M.modelType),e}(t),[4,(n=new E(e)).initialize()];case 1:return i.sent(),[2,n]}}))}))}function F(t){return t instanceof o.Tensor?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function P(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function O(t){return t instanceof o.Tensor?t:o.browser.fromPixels(t)}function R(t,e,n){return I(n,"inputResolution"),[1/n.width*t[0][0]*e.width,1/n.height*t[0][1]*e.width,t[0][3]*e.width,1/n.width*t[1][0]*e.height,1/n.height*t[1][1]*e.height,t[1][3]*e.height,0,0]}function I(t,e){o.util.assert(0!==t.width,(function(){return e+" width cannot be 0."})),o.util.assert(0!==t.height,(function(){return e+" height cannot be 0."}))}function L(t,e,n){var i=n.rotationVectorStartKeypointIndex,r=n.rotationVectorEndKeypointIndex,o=t.locationData,a=o.relativeKeypoints[i].x*e.width,s=o.relativeKeypoints[i].y*e.height,u=o.relativeKeypoints[r].x*e.width,l=o.relativeKeypoints[r].y*e.height,h=2*Math.sqrt((u-a)*(u-a)+(l-s)*(l-s)),c=function(t,e,n){var i,r=t.locationData,o=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex;i=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=r.relativeKeypoints[o].x*e.width,u=r.relativeKeypoints[o].y*e.height,l=r.relativeKeypoints[a].x*e.width,h=r.relativeKeypoints[a].y*e.height;return P(i-Math.atan2(-(h-u),l-s))}(t,e,n);return{xCenter:a/e.width,yCenter:s/e.height,width:h/e.width,height:h/e.height,rotation:c}}function C(t){if(16!==t.length)throw new Error("Array length must be 16 but got "+t.length);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}function j(t,e,n,i,r,o,a){return t[e][r]*(t[n][o]*t[i][a]-t[n][a]*t[i][o])}function N(t,e,n){var i=(e+1)%4,r=(e+2)%4,o=(e+3)%4,a=(n+1)%4,s=(n+2)%4,u=(n+3)%4;return j(t,i,r,o,a,s,u)+j(t,r,o,i,a,s,u)+j(t,o,i,r,a,s,u)}function z(t,e,n){void 0===n&&(n={ignoreRotation:!1});for(var i=[],r=0,o=t;r<o.length;r++){var a=o[r],s=a.x-.5,u=a.y-.5,h=n.ignoreRotation?0:e.rotation,c=Math.cos(h)*s-Math.sin(h)*u,f=Math.sin(h)*s+Math.cos(h)*u;c=c*e.width+e.xCenter,f=f*e.height+e.yCenter;var p=a.z*e.width,d=l({},a);d.x=c,d.y=f,d.z=p,i.push(d)}return i}function B(t,e){var n,i,r,a=(n=e[0],i=e[1],{scale:r=(i-n)/255,offset:n-0*r});return o.tidy((function(){return o.add(o.mul(t,a.scale),a.offset)}))}function D(t,e,n){var i,r,a,s,u,l,h,c,f,p,d,g,m,y,v=e.outputTensorSize,w=e.keepAspectRatio,b=e.borderMode,x=e.outputTensorFloatRange,k=F(t),T=(m=k,(y=n)?{xCenter:y.xCenter*m.width,yCenter:y.yCenter*m.height,width:y.width*m.width,height:y.height*m.height,rotation:y.rotation}:{xCenter:.5*m.width,yCenter:.5*m.height,width:m.width,height:m.height,rotation:0}),M=function(t,e,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var i=e.height,r=e.width;I(e,"targetSize"),I(t,"roi");var o,a,s=i/r,u=t.height/t.width,l=0,h=0;return s>u?(o=t.width,a=t.width*s,h=(1-u/s)/2):(o=t.height/s,a=t.height,l=(1-s/u)/2),t.width=o,t.height=a,{top:h,left:l,right:l,bottom:h}}(T,v,w),S=(i=T,r=k.width,a=k.height,!1,s=i.width,u=i.height,1,l=Math.cos(i.rotation),h=Math.sin(i.rotation),c=i.xCenter,f=i.yCenter,p=1/r,d=1/a,(g=new Array(16))[0]=s*l*1*p,g[1]=-u*h*p,g[2]=0,g[3]=(-.5*s*l*1+.5*u*h+c)*p,g[4]=s*h*1*d,g[5]=u*l*d,g[6]=0,g[7]=(-.5*u*l-.5*s*h*1+f)*d,g[8]=0,g[9]=0,g[10]=s*p,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,C(g));return{imageTensor:o.tidy((function(){var e=O(t),n=o.tensor2d(R(S,k,v),[1,8]),i="zero"===b?"constant":"nearest",r=o.image.transform(o.expandDims(o.cast(e,"float32")),n,"bilinear",i,0,[v.height,v.width]);return null!=x?B(r,x):r})),padding:M,transformationMatrix:S}}function U(t,e,n,i){return 1===i?.5*(t+e):t+(e-t)*n/(i-1)}function H(t){return null!=t&&null!=t.currentTime}function V(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=0;a<t.length;++a){var s=t[a];n=Math.min(n,s.x),i=Math.max(i,s.x),r=Math.min(r,s.y),o=Math.max(o,s.y),e.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:r,xMax:i,yMax:o,width:i-n,height:o-r},e}function G(t,e,n,i){return h(this,void 0,void 0,(function(){var i,r,a,s,u;return c(this,(function(l){switch(l.label){case 0:return t.sort((function(t,e){return Math.max.apply(Math,e.score)-Math.max.apply(Math,t.score)})),i=o.tensor2d(t.map((function(t){return[t.locationData.relativeBoundingBox.yMin,t.locationData.relativeBoundingBox.xMin,t.locationData.relativeBoundingBox.yMax,t.locationData.relativeBoundingBox.xMax]}))),r=o.tensor1d(t.map((function(t){return t.score[0]}))),[4,o.image.nonMaxSuppressionAsync(i,r,e,n)];case 1:return[4,(a=l.sent()).array()];case 2:return s=l.sent(),u=t.filter((function(t,e){return s.indexOf(e)>-1})),o.dispose([i,r,a]),[2,u]}}))}))}function K(t,e){return t.map((function(t){var n=l(l({},t),{x:t.x*e.width,y:t.y*e.height});return null!=t.z&&(n.z=t.z*e.width),n}))}function q(t,e,n){return h(this,void 0,void 0,(function(){var i,r,a,s,u,h,f,p,d,g,m,y,v,w,b,x,k,T,M,S,_,E,A,F;return c(this,(function(c){switch(c.label){case 0:if(i=o.squeeze(e,[0]),r=i.shape,a=r[0],s=r[1],u=r[2],t.length!==u)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+t.length+", heatmap length: "+u);return h=[],[4,i.buffer()];case 1:for(f=c.sent(),p=0;p<t.length;p++)if(d=t[p],g=l({},d),h.push(g),m=Math.trunc(g.x*s),y=Math.trunc(g.y*a),!(m<0||m>=s||y<0||m>=a)){for(v=Math.trunc((n.kernelSize-1)/2),w=Math.max(0,m-v),b=Math.min(s,m+v+1),x=Math.max(0,y-v),k=Math.min(a,y+v+1),T=0,M=0,S=0,_=0,E=x;E<k;++E)for(A=w;A<b;++A)F=f.get(E,A,p),T+=F,_=Math.max(_,F),M+=A*F,S+=E*F;_>=n.minConfidenceToRefine&&T>0&&(g.x=M/s/T,g.y=S/a/T)}return i.dispose(),[2,h]}}))}))}function Y(t,e){var n=e.left,i=e.top,r=e.left+e.right,o=e.top+e.bottom;return t.map((function(t){return l(l({},t),{x:(t.x-n)/(1-r),y:(t.y-i)/(1-o),z:t.z/(1-r)})}))}function W(t,e,n){return h(this,void 0,void 0,(function(){var i,r,a,s,u;return c(this,(function(l){switch(l.label){case 0:return i=t[0],r=t[1],h=r,c=e,f=n,a=o.tidy((function(){var t,e,n,i;f.reverseOutputOrder?(e=o.squeeze(o.slice(h,[0,f.boxCoordOffset+0],[-1,1])),t=o.squeeze(o.slice(h,[0,f.boxCoordOffset+1],[-1,1])),i=o.squeeze(o.slice(h,[0,f.boxCoordOffset+2],[-1,1])),n=o.squeeze(o.slice(h,[0,f.boxCoordOffset+3],[-1,1]))):(t=o.squeeze(o.slice(h,[0,f.boxCoordOffset+0],[-1,1])),e=o.squeeze(o.slice(h,[0,f.boxCoordOffset+1],[-1,1])),n=o.squeeze(o.slice(h,[0,f.boxCoordOffset+2],[-1,1])),i=o.squeeze(o.slice(h,[0,f.boxCoordOffset+3],[-1,1]))),e=o.add(o.mul(o.div(e,f.xScale),c.w),c.x),t=o.add(o.mul(o.div(t,f.yScale),c.h),c.y),f.applyExponentialOnBoxSize?(n=o.mul(o.exp(o.div(n,f.hScale)),c.h),i=o.mul(o.exp(o.div(i,f.wScale)),c.w)):(n=o.mul(o.div(n,f.hScale),c.h),i=o.mul(o.div(i,f.wScale),c.h));var r=o.sub(t,o.div(n,2)),a=o.sub(e,o.div(i,2)),s=o.add(t,o.div(n,2)),u=o.add(e,o.div(i,2)),l=o.concat([o.reshape(r,[f.numBoxes,1]),o.reshape(a,[f.numBoxes,1]),o.reshape(s,[f.numBoxes,1]),o.reshape(u,[f.numBoxes,1])],1);if(f.numKeypoints)for(var p=0;p<f.numKeypoints;++p){var d=f.keypointCoordOffset+p*f.numValuesPerKeypoint,g=void 0,m=void 0;f.reverseOutputOrder?(g=o.squeeze(o.slice(h,[0,d],[-1,1])),m=o.squeeze(o.slice(h,[0,d+1],[-1,1]))):(m=o.squeeze(o.slice(h,[0,d],[-1,1])),g=o.squeeze(o.slice(h,[0,d+1],[-1,1])));var y=o.add(o.mul(o.div(g,f.xScale),c.w),c.x),v=o.add(o.mul(o.div(m,f.yScale),c.h),c.y);l=o.concat([l,o.reshape(y,[f.numBoxes,1]),o.reshape(v,[f.numBoxes,1])],1)}return l})),s=o.tidy((function(){var t=i;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(t=o.clipByValue(i,-n.scoreClippingThresh,n.scoreClippingThresh)),t=o.sigmoid(t)):t})),[4,X(a,s,n)];case 1:return u=l.sent(),o.dispose([a,s]),[2,u]}var h,c,f}))}))}function X(t,e,n){return h(this,void 0,void 0,(function(){var i,r,o,a,s,u,l,h,f,p,d,g;return c(this,(function(c){switch(c.label){case 0:return i=[],[4,t.data()];case 1:return r=c.sent(),[4,e.data()];case 2:for(o=c.sent(),a=0;a<n.numBoxes;++a)if(!(null!=n.minScoreThresh&&o[a]<n.minScoreThresh||(s=a*n.numCoords,u=Q(r[s+0],r[s+1],r[s+2],r[s+3],o[a],n.flipVertically,a),(l=u.locationData.relativeBoundingBox).width<0||l.height<0))){if(n.numKeypoints>0)for((h=u.locationData).relativeKeypoints=[],f=n.numKeypoints*n.numValuesPerKeypoint,p=0;p<f;p+=n.numValuesPerKeypoint)d=s+n.keypointCoordOffset+p,g={x:r[d+0],y:n.flipVertically?1-r[d+1]:r[d+1]},h.relativeKeypoints.push(g);i.push(u)}return[2,i]}}))}))}function Q(t,e,n,i,r,o,a){return{score:[r],ind:a,locationData:{relativeBoundingBox:{xMin:e,yMin:o?1-n:t,xMax:i,yMax:o?1-t:n,width:i-e,height:n-t}}}}function J(t,e){return"none"===t?e:(n=e,1/(1+Math.exp(-n)));var n}function Z(t,e,n,i){return h(this,void 0,void 0,(function(){var r,o,a,s,u,l,h,f;return c(this,(function(c){switch(c.label){case 0:return n=n||e.flipHorizontally||!1,i=i||e.flipVertically||!1,r=t.size,o=r/e.numLandmarks,[4,t.data()];case 1:for(a=c.sent(),s=[],u=0;u<e.numLandmarks;++u)l=u*o,(f={x:0,y:0}).x=n?e.inputImageWidth-a[l]:a[l],o>1&&(f.y=i?e.inputImageHeight-a[l+1]:a[l+1]),o>2&&(f.z=a[l+2]),o>3&&(f.score=J(e.visibilityActivation,a[l+3])),s.push(f);for(h=0;h<s.length;++h)(f=s[h]).x=f.x/e.inputImageWidth,f.y=f.y/e.inputImageHeight,f.z=f.z/e.inputImageWidth/(e.normalizeZ||1);return[2,s]}}))}))}function $(t,e,n){var i,r,o=t.width,a=t.height,s=t.rotation;if(null==n.rotation&&null==n.rotationDegree||(i=s,null!=(r=n).rotation?i+=r.rotation:null!=r.rotationDegree&&(i+=Math.PI*r.rotationDegree/180),s=P(i)),0===s)t.xCenter=t.xCenter+o*n.shiftX,t.yCenter=t.yCenter+a*n.shiftY;else{var u=(e.width*o*n.shiftX*Math.cos(s)-e.height*a*n.shiftY*Math.sin(s))/e.width,l=(e.width*o*n.shiftX*Math.sin(s)+e.height*a*n.shiftY*Math.cos(s))/e.height;t.xCenter=t.xCenter+u,t.yCenter=t.yCenter+l}if(n.squareLong){var h=Math.max(o*e.width,a*e.height);o=h/e.width,a=h/e.height}else if(n.squareShort){var c=Math.min(o*e.width,a*e.height);o=c/e.width,a=c/e.height}return t.width=o*n.scaleX,t.height=a*n.scaleY,t}function tt(t,e){return t.map((function(t){var n=l(l({},t),{x:t.x/e.width,y:t.y/e.height});return null!=t.z&&(t.z=t.z/e.width),n}))}var et=function(){function t(t){this.alpha=t,this.initialized=!1}return t.prototype.apply=function(t,e){var n;return this.initialized?n=null==e?this.storedValue+this.alpha*(t-this.storedValue):this.storedValue+this.alpha*e*Math.asinh((t-this.storedValue)/e):(n=t,this.initialized=!0),this.rawValue=t,this.storedValue=n,n},t.prototype.applyWithAlpha=function(t,e,n){return this.alpha=e,this.apply(t,n)},t.prototype.hasLastRawValue=function(){return this.initialized},t.prototype.lastRawValue=function(){return this.rawValue},t.prototype.reset=function(){this.initialized=!1},t}(),nt=function(){function t(t){this.frequency=t.frequency,this.minCutOff=t.minCutOff,this.beta=t.beta,this.thresholdCutOff=t.thresholdCutOff,this.thresholdBeta=t.thresholdBeta,this.derivateCutOff=t.derivateCutOff,this.x=new et(this.getAlpha(this.minCutOff)),this.dx=new et(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return t.prototype.apply=function(t,e,n){if(null==t)return t;var i=Math.trunc(e);if(this.lastTimestamp>=i)return t;0!==this.lastTimestamp&&0!==i&&(this.frequency=1/(1e-6*(i-this.lastTimestamp))),this.lastTimestamp=i;var r=this.x.hasLastRawValue()?(t-this.x.lastRawValue())*n*this.frequency:0,o=this.dx.applyWithAlpha(r,this.getAlpha(this.derivateCutOff)),a=this.minCutOff+this.beta*Math.abs(o),s=null!=this.thresholdCutOff?this.thresholdCutOff+this.thresholdBeta*Math.abs(o):null;return this.x.applyWithAlpha(t,this.getAlpha(a),s)},t.prototype.getAlpha=function(t){return 1/(1+this.frequency/(2*Math.PI*t))},t}(),it=function(){function t(t){this.config=t}return t.prototype.apply=function(t,e,n){var i=this;if(null==t)return this.reset(),null;this.initializeFiltersIfEmpty(t);var r=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return f(t);r=1/n}return t.map((function(t,n){var o=l(l({},t),{x:i.xFilters[n].apply(t.x,e,r),y:i.yFilters[n].apply(t.y,e,r)});return null!=t.z&&(o.z=i.zFilters[n].apply(t.z,e,r)),o}))},t.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},t.prototype.initializeFiltersIfEmpty=function(t){var e=this;null!=this.xFilters&&this.xFilters.length===t.length||(this.xFilters=t.map((function(t){return new nt(e.config)})),this.yFilters=t.map((function(t){return new nt(e.config)})),this.zFilters=t.map((function(t){return new nt(e.config)})))},t}(),rt=function(){function t(t){this.config=t,this.window=[],this.lowPassFilter=new et(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return t.prototype.apply=function(t,e,n){if(null==t)return t;var i,r=Math.trunc(e);if(this.lastTimestamp>=r)return t;if(-1===this.lastTimestamp)i=1;else{for(var o=t*n-this.lastValue*this.lastValueScale,a=r-this.lastTimestamp,s=o,u=a,l=(1+this.window.length)*(1e6/30),h=0,c=this.window;h<c.length;h++){var f=c[h];if(u+f.duration>l)break;s+=f.distance,u+=f.duration}var p=s/(1e-6*u);i=1-1/(1+this.config.velocityScale*Math.abs(p)),this.window.unshift({distance:o,duration:a}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=t,this.lastValueScale=n,this.lastTimestamp=r,this.lowPassFilter.applyWithAlpha(t,i)},t}(),ot=function(){function t(t){this.config=t}return t.prototype.apply=function(t,e,n){var i=this;if(null==t)return this.reset(),null;var r=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return f(t);r=1/n}return this.initializeFiltersIfEmpty(t),t.map((function(t,n){var o=l(l({},t),{x:i.xFilters[n].apply(t.x,e,r),y:i.yFilters[n].apply(t.y,e,r)});return null!=t.z&&(o.z=i.zFilters[n].apply(t.z,e,r)),o}))},t.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},t.prototype.initializeFiltersIfEmpty=function(t){var e=this;null!=this.xFilters&&this.xFilters.length===t.length||(this.xFilters=t.map((function(t){return new rt(e.config)})),this.yFilters=t.map((function(t){return new rt(e.config)})),this.zFilters=t.map((function(t){return new rt(e.config)})))},t}(),at=function(){function t(t){if(null!=t.velocityFilter)this.keypointsFilter=new ot(t.velocityFilter);else{if(null==t.oneEuroFilter)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+t+".");this.keypointsFilter=new it(t.oneEuroFilter)}}return t.prototype.apply=function(t,e,n,i,r){if(void 0===i&&(i=!1),null==t)return this.keypointsFilter.reset(),null;var o,a,s=null!=r?(a=n,((o=r).width*a.width+o.height*a.height)/2):1,u=i?K(t,n):t,l=this.keypointsFilter.apply(u,e,s);return i?tt(l,n):l},t}(),st=function(){function t(t){this.alpha=t.alpha}return t.prototype.apply=function(t){var e=this;if(null==t)return this.visibilityFilters=null,null;null!=this.visibilityFilters&&this.visibilityFilters.length===t.length||(this.visibilityFilters=t.map((function(t){return new et(e.alpha)})));for(var n=[],i=0;i<t.length;++i){var r=t[i],o=l({},r);o.score=this.visibilityFilters[i].apply(r.score),n.push(o)}return n},t}(),ut={reduceBoxesInLowestlayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},lt={runtime:"tfjs",modelType:"full",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"},ht={maxPoses:1,flipHorizontal:!1},ct={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},ft={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25,squareLong:!0},pt={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},dt={outputTensorSize:{width:256,height:256},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},gt={numLandmarks:39,inputImageWidth:256,inputImageHeight:256,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},mt={numLandmarks:39,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},yt={kernelSize:7,minConfidenceToRefine:.5},vt={alpha:.1},wt={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},bt={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},xt={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},kt={activation:"none"},Tt={combineWithPreviousRatio:.7},Mt=function(){function t(t){this.mask=t}return t.prototype.toCanvasImageSource=function(){return h(this,void 0,void 0,(function(){return c(this,(function(t){return[2,b(this.mask)]}))}))},t.prototype.toImageData=function(){return h(this,void 0,void 0,(function(){return c(this,(function(t){return[2,x(this.mask)]}))}))},t.prototype.toTensor=function(){return h(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.mask]}))}))},t.prototype.getUnderlyingType=function(){return"tensor"},t}();function St(t){return T(t),"person"}var _t=function(){function t(t,e,n,i,r,a){this.detectorModel=t,this.landmarkModel=e,this.enableSmoothing=n,this.enableSegmentation=i,this.smoothSegmentation=r,this.modelType=a,this.regionOfInterest=null,this.prevFilteredSegmentationMask=null,this.anchors=function(t){null==t.reduceBoxesInLowestLayer&&(t.reduceBoxesInLowestLayer=!1),null==t.interpolatedScaleAspectRatio&&(t.interpolatedScaleAspectRatio=1),null==t.fixedAnchorSize&&(t.fixedAnchorSize=!1);for(var e=[],n=0;n<t.numLayers;){for(var i=[],r=[],o=[],a=[],s=n;s<t.strides.length&&t.strides[s]===t.strides[n];){var u=U(t.minScale,t.maxScale,s,t.strides.length);if(0===s&&t.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),a.push(.1),a.push(u),a.push(u);else{for(var l=0;l<t.aspectRatios.length;++l)o.push(t.aspectRatios[l]),a.push(u);if(t.interpolatedScaleAspectRatio>0){var h=s===t.strides.length-1?1:U(t.minScale,t.maxScale,s+1,t.strides.length);a.push(Math.sqrt(u*h)),o.push(t.interpolatedScaleAspectRatio)}}s++}for(var c=0;c<o.length;++c){var f=Math.sqrt(o[c]);i.push(a[c]/f),r.push(a[c]*f)}var p=0,d=0;if(t.featureMapHeight.length>0)p=t.featureMapHeight[n],d=t.featureMapWidth[n];else{var g=t.strides[n];p=Math.ceil(t.inputSizeHeight/g),d=Math.ceil(t.inputSizeWidth/g)}for(var m=0;m<p;++m)for(var y=0;y<d;++y)for(var v=0;v<i.length;++v){var w={xCenter:(y+t.anchorOffsetX)/d,yCenter:(m+t.anchorOffsetY)/p,width:0,height:0};t.fixedAnchorSize?(w.width=1,w.height=1):(w.width=r[v],w.height=i[v]),e.push(w)}n=s}return e}(ut);var s=o.tensor1d(this.anchors.map((function(t){return t.width}))),u=o.tensor1d(this.anchors.map((function(t){return t.height}))),l=o.tensor1d(this.anchors.map((function(t){return t.xCenter}))),h=o.tensor1d(this.anchors.map((function(t){return t.yCenter})));this.anchorTensor={x:l,y:h,w:s,h:u},this.prevFilteredSegmentationMask=this.enableSegmentation?o.tensor2d([],[0,0]):null}return t.prototype.estimatePoses=function(t,e,n){return h(this,void 0,void 0,(function(){var i,r,a,s,u,h,f,p,g,m,y,v,w,b,x,k,T,M,S,_,E,A,P;return c(this,(function(c){switch(c.label){case 0:return i=function(t){var e;if(null==(e=null==t?ht:l({},t)).maxPoses&&(e.maxPoses=1),e.maxPoses<=0)throw new Error("Invalid maxPoses "+e.maxPoses+". Should be > 0.");if(e.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return e}(e),null==t?(this.reset(),[2,[]]):(this.maxPoses=i.maxPoses,this.timestamp=null!=n?1e3*n:H(t)?1e6*t.currentTime:null,r=F(t),a=o.tidy((function(){return o.cast(O(t),"float32")})),null!=(s=this.regionOfInterest)?[3,2]:[4,this.detectPose(a)]);case 1:if(0===(u=c.sent()).length)return this.reset(),a.dispose(),[2,[]];h=u[0],s=this.poseDetectionToRoi(h,r),c.label=2;case 2:return[4,this.poseLandmarksByRoi(s,a)];case 3:return f=c.sent(),a.dispose(),null==f?(this.reset(),[2,[]]):(p=f.landmarks,g=f.auxiliaryLandmarks,m=f.poseScore,y=f.worldLandmarks,v=f.segmentationMask,w=this.poseLandmarkFiltering(p,g,y,r),b=w.actualLandmarksFiltered,x=w.auxiliaryLandmarksFiltered,k=w.actualWorldLandmarksFiltered,T=this.poseLandmarksToRoi(x,r),this.regionOfInterest=T,M=this.smoothSegmentation&&null!=v?this.poseSegmentationFiltering(v):v,null!=(S=null!=b?K(b,r):null)&&S.forEach((function(t,e){t.name=d[e]})),null!=(_=k)&&_.forEach((function(t,e){t.name=d[e]})),E={score:m,keypoints:S,keypoints3D:_},null!==M&&(A=o.tidy((function(){var t=o.expandDims(M,2),e=o.pad(t,[[0,0],[0,0],[0,1]]);return o.mirrorPad(e,[[0,0],[0,0],[0,2]],"symmetric")})),this.smoothSegmentation||o.dispose(M),P={maskValueToLabel:St,mask:new Mt(A)},E.segmentation=P),[2,[E]])}}))}))},t.prototype.poseSegmentationFiltering=function(t){var e=this.prevFilteredSegmentationMask;return 0===e.size?this.prevFilteredSegmentationMask=t:(this.prevFilteredSegmentationMask=function(t,e,n){return"webgl"===o.getBackend()?(i=t,r=e,a=n.combineWithPreviousRatio.toFixed(2),s={variableNames:["prevMask","newMask"],outputShape:i.shape,userCode:"\n  void main() {\n      ivec2 coords = getOutputCoords();\n      int height = coords[0];\n      int width = coords[1];\n\n      float prevMaskValue = getPrevMask(height, width);\n      float newMaskValue = getNewMask(height, width);\n\n      /*\n      * Assume p := newMaskValue\n      * H(p) := 1 + (p * log(p) + (1-p) * log(1-p)) / log(2)\n      * uncertainty alpha(p) =\n      *   Clamp(1 - (1 - H(p)) * (1 - H(p)), 0, 1) [squaring the\n      * uncertainty]\n      *\n      * The following polynomial approximates uncertainty alpha as a\n      * function of (p + 0.5):\n      */\n      const float c1 = 5.68842;\n      const float c2 = -0.748699;\n      const float c3 = -57.8051;\n      const float c4 = 291.309;\n      const float c5 = -624.717;\n      float t = newMaskValue - 0.5;\n      float x = t * t;\n\n      float uncertainty =\n        1.0 - min(1.0, x * (c1 + x * (c2 + x * (c3 + x * (c4 + x * c5)))));\n\n      float outputValue = newMaskValue + (prevMaskValue - newMaskValue) *\n                             (uncertainty * "+a+");\n\n      setOutput(outputValue);\n    }\n"},u=o.backend(),o.tidy((function(){var t=u.compileAndRun(s,[i,r]);return o.engine().makeTensorFromDataId(t.dataId,t.shape,t.dtype)}))):o.tidy((function(){var i=o.sub(e,.5),r=o.square(i),a=o.sub(1,o.minimum(1,o.mul(r,o.add(5.68842,o.mul(r,o.add(-.748699,o.mul(r,o.add(-57.8051,o.mul(r,o.add(291.309,o.mul(r,-624.717)))))))))));return o.add(e,o.mul(o.sub(t,e),o.mul(a,n.combineWithPreviousRatio)))}));var i,r,a,s,u}(e,t,Tt),o.dispose(t)),o.dispose(e),this.prevFilteredSegmentationMask},t.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),o.dispose([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h,this.prevFilteredSegmentationMask])},t.prototype.reset=function(){this.regionOfInterest=null,this.enableSegmentation&&(o.dispose(this.prevFilteredSegmentationMask),this.prevFilteredSegmentationMask=o.tensor2d([],[0,0])),this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},t.prototype.detectPose=function(t){return h(this,void 0,void 0,(function(){var e,n,i,r,a,s,u,l,h,f;return c(this,(function(c){switch(c.label){case 0:return e=D(t,pt),n=e.imageTensor,i=e.padding,r=this.detectorModel.predict(n),p=r,a=o.tidy((function(){var t,e=(t=p,o.tidy((function(){return[o.slice(t,[0,0,0],[1,-1,1]),o.slice(t,[0,0,1],[1,-1,-1])]}))),n=e[0],i=e[1];return{boxes:o.squeeze(i),logits:o.squeeze(n)}})),s=a.boxes,[4,W([u=a.logits,s],this.anchorTensor,ct)];case 1:return 0===(l=c.sent()).length?(o.dispose([n,r,u,s]),[2,l]):[4,G(l,this.maxPoses,.3)];case 2:return h=c.sent(),f=function(t,e){void 0===t&&(t=[]);for(var n=e.left,i=e.top,r=e.left+e.right,o=e.top+e.bottom,a=0;a<t.length;a++){var s=t[a],u=s.locationData.relativeBoundingBox,l=(u.xMin-n)/(1-r),h=(u.yMin-i)/(1-o),c=u.width/(1-r),f=u.height/(1-o);u.xMin=l,u.yMin=h,u.width=c,u.height=f,u.xMax=l+c,u.yMax=h+f;var p=s.locationData.relativeKeypoints;p&&p.forEach((function(t){var e=(t.x-n)/(1-r),a=(t.y-i)/(1-o);t.x=e,t.y=a}))}return t}(h,i),o.dispose([n,r,u,s]),[2,f]}var p}))}))},t.prototype.poseDetectionToRoi=function(t,e){return $(L(t,e,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),e,ft)},t.prototype.poseLandmarksByRoi=function(t,e){return h(this,void 0,void 0,(function(){var n,i,r,a,s,u,h,f,p,d,g,m,y,v;return c(this,(function(c){switch(c.label){case 0:if(n=F(e),i=D(e,dt,t),r=i.imageTensor,a=i.padding,s=i.transformationMatrix,"lite"!==this.modelType&&"full"!==this.modelType&&"heavy"!==this.modelType)throw new Error("Model type must be one of lite, full or heavy,but got "+this.modelType);return u=["ld_3d","output_poseflag","activation_heatmap","world_3d"],this.enableSegmentation&&u.push("activation_segmentation"),h=this.landmarkModel.execute(r,u),[4,this.tensorsToPoseLandmarksAndSegmentation(h)];case 1:return null==(f=c.sent())?(o.dispose(h),o.dispose(r),[2,null]):(p=f.landmarks,d=f.auxiliaryLandmarks,g=f.poseScore,m=f.worldLandmarks,y=f.segmentationMask,[4,this.poseLandmarksAndSegmentationInverseProjection(n,t,a,s,p,d,m,y)]);case 2:return v=c.sent(),o.dispose(h),o.dispose(r),[2,l({poseScore:g},v)]}}))}))},t.prototype.poseLandmarksAndSegmentationInverseProjection=function(t,e,n,i,r,a,s,u){return h(this,void 0,void 0,(function(){var h,f,p,d,g,m;return c(this,(function(c){return h=Y(r,n),f=Y(a,n),p=z(h,e),d=z(f,e),g=function(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i],a=o.x,s=o.y,u=e.rotation,h=Math.cos(u)*a-Math.sin(u)*s,c=Math.sin(u)*a+Math.cos(u)*s,f=l({},o);f.x=h,f.y=c,n.push(f)}return n}(s,e),m=null,this.enableSegmentation&&(m=o.tidy((function(){var e=u.shape,n=e[0],r=e[1],a=function(t){var e=C(new Array(16).fill(0));e[0][0]=N(t,0,0),e[1][0]=-N(t,0,1),e[2][0]=N(t,0,2),e[3][0]=-N(t,0,3),e[0][2]=N(t,2,0),e[1][2]=-N(t,2,1),e[2][2]=N(t,2,2),e[3][2]=-N(t,2,3),e[0][1]=-N(t,1,0),e[1][1]=N(t,1,1),e[2][1]=-N(t,1,2),e[3][1]=N(t,1,3),e[0][3]=-N(t,3,0),e[1][3]=N(t,3,1),e[2][3]=-N(t,3,2),e[3][3]=N(t,3,3);for(var n=t[0][0]*e[0][0]+t[1][0]*e[0][1]+t[2][0]*e[0][2]+t[3][0]*e[0][3],i=0;i<e.length;i++)for(var r=0;r<e.length;r++)e[i][r]/=n;return e}(i),s=o.tensor2d(R(a,{width:r,height:n},t),[1,8]),l=[1,n,r,1];return o.squeeze(o.image.transform(o.reshape(u,l),s,"bilinear","constant",0,[t.height,t.width]),[0,3])})),o.dispose(u)),[2,{landmarks:p,auxiliaryLandmarks:d,worldLandmarks:g,segmentationMask:m}]}))}))},t.prototype.tensorsToPoseLandmarksAndSegmentation=function(t){return h(this,void 0,void 0,(function(){var e,n,i,r,a,s,u,h,f,p,d,g,m;return c(this,(function(c){switch(c.label){case 0:return e=t[0],n=t[1],i=t[2],r=t[3],a=this.enableSegmentation?t[4]:null,[4,n.data()];case 1:return(s=c.sent()[0])<.5?[2,null]:[4,Z(e,gt)];case 2:return[4,q(c.sent(),i,yt)];case 3:return u=c.sent(),h=u.slice(0,33),f=u.slice(33,35),[4,Z(r,mt)];case 4:return p=c.sent(),d=p.slice(0,33),g=function(t,e,n){void 0===n&&(n=!0);for(var i=[],r=0;r<t.length;r++){var o=l({},e[r]);n&&(o.score=t[r].score),i.push(o)}return i}(h,d,!0),m=this.enableSegmentation?(y=a,v=kt,o.tidy((function(){var t=o.squeeze(y,[0]),e=t.shape[2];if(1===e){var n=t;switch(v.activation){case"none":break;case"sigmoid":n=o.sigmoid(n);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+v.activation+")")}var i=n;return o.squeeze(i,[2])}throw new Error("Unsupported number of tensor channels "+e)}))):null,[2,{landmarks:h,auxiliaryLandmarks:f,poseScore:s,worldLandmarks:g,segmentationMask:m}]}var y,v}))}))},t.prototype.poseLandmarksToRoi=function(t,e){return $(L(V(t),e,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),e,ft)},t.prototype.poseLandmarkFiltering=function(t,e,n,i){var r,o,a;if(null!=this.timestamp&&this.enableSmoothing){var s=L(V(e),i,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});null==this.visibilitySmoothingFilterActual&&(this.visibilitySmoothingFilterActual=new st(vt)),r=this.visibilitySmoothingFilterActual.apply(t),null==this.visibilitySmoothingFilterAuxiliary&&(this.visibilitySmoothingFilterAuxiliary=new st(vt)),o=this.visibilitySmoothingFilterAuxiliary.apply(e),a=this.visibilitySmoothingFilterActual.apply(n),null==this.landmarksSmoothingFilterActual&&(this.landmarksSmoothingFilterActual=new at(wt)),r=this.landmarksSmoothingFilterActual.apply(r,this.timestamp,i,!0,s),null==this.landmarksSmoothingFilterAuxiliary&&(this.landmarksSmoothingFilterAuxiliary=new at(bt)),o=this.landmarksSmoothingFilterAuxiliary.apply(o,this.timestamp,i,!0,s),null==this.worldLandmarksSmoothingFilterActual&&(this.worldLandmarksSmoothingFilterActual=new at(xt)),a=this.worldLandmarksSmoothingFilterActual.apply(n,this.timestamp)}else r=t,o=e,a=n;return{actualLandmarksFiltered:r,auxiliaryLandmarksFiltered:o,actualWorldLandmarksFiltered:a}},t}();function Et(t){return h(this,void 0,void 0,(function(){var e,n,i,r,o,s;return c(this,(function(u){switch(u.label){case 0:return e=function(t){var e=l({},null==t?lt:t);if(null==e.enableSmoothing&&(e.enableSmoothing=lt.enableSmoothing),null==e.enableSegmentation&&(e.enableSegmentation=lt.enableSegmentation),null==e.smoothSegmentation&&(e.smoothSegmentation=lt.smoothSegmentation),null==e.modelType&&(e.modelType=lt.modelType),null==e.detectorModelUrl&&(e.detectorModelUrl=lt.detectorModelUrl),null==e.landmarkModelUrl)switch(e.modelType){case"lite":e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/2";break;case"heavy":e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/2";break;default:e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"}return e}(t),n="string"==typeof e.detectorModelUrl&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,i="string"==typeof e.landmarkModelUrl&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([a.loadGraphModel(e.detectorModelUrl,{fromTFHub:n}),a.loadGraphModel(e.landmarkModelUrl,{fromTFHub:i})])];case 1:return r=u.sent(),o=r[0],s=r[1],[2,new _t(o,s,e.enableSmoothing,e.enableSegmentation,e.smoothSegmentation,e.modelType)]}}))}))}var At,Ft,Pt,Ot=function(){function t(t){!function(t){if(t.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but encountered "+t.maxTracks);if(t.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but encountered "+t.maxAge);if(void 0!==t.keypointTrackerParams){if(t.keypointTrackerParams.keypointConfidenceThreshold<0||t.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+t.keypointTrackerParams.keypointConfidenceThreshold);if(t.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but encountered "+t.keypointTrackerParams.minNumberOfKeypoints);for(var e=0,n=t.keypointTrackerParams.keypointFalloff;e<n.length;e++){var i=n[e];if(i<=0)throw new Error("Must specify each keypoint falloff parameterto be positive but encountered "+i)}}}(t),this.tracks=[],this.maxTracks=t.maxTracks,this.maxAge=1e3*t.maxAge,this.minSimilarity=t.minSimilarity,this.nextID=1}return t.prototype.apply=function(t,e){this.filterOldTracks(e);var n=this.computeSimilarity(t);return this.assignTracks(t,n,e),this.updateTracks(e),t},t.prototype.getTracks=function(){return this.tracks.slice()},t.prototype.getTrackIDs=function(){return new Set(this.tracks.map((function(t){return t.id})))},t.prototype.filterOldTracks=function(t){var e=this;this.tracks=this.tracks.filter((function(n){return t-n.lastTimestamp<=e.maxAge}))},t.prototype.assignTracks=function(t,e,n){for(var i=Array.from(Array(e[0].length).keys()),r=[],o=0,a=Array.from(Array(t.length).keys());o<a.length;o++){var s=a[o];if(0!==i.length){for(var u=-1,l=-1,h=0,c=i;h<c.length;h++){var f=c[h],p=e[s][f];p>=this.minSimilarity&&p>l&&(u=f,l=p)}if(u>=0){var d=this.tracks[u];d=Object.assign(d,this.createTrack(t[s],n,d.id)),t[s].id=d.id;var g=i.indexOf(u);i.splice(g,1)}else r.push(s)}else r.push(s)}for(var m=0,y=r;m<y.length;m++){s=y[m];var v=this.createTrack(t[s],n);this.tracks.push(v),t[s].id=v.id}},t.prototype.updateTracks=function(t){this.tracks.sort((function(t,e){return e.lastTimestamp-t.lastTimestamp})),this.tracks=this.tracks.slice(0,this.maxTracks)},t.prototype.createTrack=function(t,e,n){var i={id:n||this.nextTrackID(),lastTimestamp:e,keypoints:f(t.keypoints).map((function(t){return l({},t)}))};return void 0!==t.box&&(i.box=l({},t.box)),i},t.prototype.nextTrackID=function(){var t=this.nextID;return this.nextID+=1,t},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.tracks=this.tracks.filter((function(e){return!t.includes(e.id)}))},t.prototype.reset=function(){this.tracks=[]},t}(),Rt=function(t){function e(e){return t.call(this,e)||this}return u(e,t),e.prototype.computeSimilarity=function(t){var e=this;return 0===t.length||0===this.tracks.length?[[]]:t.map((function(t){return e.tracks.map((function(n){return e.iou(t,n)}))}))},e.prototype.iou=function(t,e){var n=Math.max(t.box.xMin,e.box.xMin),i=Math.max(t.box.yMin,e.box.yMin),r=Math.min(t.box.xMax,e.box.xMax),o=Math.min(t.box.yMax,e.box.yMax);if(n>=r||i>=o)return 0;var a=(r-n)*(o-i);return a/(t.box.width*t.box.height+e.box.width*e.box.height-a)},e}(Ot),It=function(t){function e(e){var n=t.call(this,e)||this;return n.keypointThreshold=e.keypointTrackerParams.keypointConfidenceThreshold,n.keypointFalloff=e.keypointTrackerParams.keypointFalloff,n.minNumKeyoints=e.keypointTrackerParams.minNumberOfKeypoints,n}return u(e,t),e.prototype.computeSimilarity=function(t){if(0===t.length||0===this.tracks.length)return[[]];for(var e=[],n=0,i=t;n<i.length;n++){for(var r=i[n],o=[],a=0,s=this.tracks;a<s.length;a++){var u=s[a];o.push(this.oks(r,u))}e.push(o)}return e},e.prototype.oks=function(t,e){for(var n=this.area(e.keypoints)+1e-6,i=0,r=0,o=0;o<t.keypoints.length;++o){var a=t.keypoints[o],s=e.keypoints[o];if(!(a.score<this.keypointThreshold||s.score<this.keypointThreshold)){r+=1;var u=Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2),l=2*this.keypointFalloff[o];i+=Math.exp(-1*u/(2*n*Math.pow(l,2)))}}return r<this.minNumKeyoints?0:i/r},e.prototype.area=function(t){var e=this,n=t.filter((function(t){return t.score>e.keypointThreshold})),i=Math.min.apply(Math,f([1],n.map((function(t){return t.x})))),r=Math.max.apply(Math,f([0],n.map((function(t){return t.x})))),o=Math.min.apply(Math,f([1],n.map((function(t){return t.y}))));return(r-i)*(Math.max.apply(Math,f([0],n.map((function(t){return t.y}))))-o)},e}(Ot);function Lt(t){switch(t){case Ft.BlazePose:return d.reduce((function(t,e,n){return t[e]=n,t}),{});case Ft.PoseNet:case Ft.MoveNet:return p.reduce((function(t,e,n){return t[e]=n,t}),{});default:throw new Error("Model "+t+" is not supported.")}}(Pt=At||(At={})).Keypoint="keypoint",Pt.BoundingBox="boundingBox",function(t){t.MoveNet="MoveNet",t.BlazePose="BlazePose",t.PoseNet="PoseNet"}(Ft||(Ft={}));var Ct=Object.freeze({__proto__:null,getKeypointIndexBySide:function(t){switch(t){case Ft.BlazePose:return g;case Ft.PoseNet:case Ft.MoveNet:return m;default:throw new Error("Model "+t+" is not supported.")}},getAdjacentPairs:function(t){switch(t){case Ft.BlazePose:return v;case Ft.PoseNet:case Ft.MoveNet:return y;default:throw new Error("Model "+t+" is not supported.")}},getKeypointIndexByName:Lt}),jt=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],Nt={modelType:"SinglePose.Lightning",enableSmoothing:!0},zt={},Bt={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},Dt={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},Ut={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function Ht(t,e){var n,i,r,o;return t?e.width>e.height?(n=1,i=e.height/e.width,r=0,o=(e.width/2-e.height/2)/e.width):(n=e.width/e.height,i=1,r=(e.height/2-e.width/2)/e.height,o=0):e.width>e.height?(n=e.width/e.height,i=1,r=(e.height/2-e.width/2)/e.height,o=0):(n=1,i=e.height/e.width,r=0,o=(e.width/2-e.height/2)/e.width),{yMin:r,xMin:o,yMax:r+n,xMax:o+i,height:n,width:i}}function Vt(t,e){var n={maxTracks:t.maxTracks,maxAge:t.maxAge,minSimilarity:t.minSimilarity};return null!=e.maxTracks&&(n.maxTracks=e.maxTracks),null!=e.maxAge&&(n.maxAge=e.maxAge),null!=e.minSimilarity&&(n.minSimilarity=e.minSimilarity),n}var Gt=function(){function t(t,e){this.moveNetModel=t,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=Lt(Ft.MoveNet),"SinglePose.Lightning"===e.modelType?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):"SinglePose.Thunder"===e.modelType&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel="MultiPose.Lightning"===e.modelType,this.multiPoseModel||(this.keypointFilter=new it(Bt),this.cropRegionFilterYMin=new et(.9),this.cropRegionFilterXMin=new et(.9),this.cropRegionFilterYMax=new et(.9),this.cropRegionFilterXMax=new et(.9)),this.enableSmoothing=e.enableSmoothing,e.minPoseScore?this.minPoseScore=e.minPoseScore:this.minPoseScore=.25,e.multiPoseMaxDimension?this.multiPoseMaxDimension=e.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=e.enableTracking,this.multiPoseModel&&this.enableTracking&&(e.trackerType===At.Keypoint?this.tracker=new It(e.trackerConfig):e.trackerType===At.BoundingBox&&(this.tracker=new Rt(e.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return t.prototype.runSinglePersonPoseModel=function(t){return h(this,void 0,void 0,(function(){var e,n,i,r,a;return c(this,(function(s){switch(s.label){case 0:if(4!==(e=this.moveNetModel.execute(t)).shape.length||1!==e.shape[0]||1!==e.shape[1]||17!==e.shape[2]||3!==e.shape[3])throw e.dispose(),new Error("Unexpected output shape from model: ["+e.shape+"]");return"webgpu"===o.getBackend()?[3,1]:(n=e.dataSync(),[3,3]);case 1:return[4,e.data()];case 2:n=s.sent(),s.label=3;case 3:for(e.dispose(),i={keypoints:[],score:0},r=0,a=0;a<17;++a)i.keypoints[a]={y:n[3*a],x:n[3*a+1],score:n[3*a+2]},i.keypoints[a].score>.2&&(++r,i.score+=i.keypoints[a].score);return r>0&&(i.score/=r),[2,i]}}))}))},t.prototype.runMultiPersonPoseModel=function(t){return h(this,void 0,void 0,(function(){var e,n,i,r,a,s,u,l;return c(this,(function(h){switch(h.label){case 0:if(3!==(e=this.moveNetModel.execute(t)).shape.length||1!==e.shape[0]||56!==e.shape[2])throw e.dispose(),new Error("Unexpected output shape from model: ["+e.shape+"]");return"webgpu"===o.getBackend()?[3,1]:(n=e.dataSync(),[3,3]);case 1:return[4,e.data()];case 2:n=h.sent(),h.label=3;case 3:for(e.dispose(),i=[],r=n.length/56,a=0;a<r;++a)for(i[a]={keypoints:[]},s=56*a+51,i[a].box={yMin:n[s],xMin:n[s+1],yMax:n[s+2],xMax:n[s+3],width:n[s+3]-n[s+1],height:n[s+2]-n[s]},u=56*a+55,i[a].score=n[u],i[a].keypoints=[],l=0;l<17;++l)i[a].keypoints[l]={y:n[56*a+3*l],x:n[56*a+3*l+1],score:n[56*a+3*l+2]};return[2,i]}}))}))},t.prototype.estimatePoses=function(t,e,n){return void 0===e&&(e=zt),h(this,void 0,void 0,(function(){var i,r,a,s,u,h;return c(this,(function(c){switch(c.label){case 0:return e=function(t){return null==t?zt:l({},t)}(e),null==t?(this.reset(),[2,[]]):(null==n?H(t)&&(n=1e6*t.currentTime):n*=1e3,i=O(t),r=F(i),a=o.expandDims(i,0),t instanceof o.Tensor||i.dispose(),s=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(a,r,n)]);case 1:return s=c.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(a,r,n)];case 3:s=c.sent(),c.label=4;case 4:for(u=0;u<s.length;++u)for(h=0;h<s[u].keypoints.length;++h)s[u].keypoints[h].name=p[h],s[u].keypoints[h].y*=r.height,s[u].keypoints[h].x*=r.width;return[2,s]}}))}))},t.prototype.estimateSinglePose=function(t,e,n){return h(this,void 0,void 0,(function(){var i,r,a,s,u=this;return c(this,(function(l){switch(l.label){case 0:return this.cropRegion||(this.cropRegion=Ht(null==this.cropRegion,e)),i=o.tidy((function(){var e=o.tensor2d([[u.cropRegion.yMin,u.cropRegion.xMin,u.cropRegion.yMax,u.cropRegion.xMax]]),n=o.zeros([1],"int32"),i=[u.modelInputResolution.height,u.modelInputResolution.width];return o.cast(o.image.cropAndResize(t,e,n,i,"bilinear",0),"int32")})),t.dispose(),[4,this.runSinglePersonPoseModel(i)];case 1:if(r=l.sent(),i.dispose(),r.score<this.minPoseScore)return this.reset(),[2,[]];for(a=0;a<r.keypoints.length;++a)r.keypoints[a].y=this.cropRegion.yMin+r.keypoints[a].y*this.cropRegion.height,r.keypoints[a].x=this.cropRegion.xMin+r.keypoints[a].x*this.cropRegion.width;return null!=n&&this.enableSmoothing&&(r.keypoints=this.keypointFilter.apply(r.keypoints,n,1)),s=function(t,e,n,i){for(var r={},o=0,a=p;o<a.length;o++){var s=a[o];r[s]=[e[n[s]].y*i.height,e[n[s]].x*i.width]}if(function(t,e){return(t[e.left_hip].score>.2||t[e.right_hip].score>.2)&&(t[e.left_shoulder].score>.2||t[e.right_shoulder].score>.2)}(e,n)){var u=(r.left_hip[0]+r.right_hip[0])/2,l=(r.left_hip[1]+r.right_hip[1])/2,h=function(t,e,n,i,r){for(var o=["left_shoulder","right_shoulder","left_hip","right_hip"],a=0,s=0,u=0;u<o.length;u++)(p=Math.abs(i-n[o[u]][0]))>a&&(a=p),(d=Math.abs(r-n[o[u]][1]))>s&&(s=d);for(var l=0,h=0,c=0,f=Object.keys(n);c<f.length;c++){var p,d,g=f[c];t[e[g]].score<.2||((p=Math.abs(i-n[g][0]))>l&&(l=p),(d=Math.abs(r-n[g][1]))>h&&(h=d))}return[a,s,l,h]}(e,n,r,u,l),c=h[0],f=h[1],d=h[2],g=h[3],m=Math.max(1.9*f,1.9*c,1.2*d,1.2*g),y=[u-(m=Math.min(m,Math.max(l,i.width-l,u,i.height-u))),l-m];if(m>Math.max(i.width,i.height)/2)return Ht(null==t,i);var v=2*m;return{yMin:y[0]/i.height,xMin:y[1]/i.width,yMax:(y[0]+v)/i.height,xMax:(y[1]+v)/i.width,height:(y[0]+v)/i.height-y[0]/i.height,width:(y[1]+v)/i.width-y[1]/i.width}}return Ht(null==t,i)}(this.cropRegion,r.keypoints,this.keypointIndexByName,e),this.cropRegion=this.filterCropRegion(s),[2,[r]]}}))}))},t.prototype.estimateMultiplePoses=function(t,e,n){return h(this,void 0,void 0,(function(){var i,r,a,s,u,l,h,f,p,d,g,m=this;return c(this,(function(c){switch(c.label){case 0:return e.width>e.height?(r=this.multiPoseMaxDimension,a=Math.round(this.multiPoseMaxDimension*e.height/e.width),i=o.image.resizeBilinear(t,[a,r]),u=r,l=32*Math.ceil(a/32),s=o.pad(i,[[0,0],[0,l-a],[0,0],[0,0]])):(r=Math.round(this.multiPoseMaxDimension*e.width/e.height),a=this.multiPoseMaxDimension,i=o.image.resizeBilinear(t,[a,r]),u=32*Math.ceil(r/32),l=a,s=o.pad(i,[[0,0],[0,0],[0,u-r],[0,0]])),i.dispose(),t.dispose(),h=o.cast(s,"int32"),s.dispose(),[4,this.runMultiPersonPoseModel(h)];case 1:for(f=c.sent(),h.dispose(),f=f.filter((function(t){return t.score>=m.minPoseScore})),d=0;d<f.length;++d)for(p=0;p<f[d].keypoints.length;++p)f[d].keypoints[p].y*=l/a,f[d].keypoints[p].x*=u/r;if(this.enableTracking&&(this.tracker.apply(f,n),this.enableSmoothing)){for(d=0;d<f.length;++d)this.keypointFilterMap.has(f[d].id)||this.keypointFilterMap.set(f[d].id,new it(Bt)),f[d].keypoints=this.keypointFilterMap.get(f[d].id).apply(f[d].keypoints,n,1);g=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach((function(t,e){g.has(e)||m.keypointFilterMap.delete(e)}))}return[2,f]}}))}))},t.prototype.filterCropRegion=function(t){if(t){var e=this.cropRegionFilterYMin.apply(t.yMin),n=this.cropRegionFilterXMin.apply(t.xMin),i=this.cropRegionFilterYMax.apply(t.yMax),r=this.cropRegionFilterXMax.apply(t.xMax);return{yMin:e,xMin:n,yMax:i,xMax:r,height:i-e,width:r-n}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},t.prototype.dispose=function(){this.moveNetModel.dispose()},t.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},t.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},t}();function Kt(t){return void 0===t&&(t=Nt),h(this,void 0,void 0,(function(){var e,n,i,r;return c(this,(function(s){switch(s.label){case 0:return e=function(t){var e,n=null==t?Nt:l({},t);if(null==n.modelType)n.modelType="SinglePose.Lightning";else if(jt.indexOf(n.modelType)<0)throw new Error("Invalid architecture "+n.modelType+". Should be one of "+jt);if(null==n.enableSmoothing&&(n.enableSmoothing=!0),null!=n.minPoseScore&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(null!=n.multiPoseMaxDimension&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<32))throw new Error("multiPoseMaxDimension must be a multiple of 32 and higher than 0");if("MultiPose.Lightning"===n.modelType&&null==n.enableTracking&&(n.enableTracking=!0),"MultiPose.Lightning"===n.modelType&&!0===n.enableTracking)if(null==n.trackerType&&(n.trackerType=At.BoundingBox),n.trackerType===At.Keypoint)null!=n.trackerConfig?n.trackerConfig=function(t){var e=Vt(Dt,t);return e.keypointTrackerParams=l({},Dt.keypointTrackerParams),null!=t.keypointTrackerParams&&(null!=t.keypointTrackerParams.keypointConfidenceThreshold&&(e.keypointTrackerParams.keypointConfidenceThreshold=t.keypointTrackerParams.keypointConfidenceThreshold),null!=t.keypointTrackerParams.keypointFalloff&&(e.keypointTrackerParams.keypointFalloff=t.keypointTrackerParams.keypointFalloff),null!=t.keypointTrackerParams.minNumberOfKeypoints&&(e.keypointTrackerParams.minNumberOfKeypoints=t.keypointTrackerParams.minNumberOfKeypoints)),e}(n.trackerConfig):n.trackerConfig=Dt;else{if(n.trackerType!==At.BoundingBox)throw new Error("Tracker type not supported by MoveNet");null!=n.trackerConfig?n.trackerConfig=(e=n.trackerConfig,Vt(Ut,e)):n.trackerConfig=Ut}return n}(t),i=!0,e.modelUrl?(i="string"==typeof e.modelUrl&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,a.loadGraphModel(e.modelUrl,{fromTFHub:i})]):[3,2];case 1:return n=s.sent(),[3,4];case 2:return r=void 0,"SinglePose.Lightning"===e.modelType?r="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":"SinglePose.Thunder"===e.modelType?r="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":"MultiPose.Lightning"===e.modelType&&(r="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,a.loadGraphModel(r,{fromTFHub:i})];case 3:n=s.sent(),s.label=4;case 4:return"webgl"===o.getBackend()&&o.env().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new Gt(n,e)]}}))}))}var qt={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},Yt=["MobileNetV1","ResNet50"],Wt={MobileNetV1:[8,16],ResNet50:[16]},Xt=[8,16,32],Qt={MobileNetV1:[.5,.75,1],ResNet50:[1]},Jt=[1,2,4],Zt={maxPoses:1,flipHorizontal:!1},$t={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},te=[-123.15,-115.9,-103.06];function ee(t){return Math.floor(t/2)}var ne=function(){function t(t,e){this.priorityQueue=new Array(t),this.numberOfElements=-1,this.getElementValue=e}return t.prototype.enqueue=function(t){this.priorityQueue[++this.numberOfElements]=t,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var t=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,t},t.prototype.empty=function(){return-1===this.numberOfElements},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(t){for(;t>0&&this.less(ee(t),t);)this.exchange(t,ee(t)),t=ee(t)},t.prototype.sink=function(t){for(;2*t<=this.numberOfElements;){var e=2*t;if(e<this.numberOfElements&&this.less(e,e+1)&&e++,!this.less(t,e))break;this.exchange(t,e),t=e}},t.prototype.getValueAt=function(t){return this.getElementValue(this.priorityQueue[t])},t.prototype.less=function(t,e){return this.getValueAt(t)<this.getValueAt(e)},t.prototype.exchange=function(t,e){var n=this.priorityQueue[t];this.priorityQueue[t]=this.priorityQueue[e],this.priorityQueue[e]=n},t}();function ie(t,e,n,i,r,o){for(var a=o.shape,s=a[0],u=a[1],l=!0,h=Math.max(n-r,0),c=Math.min(n+r+1,s),f=h;f<c;++f){for(var p=Math.max(i-r,0),d=Math.min(i+r+1,u),g=p;g<d;++g)if(o.get(f,g,t)>e){l=!1;break}if(!l)break}return l}function re(t){return h(this,void 0,void 0,(function(){return c(this,(function(e){return[2,Promise.all(t.map((function(t){return t.buffer()})))]}))}))}function oe(t,e,n,i){return{y:i.get(t,e,n),x:i.get(t,e,n+17)}}function ae(t,e,n){var i=oe(t.heatmapY,t.heatmapX,t.id,n),r=i.y,o=i.x;return{x:t.heatmapX*e+o,y:t.heatmapY*e+r}}function se(t,e,n,i){var r=n.x,o=n.y;return t.some((function(t){var n,a,s,u,l=t.keypoints;return n=o,a=r,(s=l[i].y-n)*s+(u=l[i].x-a)*u<=e}))}var ue=p.reduce((function(t,e,n){return t[e]=n,t}),{}),le=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map((function(t){var e=t[0],n=t[1];return[ue[e],ue[n]]})),he=le.map((function(t){return t[1]})),ce=le.map((function(t){return t[0]}));function fe(t,e,n){return t<e?e:t>n?n:t}function pe(t,e,n,i){return{y:fe(Math.round(t.y/e),0,n-1),x:fe(Math.round(t.x/e),0,i-1)}}function de(t,e){return{x:t.x+e.x,y:t.y+e.y}}function ge(t,e,n,i,r,o,a,s){void 0===s&&(s=2);for(var u=i.shape,l=u[0],h=u[1],c={y:e.y,x:e.x},f=de(c,function(t,e,n){var i=n.shape[2]/2;return{y:n.get(e.y,e.x,t),x:n.get(e.y,e.x,i+t)}}(t,pe(c,o,l,h),a)),d=0;d<s;d++){var g=pe(f,o,l,h),m=oe(g.y,g.x,n,r);f=de({x:g.x*o,y:g.y*o},{x:m.x,y:m.y})}var y=pe(f,o,l,h),v=i.get(y.y,y.x,n);return{y:f.y,x:f.x,name:p[n],score:v}}function me(t,e,n,i,r,o){var a=e.shape[2],s=he.length,u=new Array(a),l=t.part,h=t.score,c=ae(l,i,n);u[l.id]={score:h,name:p[l.id],y:c.y,x:c.x};for(var f=s-1;f>=0;--f){var d=he[f],g=ce[f];u[d]&&!u[g]&&(u[g]=ge(f,u[d],g,e,n,i,o))}for(f=0;f<s;++f)d=ce[f],g=he[f],u[d]&&!u[g]&&(u[g]=ge(f,u[d],g,e,n,i,r));return u}function ye(t,e,n){return n.reduce((function(n,i,r){var o=i.y,a=i.x,s=i.score;return se(t,e,{y:o,x:a},r)||(n+=s),n}),0)/n.length}function ve(t,e,n,i,r,o,a,s){return void 0===a&&(a=.5),void 0===s&&(s=20),h(this,void 0,void 0,(function(){var u,l,h,f,p,d,g,m,y,v,w,b;return c(this,(function(c){switch(c.label){case 0:return[4,re([t,e,n,i])];case 1:for(u=c.sent(),l=u[0],h=u[1],f=u[2],p=u[3],d=[],g=function(t,e,n){for(var i=n.shape,r=i[0],o=i[1],a=i[2],s=new ne(r*o*a,(function(t){return t.score})),u=0;u<r;++u)for(var l=0;l<o;++l)for(var h=0;h<a;++h){var c=n.get(u,l,h);c<t||ie(h,c,u,l,1,n)&&s.enqueue({score:c,part:{heatmapY:u,heatmapX:l,id:h}})}return s}(a,0,l),m=s*s;d.length<o&&!g.empty();)y=g.dequeue(),v=ae(y.part,r,h),se(d,m,v,y.part.id)||(w=me(y,l,h,r,f,p),b=ye(d,m,w),d.push({keypoints:w,score:b}));return[2,d]}}))}))}function we(t,e,n,i){return{y:i.get(t,e,n),x:i.get(t,e,n+p.length)}}function be(t,e,n){return h(this,void 0,void 0,(function(){var i,r,a,s,u,l,h,f,d,g;return c(this,(function(c){switch(c.label){case 0:return i=0,b=(w=t).shape,x=b[0],k=b[1],T=b[2],r=o.tidy((function(){var t,e,n=o.reshape(w,[x*k,T]),i=o.argMax(n,0),r=o.expandDims(o.div(i,o.scalar(k,"int32")),1),a=o.expandDims((t=i,e=k,o.tidy((function(){var n=o.div(t,o.scalar(e,"int32"));return o.sub(t,o.mul(n,o.scalar(e,"int32")))}))),1);return o.concat([r,a],1)})),[4,Promise.all([t.buffer(),e.buffer(),r.buffer()])];case 1:return a=c.sent(),s=a[0],u=a[1],l=a[2],[4,(m=l,y=n,v=u,h=o.tidy((function(){var t=function(t,e){for(var n=[],i=0;i<p.length;i++){var r=we(t.get(i,0).valueOf(),t.get(i,1).valueOf(),i,e),a=r.x,s=r.y;n.push(s),n.push(a)}return o.tensor2d(n,[p.length,2])}(m,v);return o.add(o.cast(o.mul(m.toTensor(),o.scalar(y,"int32")),"float32"),t)}))).buffer()];case 2:return f=c.sent(),d=Array.from(function(t,e){for(var n=e.shape[0],i=new Float32Array(n),r=0;r<n;r++){var o=e.get(r,0),a=e.get(r,1);i[r]=t.get(o,a,r)}return i}(s,l)),g=d.map((function(t,e){return i+=t,{y:f.get(e,0),x:f.get(e,1),score:t,name:p[e]}})),r.dispose(),h.dispose(),[2,{keypoints:g,score:i/g.length}]}var m,y,v,w,b,x,k,T}))}))}function xe(t,e){return(t-1)%e==0}var ke="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",Te="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function Me(t,e){return function(t,e){return(t-1)%e==0}(t,e)?t:Math.floor(t/e)*e+1}var Se=function(){function t(t,e){this.posenetModel=t;var n=this.posenetModel.inputs[0].shape;o.util.assert(-1===n[1]&&-1===n[2],(function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"}));var i,r,a=(i=e.inputResolution,r=e.outputStride,{height:Me(i.height,r),width:Me(i.width,r)});!function(t){o.util.assert(Xt.indexOf(t)>=0,(function(){return"outputStride of "+t+" is invalid. It must be either 8 or 16."}))}(e.outputStride),function(t,e){o.util.assert(xe(t.height,e),(function(){return"height of "+t.height+" is invalid for output stride "+e+"."})),o.util.assert(xe(t.width,e),(function(){return"width of "+t.width+" is invalid for output stride "+e+"."}))}(a,e.outputStride),this.inputResolution=a,this.outputStride=e.outputStride,this.architecture=e.architecture}return t.prototype.estimatePoses=function(t,e){return void 0===e&&(e=Zt),h(this,void 0,void 0,(function(){var n,i,r,a,s,u,h,f,p,d,g,m,y,v,w;return c(this,(function(c){switch(c.label){case 0:return n=function(t){var e=t;if(null==e.maxPoses&&(e.maxPoses=1),e.maxPoses<=0)throw new Error("Invalid maxPoses "+e.maxPoses+". Should be > 0.");if(e.maxPoses>1){if((e=l(l({},$t),e)).scoreThreshold<0||e.scoreThreshold>1)throw new Error("Invalid scoreThreshold "+e.scoreThreshold+". Should be in range [0.0, 1.0]");if(e.nmsRadius<=0)throw new Error("Invalid nmsRadius "+e.nmsRadius+".")}return e}(e),null==t?[2,[]]:(this.maxPoses=n.maxPoses,i=D(t,{outputTensorSize:this.inputResolution,keepAspectRatio:!0,borderMode:"replicate"}),r=i.imageTensor,a=i.padding,s="ResNet50"===this.architecture?o.add(r,te):B(r,[-1,1]),u=this.posenetModel.predict(s),"ResNet50"===this.architecture?(h=o.squeeze(u[2],[0]),f=o.squeeze(u[3],[0]),p=o.squeeze(u[0],[0]),d=o.squeeze(u[1],[0])):(h=o.squeeze(u[0],[0]),f=o.squeeze(u[1],[0]),p=o.squeeze(u[2],[0]),d=o.squeeze(u[3],[0])),g=o.sigmoid(f),1!==this.maxPoses?[3,2]:[4,be(g,h,this.outputStride)]);case 1:return y=c.sent(),m=[y],[3,4];case 2:return[4,ve(g,h,p,d,this.outputStride,this.maxPoses,n.scoreThreshold,n.nmsRadius)];case 3:m=c.sent(),c.label=4;case 4:return v=F(t),w=function(t,e,n,i){var r=e.height,o=e.width,a=r/(n.height*(1-i.top-i.bottom)),s=o/(n.width*(1-i.left-i.right)),u=-i.top*n.height,l=-i.left*n.width;if(1===s&&1===a&&0===u&&0===l)return t;for(var h=0,c=t;h<c.length;h++)for(var f=0,p=c[h].keypoints;f<p.length;f++){var d=p[f];d.x=(d.x+l)*s,d.y=(d.y+u)*a}return t}(m,v,this.inputResolution,a),n.flipHorizontal&&(w=function(t,e){for(var n=0,i=t;n<i.length;n++)for(var r=0,o=i[n].keypoints;r<o.length;r++){var a=o[r];a.x=e.width-1-a.x}return t}(w,v)),r.dispose(),s.dispose(),o.dispose(u),h.dispose(),f.dispose(),p.dispose(),d.dispose(),g.dispose(),[2,w]}}))}))},t.prototype.dispose=function(){this.posenetModel.dispose()},t.prototype.reset=function(){},t}();function _e(t){return void 0===t&&(t=qt),h(this,void 0,void 0,(function(){var e,n,i,r,o;return c(this,(function(s){switch(s.label){case 0:return"ResNet50"!==(e=function(t){var e=t||qt;if(null==e.architecture&&(e.architecture="MobileNetV1"),Yt.indexOf(e.architecture)<0)throw new Error("Invalid architecture "+e.architecture+". Should be one of "+Yt);if(null==e.inputResolution&&(e.inputResolution={height:257,width:257}),null==e.outputStride&&(e.outputStride=16),Wt[e.architecture].indexOf(e.outputStride)<0)throw new Error("Invalid outputStride "+e.outputStride+". Should be one of "+Wt[e.architecture]+" for architecture "+e.architecture+".");if(null==e.multiplier&&(e.multiplier=1),Qt[e.architecture].indexOf(e.multiplier)<0)throw new Error("Invalid multiplier "+e.multiplier+". Should be one of "+Qt[e.architecture]+" for architecture "+e.architecture+".");if(null==e.quantBytes&&(e.quantBytes=4),Jt.indexOf(e.quantBytes)<0)throw new Error("Invalid quantBytes "+e.quantBytes+". Should be one of "+Jt+" for architecture "+e.architecture+".");if("MobileNetV1"===e.architecture&&32===e.outputStride&&1!==e.multiplier)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return e}(t)).architecture?[3,2]:(u=e.outputStride,l=e.quantBytes,h="model-stride"+u+".json",n=4===l?Te+"float/"+h:Te+"quant"+l+"/"+h,[4,a.loadGraphModel(e.modelUrl||n)]);case 1:return i=s.sent(),[2,new Se(i,e)];case 2:return r=function(t,e,n){var i={1:"100",.75:"075",.5:"050"},r="model-stride"+t+".json";return 4===n?ke+"float/"+i[e]+"/"+r:ke+"quant"+n+"/"+i[e]+"/"+r}(e.outputStride,e.multiplier,e.quantBytes),[4,a.loadGraphModel(e.modelUrl||r)];case 3:return o=s.sent(),[2,new Se(o,e)]}var u,l,h}))}))}function Ee(t,e){return h(this,void 0,void 0,(function(){var n,i;return c(this,(function(r){switch(t){case Ft.PoseNet:return[2,_e(e)];case Ft.BlazePose:if(i=void 0,null!=(n=e)){if("tfjs"===n.runtime)return[2,Et(e)];if("mediapipe"===n.runtime)return[2,A(e)];i=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+i);case Ft.MoveNet:return[2,Kt(e)];default:throw new Error(t+" is not a supported model name.")}}))}))}var Ae={keypointsToNormalizedKeypoints:tt},Fe={modelType:{SINGLEPOSE_LIGHTNING:"SinglePose.Lightning",SINGLEPOSE_THUNDER:"SinglePose.Thunder",MULTIPOSE_LIGHTNING:"MultiPose.Lightning"}}},{"@mediapipe/pose":"g2BrO","@tensorflow/tfjs-core":"fqGP4","@tensorflow/tfjs-converter":"l98bQ","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],g2BrO:[function(t,e,n){var i=arguments[3];(function(){var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var r=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i&&i];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in i))break t;i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function s(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function u(t){if(!(t instanceof Array)){t=s(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",(function(t){function e(t,e){this.g=t,n(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function t(n){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(i+(n||"")+"_"+r++,n)}})),o("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<i.length;o++){var s=r[i[o]];"function"==typeof s&&"function"!=typeof s.prototype[t]&&n(s.prototype,t,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return t}));var l,h="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var c;t:{var f={};try{f.__proto__={a:!0},c=f.a;break t}catch(t){}c=!1}l=c?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var p=l;function d(t,e){if(t.prototype=h(e.prototype),t.prototype.constructor=t,p)p(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.ea=e.prototype}function g(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function m(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function y(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}function v(t,e,n){return t.g=n,{value:e}}function w(t){this.g=new g,this.h=t}function b(t,e,n,i){try{var r=e.call(t.g.i,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.g.l=!1,r;var o=r.value}catch(e){return t.g.i=null,y(t.g,e),x(t)}return t.g.i=null,i.call(t.g,o),x(t)}function x(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(e){t.g.h=void 0,y(t.g,e)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function k(t){this.next=function(e){return m(t.g),t.g.i?e=b(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=x(t)),e},this.throw=function(e){return m(t.g),t.g.i?e=b(t,t.g.i.throw,e,t.g.o):(y(t.g,e),e=x(t)),e},this.return=function(e){return function(t,e){m(t.g);var n=t.g.i;return n?b(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),x(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function T(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(i,r){!function t(o){o.done?i(o.value):Promise.resolve(o.value).then(e,n).then(t,r)}(t.next())}))}(new k(new w(t)))}g.prototype.o=function(t){this.h=t},g.prototype.return=function(t){this.j={return:t},this.g=this.s},o("Promise",(function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.g=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var o=r.setTimeout;n.prototype.i=function(t){o(t,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.g=null},n.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.C),reject:t(this.l)}},e.prototype.C=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.F(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.m(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.l(t)}"function"==typeof e?this.G(e,t):this.m(t)},e.prototype.l=function(t){this.s(2,t)},e.prototype.m=function(t){this.s(1,t)},e.prototype.s=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.D(),this.A()},e.prototype.D=function(){var t=this;o((function(){if(t.B()){var e=r.console;void 0!==e&&e.error(t.i)}}),1)},e.prototype.B=function(){if(this.o)return!1;var t=r.CustomEvent,e=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,n(t))},e.prototype.A=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)a.h(this.g[t]);this.g=null}};var a=new n;return e.prototype.F=function(t){var e=this.j();t.J(e.resolve,e.reject)},e.prototype.G=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(t){o(t)}}:e}var r,o,a=new e((function(t,e){r=t,o=e}));return this.J(i(t,r),i(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.J=function(t,e){function n(){switch(i.h){case 1:t(i.i);break;case 2:e(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=s(t),o=r.next();!o.done;o=r.next())i(o.value).J(e,n)}))},e.all=function(t){var n=s(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).J(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var M="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};o("Object.assign",(function(t){return t||M})),o("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),o("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(e=e||0)&&(e=Math.max(e+i,0));e<i;e++){var r=n[e];if(r===t||Object.is(r,t))return!0}return!1}})),o("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(t){return t}))}}));var S=this||self;function _(t,e){t=t.split(".");var n,i=S;t[0]in i||void 0===i.execScript||i.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=e}function E(t){!function(t){S.setTimeout((function(){throw t}),0)}(t)}function A(t,e){E(Error("Invalid wire type: "+t+" (at position "+e+")"))}function F(){E(Error("Failed to read varint, encoding is invalid."))}function P(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var O,R,I="undefined"!=typeof TextDecoder,L="undefined"!=typeof TextEncoder;function C(t){if(L)t=(R||(R=new TextEncoder)).encode(t);else{var e=void 0;e=void 0!==e&&e;for(var n=0,i=new Uint8Array(3*t.length),r=0;r<t.length;r++){var o=t.charCodeAt(r);if(128>o)i[n++]=o;else{if(2048>o)i[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&r<t.length){var a=t.charCodeAt(++r);if(56320<=a&&57343>=a){o=1024*(o-55296)+a-56320+65536,i[n++]=o>>18|240,i[n++]=o>>12&63|128,i[n++]=o>>6&63|128,i[n++]=63&o|128;continue}r--}if(e)throw Error("Found an unpaired surrogate");o=65533}i[n++]=o>>12|224,i[n++]=o>>6&63|128}i[n++]=63&o|128}}t=i.subarray(0,n)}return t}var j={},N=null;function z(t){var e;void 0===e&&(e=0),D(),e=j[e];for(var n=Array(Math.floor(t.length/3)),i=e[64]||"",r=0,o=0;r<t.length-2;r+=3){var a=t[r],s=t[r+1],u=t[r+2],l=e[a>>2];a=e[(3&a)<<4|s>>4],s=e[(15&s)<<2|u>>6],u=e[63&u],n[o++]=l+a+s+u}switch(l=0,u=i,t.length-r){case 2:u=e[(15&(l=t[r+1]))<<2]||i;case 1:t=t[r],n[o]=e[t>>2]+e[(3&t)<<4|l>>4]+u+i}return n.join("")}function B(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var i=new Uint8Array(n),r=0;return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=N[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}D();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;e(r<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){i[r++]=t})),i.subarray(0,r)}function D(){if(!N){N={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var i=t.concat(e[n].split(""));j[n]=i;for(var r=0;r<i.length;r++){var o=i[r];void 0===N[o]&&(N[o]=r)}}}}var U,H="function"==typeof Uint8Array;function V(t){if(this.g=t,null!==t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}V.prototype.toJSON=function(){if(null==this.g)var t="";else t=this.g,t=this.g=null==t||"string"==typeof t?t:H&&t instanceof Uint8Array?z(t):null;return t};var G="function"==typeof Uint8Array.prototype.slice;function K(t,e,n){return e===n?U||(U=new Uint8Array(0)):G?t.slice(e,n):new Uint8Array(t.subarray(e,n))}var q=0;function Y(t,e){e=void 0!==(e=void 0===e?{}:e).u&&e.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=e,t&&W(this,t)}function W(t,e){t.h=function(t){if(t.constructor===Uint8Array)return t;if(t.constructor===ArrayBuffer)return new Uint8Array(t);if(t.constructor===Array)return new Uint8Array(t);if(t.constructor===String)return B(t);if(t.constructor===V){if(null==t.g)var e=U||(U=new Uint8Array(0));else{e=Uint8Array;var n=t.g;n=null==n||H&&null!=n&&n instanceof Uint8Array?n:"string"==typeof n?B(n):null,e=new e(t=t.g=n)}return e}if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(e),t.l=0,t.i=t.h.length,t.g=t.l}function X(t){t.g>t.i&&(t.j=!0,E(Error("Tried to read past the end of the data "+t.g+" > "+t.i)))}function Q(t){var e=t.h,n=e[t.g],i=127&n;return 128>n?(t.g+=1,X(t),i):(i|=(127&(n=e[t.g+1]))<<7,128>n?(t.g+=2,X(t),i):(i|=(127&(n=e[t.g+2]))<<14,128>n?(t.g+=3,X(t),i):(i|=(127&(n=e[t.g+3]))<<21,128>n?(t.g+=4,X(t),i):(i|=(15&(n=e[t.g+4]))<<28,128>n?(t.g+=5,X(t),i>>>0):(t.g+=5,128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]?(t.j=!0,F(),i):(X(t),i))))))}Y.prototype.reset=function(){this.g=this.l};var J=[];function Z(){this.g=new Uint8Array(64),this.h=0}function $(t,e){if(!(t.h+1<t.g.length)){var n=t.g;t.g=new Uint8Array(Math.ceil(1+2*t.g.length)),t.g.set(n)}t.g[t.h++]=e}function tt(t,e){for(;127<e;)$(t,127&e|128),e>>>=7;$(t,e)}function et(t){var e={},n=void 0!==e.N&&e.N;this.m={u:void 0!==e.u&&e.u},this.N=n,e=this.m,J.length?(n=J.pop(),e&&(n.u=e.u),t&&W(n,t),t=n):t=new Y(t,e),this.g=t,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function nt(t){var e=t.g;if((e=e.g==e.i)||(e=t.j)||(e=(e=t.g).j||0>e.g||e.g>e.i),e)return!1;t.l=t.g.g;var n=Q(t.g);return e=n>>>3,0<=(n&=7)&&5>=n?(t.i=e,t.h=n,!0):(t.j=!0,A(n,t.l),!1)}function it(t){switch(t.h){case 0:if(0!=t.h)it(t);else t:{for(var e=(t=t.g).g,n=0;10>n;n++){if(0==(128&t.h[e])){t.g=e+1,X(t);break t}e++}t.j=!0,F()}break;case 1:(t=t.g).g+=8,X(t);break;case 2:2!=t.h?it(t):(e=Q(t.g),(t=t.g).g+=e,X(t));break;case 5:(t=t.g).g+=4,X(t);break;case 3:for(e=t.i;;){if(!nt(t)){t.j=!0,E(Error("Unmatched start-group tag: stream EOF"));break}if(4==t.h){t.i!=e&&(t.j=!0,E(Error("Unmatched end-group tag")));break}it(t)}break;default:t.j=!0,A(t.h,t.l)}}function rt(t,e,n){t.N||(t=K(t.g.h,n,t.g.g),(n=e.m)?n.push(t):e.m=[t])}Z.prototype.length=function(){return this.h},Z.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,K(t,0,e)},et.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ot=[];function at(){this.h=[],this.i=0,this.g=new Z}function st(t,e){0!==e.length&&(t.h.push(e),t.i+=e.length)}function ut(t,e,n){tt(t.g,8*e+2),tt(t.g,n.length),st(t,t.g.end()),st(t,n)}var lt,ht="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ct(t,e){Object.isFrozen(t)||(ht?t[ht]|=e:void 0!==t.g?t.g|=e:Object.defineProperties(t,{g:{value:e,configurable:!0,writable:!0,enumerable:!1}}))}function ft(t){return t?null==(e=ht?t[ht]:t.g)?0:e:0;var e}function pt(t){return Array.isArray(t)?(ct(t,1),t):t}function dt(t){if(!Array.isArray(t))throw Error("cannot mark non-array as immutable");ct(t,2)}function gt(t){return null!==t&&"object"==typeof t&&t.constructor===Object}function mt(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":return H&&null!=t&&t instanceof Uint8Array?z(t):t;default:return t}}function yt(t,e){if(null!=t)return Array.isArray(t)||gt(t)?vt(t,e):e(t)}function vt(t,e){if(Array.isArray(t)){for(var n=Array(t.length),i=0;i<t.length;i++)n[i]=yt(t[i],e);return 1&ft(t)&&pt(n),n}for(i in n={},t)n[i]=yt(t[i],e);return n}function wt(t,e,n){var i=lt;if(lt=null,t||(t=i),i=this.constructor.ca,t||(t=i?[i]:[]),this.j=(i?0:-1)-(this.constructor.aa||0),this.i=null,this.g=t,t=(i=this.g.length)-1,i&&gt(i=this.g[t])?(this.l=t-this.j,this.h=i):void 0!==e&&-1<e?(this.l=Math.max(e,t+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(e=0;e<n.length;e++)(t=n[e])<this.l?(t+=this.j,(i=this.g[t])?pt(i):this.g[t]=kt):(Tt(this),(i=this.h[t])?pt(i):this.h[t]=kt)}var bt,xt,kt=Object.freeze(pt([]));function Tt(t){var e=t.l+t.j;t.g[e]||(t.h=t.g[e]={})}function Mt(t,e,n){return-1===e?null:void 0!==n&&n||e>=t.l?t.h?t.h[e]:void 0:t.g[e+t.j]}function St(t,e,n){n=void 0===n||n;var i=void 0!==i&&i,r=Mt(t,e,i);return null==r&&(r=kt),r===kt?Et(t,e,r=pt([]),i):n&&Array.isArray(r)&&2&ft(r)&&Et(t,e,r=r.slice(),i),r}function _t(t,e,n){return null==(t=null==(t=Mt(t,e))?t:+t)?void 0===n?0:n:t}function Et(t,e,n,i){void 0!==i&&i||e>=t.l?(Tt(t),t.h[e]=n):t.g[e+t.j]=n}function At(t,e,n){t.i||(t.i={});var i=t.i[n];if(!i){var r=St(t,n,!1);i=[];for(var o=!!Array.isArray(r)&&!!(2&ft(r)),a=0;a<r.length;a++)i[a]=new e(r[a]),o&&dt(i[a].g);o&&(dt(i),Object.freeze(i)),t.i[n]=i}return i}function Ft(t,e,n,i,r){var o=At(t,i,e);n=n||new i,t=St(t,e),null!=r?(o.splice(r,0,n),t.splice(r,0,Pt(n))):(o.push(n),t.push(Pt(n)))}function Pt(t){if(t.i)for(var e in t.i){var n=t.i[e];if(Array.isArray(n))for(var i=0;i<n.length;i++)n[i]&&Pt(n[i]);else n&&Pt(n)}return t.g}function Ot(t,e){return null==(t=Mt(t,e))?0:t}function Rt(t,e){return null==(t=Mt(t,e))?"":t}function It(t,e){if(t=t.m){st(e,e.g.end());for(var n=0;n<t.length;n++)st(e,t[n])}}function Lt(t){var e=t[0];switch(t.length){case 2:var n=t[1];return function(t,i,r){return e(t,i,r,n)};case 3:var i=t[1],r=t[2];return function(t,n,o){return e(t,n,o,i,r)};case 4:var o=t[1],a=t[2],s=t[3];return function(t,n,i){return e(t,n,i,o,a,s)};default:throw Error("unsupported number of parameters, expected [2-4], got "+t.length)}}function Ct(t,e,n){for(;nt(e)&&4!=e.h;){var i=e.i,r=n[i];if(r){if(Array.isArray(r)&&(r=n[i]=Lt(r)),!r(e,t,i)){r=t;var o=(i=e).l;it(i),rt(i,r,o)}}else r=t,o=(i=e).l,it(i),rt(i,r,o)}return t}function jt(t,e){var n=new at;if(e(t,n),0===(t=n.i+n.g.length()))n=new Uint8Array(0);else{t=new Uint8Array(t);for(var i=n.h,r=i.length,o=e=0;o<r;o++){var a=i[o];0!==a.length&&(t.set(a,e),e+=a.length)}0!==(r=(i=n.g).h)&&(t.set(i.g.subarray(0,r),e),i.h=0),n.h=[t],n=t}return n}function Nt(t,e,n){if(ot.length){var i=ot.pop();t&&(W(i.g,t),i.i=-1,i.h=-1),t=i}else t=new et(t);try{return n(new e,t)}finally{(e=t.g).h=null,e.l=0,e.i=0,e.g=0,e.j=!1,e.u=!1,t.i=-1,t.h=-1,t.j=!1,100>ot.length&&ot.push(t)}}function zt(t,e,n){if(null!=(e=Mt(e,n))){tt(t.g,8*n+5),t=t.g;var i=e;0===(i=(n=0>i?1:0)?-i:i)?0<1/i?q=0:(0,q=2147483648):isNaN(i)?(0,q=2147483647):34028234663852886e22<i?(0,q=(n<<31|2139095040)>>>0):11754943508222875e-54>i?(i=Math.round(i/Math.pow(2,-149)),0,q=(n<<31|i)>>>0):(e=Math.floor(Math.log(i)/Math.LN2),i*=Math.pow(2,-e),16777216<=(i=Math.round(8388608*i))&&++e,0,q=(n<<31|e+127<<23|8388607&i)>>>0),$(t,(n=q)>>>0&255),$(t,n>>>8&255),$(t,n>>>16&255),$(t,n>>>24&255)}}function Bt(t,e,n){if(5!==t.h)return!1;var i=(t=t.g).h[t.g],r=t.h[t.g+1],o=t.h[t.g+2],a=t.h[t.g+3];return t.g+=4,X(t),t=2*((r=(i<<0|r<<8|o<<16|a<<24)>>>0)>>31)+1,i=r>>>23&255,r&=8388607,Et(e,n,255==i?r?NaN:1/0*t:0==i?t*Math.pow(2,-149)*r:t*Math.pow(2,i-150)*(r+Math.pow(2,23))),!0}function Dt(t,e,n){if(0!==t.h)return!1;for(var i=t.g,r=128,o=0,a=t=0;4>a&&128<=r;a++)o|=(127&(r=i.h[i.g++]))<<7*a;if(128<=r&&(o|=(127&(r=i.h[i.g++]))<<28,t|=(127&r)>>4),128<=r)for(a=0;5>a&&128<=r;a++)t|=(127&(r=i.h[i.g++]))<<7*a+3;return 128>r?(i=o>>>0,(t=2147483648&(r=t>>>0))&&(r=~r>>>0,0==(i=1+~i>>>0)&&(r=r+1>>>0)),i=4294967296*r+(i>>>0),t=t?-i:i):(i.j=!0,F(),t=void 0),Et(e,n,t),!0}function Ut(t,e,n){return 0===t.h&&(Et(e,n,Q(t.g)),!0)}function Ht(t,e,n){if(2!==t.h)return!1;var i,r=Q(t.g),o=(t=t.g).g;if(t.g+=r,X(t),t=t.h,I)(i=O)||(i=O=new TextDecoder("utf-8",{fatal:!1})),i=i.decode(t.subarray(o,o+r));else{r=o+r;for(var a,s,u,l=[],h=null;o<r;)128>(a=t[o++])?l.push(a):224>a?o>=r?l.push(65533):(s=t[o++],194>a||128!=(192&s)?(o--,l.push(65533)):l.push((31&a)<<6|63&s)):240>a?o>=r-1?l.push(65533):128!=(192&(s=t[o++]))||224===a&&160>s||237===a&&160<=s||128!=(192&(i=t[o++]))?(o--,l.push(65533)):l.push((15&a)<<12|(63&s)<<6|63&i):244>=a?o>=r-2?l.push(65533):128!=(192&(s=t[o++]))||0!=s-144+(a<<28)>>30||128!=(192&(i=t[o++]))||128!=(192&(u=t[o++]))?(o--,l.push(65533)):(a=(7&a)<<18|(63&s)<<12|(63&i)<<6|63&u,a-=65536,l.push(55296+(a>>10&1023),56320+(1023&a))):l.push(65533),8192<=l.length&&(h=P(h,l),l.length=0);i=P(h,l)}return Et(e,n,i),!0}function Vt(t,e,n,i,r){if(2!==t.h)return!1;var o=new i,a=t.g.i,s=Q(t.g),u=t.g.g+s;if(t.g.i=u,r(o,t),0!==(r=u-t.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+s+" bytes, instead read "+(s-r)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.g.g=u,t.g.i=a,Ft(e,n,o,i,void 0),!0}function Gt(t){wt.call(this,t)}function Kt(t,e){var n=Mt(t,1);if(null!=n&&null!=n){tt(e.g,8);var i=e.g;if(0<=n)tt(i,n);else{for(var r=0;9>r;r++)$(i,127&n|128),n>>=7;$(i,1)}}zt(e,t,2),null!=(i=Mt(t,3))&&ut(e,3,C(i)),null!=(i=Mt(t,4))&&ut(e,4,C(i)),It(t,e)}function qt(t,e){return Ct(t,e,bt||(bt={1:Ut,2:Bt,3:Ht,4:Ht}))}function Yt(t){wt.call(this,t,-1,Jt)}function Wt(t,e){return Ct(t,e,xt||(xt={1:[Vt,Gt,qt]}))}wt.prototype.toJSON=function(){return vt(Pt(this),mt)},wt.prototype.toString=function(){return Pt(this).toString()},d(Gt,wt),d(Yt,wt),Yt.prototype.addClassification=function(t,e){return Ft(this,1,t,Gt,e),this};var Xt,Qt,Jt=[1];function Zt(t){wt.call(this,t)}function $t(t,e){zt(e,t,1),zt(e,t,2),zt(e,t,3),zt(e,t,4),zt(e,t,5),It(t,e)}function te(t,e){return Ct(t,e,Xt||(Xt={1:Bt,2:Bt,3:Bt,4:Bt,5:Bt}))}function ee(t){wt.call(this,t,-1,re)}function ne(t,e){return Ct(t,e,Qt||(Qt={1:[Vt,Zt,te]}))}d(Zt,wt),d(ee,wt);var ie,re=[1];function oe(t){wt.call(this,t)}function ae(t,e){zt(e,t,1),zt(e,t,2),zt(e,t,3),zt(e,t,4),zt(e,t,5);var n=Mt(t,6);if(null!=n&&null!=n){tt(e.g,48);var i=e.g,r=n;n=0>r;var o=(r=Math.abs(r))>>>0;for(r=Math.floor((r-o)/4294967296),r>>>=0,n&&(r=~r>>>0,4294967295<(o=1+(~o>>>0))&&(o=0,4294967295<++r&&(r=0))),n=q=o,o=r;0<o||127<n;)$(i,127&n|128),n=(n>>>7|o<<25)>>>0,o>>>=7;$(i,n)}It(t,e)}function se(t,e){return Ct(t,e,ie||(ie={1:Bt,2:Bt,3:Bt,4:Bt,5:Bt,6:Dt}))}function ue(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function le(t){return At(t,Gt,1).map((function(t){return{index:Ot(t,1),X:_t(t,2),label:null!=Mt(t,3)?Rt(t,3):void 0,displayName:null!=Mt(t,4)?Rt(t,4):void 0}}))}function he(t){return{x:_t(t,1),y:_t(t,2),z:_t(t,3),visibility:null!=Mt(t,4)?_t(t,4):void 0}}function ce(t){return At(Nt(t,ee,ne),Zt,1).map(he)}function fe(t,e){this.h=t,this.g=e,this.l=0}function pe(t,e,n){return function(t,e){var n=t.g;if(void 0===t.m){var i=ue(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=ue(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,i),n.attachShader(o,r),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));i=t.m=o,n.useProgram(i),r=n.getUniformLocation(i,"sampler0"),t.j={I:n.getAttribLocation(i,"aVertex"),H:n.getAttribLocation(i,"aTex"),da:r},t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.I),n.vertexAttribPointer(t.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.enableVertexAttribArray(t.j.H),n.vertexAttribPointer(t.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(r,0)}i=t.j,n.useProgram(t.m),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(i.I),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(i.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i.H),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.vertexAttribPointer(i.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(i.I),n.disableVertexAttribArray(i.H),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}(t,e),"function"==typeof t.g.canvas.transferToImageBitmap?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.g.canvas):(void 0===t.i&&(t.i=document.createElement("canvas")),new Promise((function(e){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),e(t.i)})))}function de(t){this.g=t}d(oe,wt);var ge=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function me(t,e){return e+t}function ye(t,e){window[t]=e}function ve(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||me,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=e,t.options)for(var n=(e=s(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var i=t.options[n].default;void 0!==i&&(this.j[n]="function"==typeof i?i():i)}}function we(t){var e,n,i,r,o,a,s,l,h,c,f;return T((function(p){switch(p.g){case 1:return t.R?(e=void 0===t.g.files?[]:"function"==typeof t.g.files?t.g.files(t.j):t.g.files,v(p,T((function(t){switch(t.g){case 1:return t.m=2,v(t,WebAssembly.instantiate(ge),4);case 4:t.g=3,t.m=0;break;case 2:return t.m=0,t.j=null,t.return(!1);case 3:return t.return(!0)}})),2)):p.return();case 2:if(n=p.h,"object"==typeof window)return ye("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),ye("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),a=e.filter((function(t){return void 0!==t.data})),s=e.filter((function(t){return void 0===t.data})),l=Promise.all(a.map((function(e){var n=be(t,e.url);if(void 0!==e.path){var i=e.path;n=n.then((function(e){return t.overrideFile(i,e),Promise.resolve(e)}))}return n}))),h=Promise.all(s.map((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){var e,n,i;return T((function(r){if(1==r.g)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,i=t,v(r,e(n),2);i.h=r.h,r.g=0}))})),c=T((function(e){return t.g.graph&&t.g.graph.url?e=v(e,be(t,t.g.graph.url),0):(e.g=0,e=void 0),e})),v(p,Promise.all([h,l,c]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return i=e.filter((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,u(i)),r=t,v(p,createMediapipeSolutionsWasm(Module),6);case 6:r.h=p.h,t.l=new OffscreenCanvas(1,1),t.h.canvas=t.l,o=t.h.GL.createContext(t.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.h.GL.makeContextCurrent(o),p.g=4;break;case 7:if(t.l=document.createElement("canvas"),!(f=t.l.getContext("webgl2",{}))&&!(f=t.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();t.D=f,t.h.canvas=t.l,t.h.createContext(t.l,!0,!0,{});case 4:t.i=new t.h.SolutionWasm,t.R=!1,p.g=0}}))}function be(t,e){var n,i;return T((function(r){return e in t.F?r.return(t.F[e]):(n=t.locateFile(e,""),i=fetch(n).then((function(t){return t.arrayBuffer()})),t.F[e]=i,r.return(i))}))}function xe(t,e,n){var i,r,o,a,u,l,h,c,f,p,d,g,m,y;return T((function(w){switch(w.g){case 1:if(!n)return w.return(e);for(i={},r=0,o=s(Object.keys(n)),a=o.next();!a.done;a=o.next())u=a.value,"string"!=typeof(l=n[u])&&"texture"===l.type&&void 0!==e[l.stream]&&++r;1<r&&(t.G=!1),h=s(Object.keys(n)),a=h.next();case 2:if(a.done){w.g=4;break}if(c=a.value,"string"==typeof(f=n[c]))return m=i,y=c,v(w,function(t,e,n){var i;return T((function(r){return"number"==typeof n||n instanceof Uint8Array||n instanceof t.h.Uint8BlobList?r.return(n):n instanceof t.h.Texture2dDataOut?((i=t.s[e])||(i=new fe(t.h,t.D),t.s[e]=i),r.return(pe(i,n,t.G))):r.return(void 0)}))}(t,c,e[f]),14);if(p=e[f.stream],"detection_list"===f.type){if(p){for(var b=p.getRectList(),x=p.getLandmarksList(),k=p.getClassificationsList(),M=[],S=0;S<b.size();++S){var _=Nt(b.get(S),oe,se);_={T:{Y:_t(_,1),Z:_t(_,2),height:_t(_,3),width:_t(_,4),rotation:_t(_,5,0),W:Ot(_,6)},O:ce(x.get(S)),M:le(Nt(k.get(S),Yt,Wt))},M.push(_)}b=M}else b=[];i[c]=b,w.g=7;break}if("proto_list"===f.type){if(p){for(b=Array(p.size()),x=0;x<p.size();x++)b[x]=p.get(x);p.delete()}else b=[];i[c]=b,w.g=7;break}if(void 0===p){w.g=3;break}if("float_list"===f.type){i[c]=p,w.g=7;break}if("proto"===f.type){i[c]=p,w.g=7;break}if("texture"!==f.type)throw Error("Unknown output config type: '"+f.type+"'");return(d=t.s[c])||(d=new fe(t.h,t.D),t.s[c]=d),v(w,pe(d,p,t.G),13);case 13:g=w.h,i[c]=g;case 7:f.transform&&i[c]&&(i[c]=f.transform(i[c])),w.g=3;break;case 14:m[y]=w.h;case 3:a=h.next(),w.g=2;break;case 4:return w.return(i)}}))}function ke(t,e){for(var n=e.name||"$",i=[].concat(u(e.wants)),r=new t.h.StringList,o=s(e.wants),a=o.next();!a.done;a=o.next())r.push_back(a.value);o=t.h.PacketListener.implement({onResults:function(r){for(var o={},a=0;a<e.wants.length;++a)o[i[a]]=r.get(a);var s=t.listeners[n];s&&(t.C=xe(t,o,e.outs).then((function(n){n=s(n);for(var r=0;r<e.wants.length;++r){var a=o[i[r]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(t.C=n)})))}}),t.i.attachMultiListener(r,o),r.delete()}function Te(t){switch(void 0===t&&(t=0),t){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function Me(t){var e=this;t=t||{},this.g=new ve({locateFile:t.locateFile,files:function(t){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:Te(t.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:ce},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:ce},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(t){var n,i,r;return T((function(o){return 1==o.g?(n=Te(t),i="third_party/mediapipe/modules/pose_landmark/"+n,v(o,be(e.g,n),2)):(r=o.h,e.g.overrideFile(i,r),o.return(!0))}))}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(t=ve.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var t=this;return T((function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))},t.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var i=[],r=[],o={},a=s(Object.keys(t)),u=a.next();!u.done;o={K:o.K,L:o.L},u=a.next()){var l=u.value;l in this.j&&this.j[l]===t[l]||(this.j[l]=t[l],void 0!==(u=e[l])&&(u.onChange&&(o.K=u.onChange,o.L=t[l],i.push(function(t){return function(){return T((function(e){if(1==e.g)return v(e,t.K(t.L),2);!0===e.h&&(n.o=!0),e.g=0}))}}(o))),u.graphOptionXref&&(l={valueNumber:1===u.type?t[l]:0,valueBoolean:0===u.type&&t[l],valueString:2===u.type?t[l]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),l),r.push(u))))}0===i.length&&0===r.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(r),this.v=(void 0===this.v?[]:this.v).concat(i))}},t.initialize=function(){var t=this;return T((function(e){return 1==e.g?v(e,we(t),2):3!=e.g?v(e,function(t){var e,n,i,r,o,a,u,l;return T((function(h){if(1==h.g)return t.g.graph&&t.g.graph.url&&t.P===t.g.graph.url?h.return():(t.o=!0,t.g.graph&&t.g.graph.url?(t.P=t.g.graph.url,v(h,be(t,t.g.graph.url),3)):void(h.g=2));for(2!=h.g&&(e=h.h,t.i.loadGraph(e)),n=s(Object.keys(t.B)),i=n.next();!i.done;i=n.next())r=i.value,t.i.overrideFile(r,t.B[r]);if(t.B={},t.g.listeners)for(o=s(t.g.listeners),a=o.next();!a.done;a=o.next())u=a.value,ke(t,u);l=t.j,t.j={},t.setOptions(l),h.g=0}))}(t),3):v(e,function(t){var e,n,i,r,o,a;return T((function(u){switch(u.g){case 1:if(!t.o)return u.return();if(!t.v){u.g=2;break}e=s(t.v),n=e.next();case 3:if(n.done){u.g=5;break}return v(u,(0,n.value)(),4);case 4:n=e.next(),u.g=3;break;case 5:t.v=void 0;case 2:if(t.A){for(i=new t.h.GraphOptionChangeRequestList,r=s(t.A),o=r.next();!o.done;o=r.next())a=o.value,i.push_back(a);t.i.changeOptions(i),i.delete(),t.A=void 0}t.o=!1,u.g=0}}))}(t),0)}))},t.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(t,e){var n,i,r,o,a,u,l,h,c,f=this;return T((function(p){switch(p.g){case 1:return f.g.inputs?(n=1e3*(null==e?performance.now():e),v(p,f.C,2)):p.return();case 2:return v(p,f.initialize(),3);case 3:for(i=new f.h.PacketDataList,r=s(Object.keys(t)),o=r.next();!o.done;o=r.next())if(a=o.value,u=f.g.inputs[a]){t:{var d=t[a];switch(u.type){case"video":var g=f.m[u.stream];if(g||(g=new fe(f.h,f.D),f.m[u.stream]=g),0===g.l&&(g.l=g.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement)var m=d.videoWidth,y=d.videoHeight;else"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement?(m=d.naturalWidth,y=d.naturalHeight):(m=d.width,y=d.height);y={glName:g.l,width:m,height:y},(m=g.g).canvas.width=y.width,m.canvas.height=y.height,m.activeTexture(m.TEXTURE0),g.h.bindTexture2d(g.l),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,d),g.h.bindTexture2d(0),g=y;break t;case"detections":for((g=f.m[u.stream])||(g=new de(f.h),f.m[u.stream]=g),g.data||(g.data=new g.g.DetectionListData),g.data.reset(d.length),y=0;y<d.length;++y){m=d[y];var w=g.data,b=w.setBoundingBox,x=y,k=m.T,T=new oe;if(Et(T,1,k.Y),Et(T,2,k.Z),Et(T,3,k.height),Et(T,4,k.width),Et(T,5,k.rotation),Et(T,6,k.W),k=jt(T,ae),b.call(w,x,k),m.O)for(w=0;w<m.O.length;++w){var M=!!(T=m.O[w]).visibility;x=(b=g.data).addNormalizedLandmark,k=y,T=Object.assign(Object.assign({},T),{visibility:M?T.visibility:0}),Et(M=new Zt,1,T.x),Et(M,2,T.y),Et(M,3,T.z),T.visibility&&Et(M,4,T.visibility),T=jt(M,$t),x.call(b,k,T)}if(m.M)for(w=0;w<m.M.length;++w)x=(b=g.data).addClassification,k=y,T=m.M[w],Et(M=new Gt,2,T.X),T.index&&Et(M,1,T.index),T.label&&Et(M,3,T.label),T.displayName&&Et(M,4,T.displayName),T=jt(M,Kt),x.call(b,k,T)}g=g.data;break t;default:g={}}}switch(l=g,h=u.stream,u.type){case"video":i.pushTexture2d(Object.assign(Object.assign({},l),{stream:h,timestamp:n}));break;case"detections":(c=l).stream=h,c.timestamp=n,i.pushDetectionList(c);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return f.i.send(i),v(p,f.C,4);case 4:i.delete(),p.g=0}}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},_("Solution",ve),_("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=Me.prototype).reset=function(){this.g.reset()},t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(t){this.g.onResults(t)},t.initialize=function(){var t=this;return T((function(e){return v(e,t.g.initialize(),0)}))},t.send=function(t,e){var n=this;return T((function(i){return v(i,n.g.send(t,e),0)}))},t.setOptions=function(t){this.g.setOptions(t)},_("Pose",Me),_("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),_("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),_("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),_("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),_("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),_("VERSION","0.5.1635988162")}).call(this)},{}]},[]);