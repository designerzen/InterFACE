import{$c5fbe04bc1746de483307477d7b0013$init as e,$c02f97239ce81f7a7e662de49329e4a6$init as t}from"./source.ee3055dd.js";const a=document.documentElement;export const installer=async(n=!1)=>{const s=window.hasOwnProperty("BeforeInstallPromptEvent");let o,l,i=!1,r=!1,c=!1,d=[];const p=navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")||navigator.userAgent.includes("Macintosh")&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,u=()=>new Promise((e,t)=>{c=!1,e()});document.addEventListener("keyup",e=>{"Escape"===e.key&&u()});const m=()=>navigator.standalone?navigator.standalone:!!matchMedia("(display-mode: standalone)").matches,h=async()=>{try{const t=await fetch("./manifest.webmanifest"),a=await t.json();if(l=a,a)return(e=a).icons&&e.icons[0]?e.name?e.description||console.error("Your web manifest must have a description listed"):console.error("Your web manifest must have a name listed"):console.error("Your web manifest must have atleast one icon listed"),a}catch(e){return null}var e},g=async n=>{const c=s&&d.length<1&&(r||p);if(r&&"standalone"in navigator&&!1===navigator.standalone||c&&!1===i){await(async()=>{try{await h()}catch(e){console.error("Error getting manifest, check that you have a valid web manifest")}"getInstalledRelatedApps"in navigator&&(d=await navigator.getInstalledRelatedApps())})();console.log("Application is currently ",m()?"installed":"not installed"),console.log({manifestdata:l}),a.classList.add(m()?"installed":"not-installed");const s=document.createElement("button");return s.classList.add("install-app"),s.setAttribute("aria-label","Click to install ".concat(l.short_name," Version ").concat(e().VERSION)),s.style.setProperty("--logo","url(".concat(l.icons[0].src,")")),s.innerHTML="Install App",t().addTooltip(s),t().setToast("This App can be installed!<br> Click the orange button on the left"),s.addEventListener("click",async()=>{t().setFeedback("Installing",0);try{const e=await(async()=>new Promise(async(e,t)=>{if(o){o.prompt(),await u();"accepted"===(await o.userChoice).outcome?(console.log("Your PWA has been installed"),i=!0,e(!0)):(console.log("User chose to not install"),i=!1,e(!1))}else t("no prompt cached")}))();t().setToast(e?"The App was installed":"Maybe some other time"),e?document.querySelector(".install-app").style.display="none":s.classList.add("later")}catch(e){t().setToast("The App was not installed")}}),(n=n||a).appendChild(s),!0}return a.classList.add(i?"installed":"not-installed"),console.log("Application not installable",{showInstaller:c,installed:i},m()?"installed":"not-installed"),console.error({isSupportingBrowser:s,relatedApps:d,hasPrompt:r,isIOS:p}),!1};return window.addEventListener("beforeinstallprompt",e=>{o=e,r=!0,e.preventDefault(),n||p||g()},{once:!0}),!n&&p&&window.addEventListener("load",async e=>{g()},{once:!0}),g};
//# sourceMappingURL=install.22ef6dfe.js.map
