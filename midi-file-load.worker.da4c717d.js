var V=(A,F)=>()=>(F||A((F={exports:{}}).exports,F),F.exports);var v=V((Y,U)=>{(function(A,F,n,t,b){var y=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},f=typeof y[t]=="function"&&y[t],_=f.cache||{},O=typeof U!="undefined"&&typeof U.require=="function"&&U.require.bind(U);function D(I,w){if(!_[I]){if(!A[I]){var L=typeof y[t]=="function"&&y[t];if(!w&&L)return L(I,!0);if(f)return f(I,!0);if(O&&typeof I=="string")return O(I);var R=new Error("Cannot find module '"+I+"'");throw R.code="MODULE_NOT_FOUND",R}a.resolve=o,a.cache={};var s=_[I]=new D.Module(I);A[I][0].call(s.exports,a,s,s.exports,this)}return _[I].exports;function a(d){var l=a.resolve(d);return l===!1?{}:D(l)}function o(d){var l=A[I][1][d];return l??d}}function u(I){this.id=I,this.bundle=D,this.exports={}}D.isParcelRequire=!0,D.Module=u,D.modules=A,D.cache=_,D.parent=f,D.register=function(I,w){A[I]=[function(L,R){R.exports=w},{}]},Object.defineProperty(D,"root",{get:function(){return y[t]}}),y[t]=D;for(var c=0;c<F.length;c++)D(F[c]);if(n){var g=D(n);typeof Y=="object"&&typeof U!="undefined"?U.exports=g:typeof define=="function"&&define.amd?define(function(){return g}):b&&(this[b]=g)}})({"4sCyq":[function(A,F,n){var t=A("./midi-file-load");self.onmessage=b=>{console.error("MIDI:Worker",b);const y=b.data;switch(y.command){case"loadMIDIFile":(0,t.loadMIDIFile)(y.url,y.options).then(f=>{console.error("MIDI:Worker loaded",{url:y.url,midi:f}),postMessage({event:y.command,midi:f})});break;case"loadMIDIFileThroughClient":(0,t.loadMIDIFileThroughClient)(y.url,y.options).then(f=>{console.error("MIDI:Worker loaded",{url:y.url,midi:f}),postMessage({event:y.command,midi:f})});break}}},{"./midi-file-load":"f9vVY"}],f9vVY:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"loadMIDIFromFile",()=>I),t.export(n,"loadMIDIFile",()=>L),t.export(n,"loadMIDIFileThroughClient",()=>R);var b=A("./midi-stream"),y=t.interopDefault(b),f=A("./midi-decode"),_=A("../../utils");const O=s=>{const a=[];for(let o=0,d=s.length;o<d;++o)a[o]=String.fromCharCode(s.charCodeAt(o)&255);return a.join("")},D=s=>Array.prototype.map.call(s,a=>String.fromCharCode(a)).join(""),u=s=>typeof window=="object"&&typeof document=="object"&&window.document===document?window.atob:D((0,_.base64DecToArr)(s)),c=async(s,a={},o=null)=>new Promise((d,l)=>{try{const p=D(new Uint8Array(s)),r=new y.default(p);d((0,f.decodeMIDI)(r,a))}catch(p){l(p)}}),g=async(s,a={},o=null)=>new Promise((d,l)=>{try{const p=s.split(",")[1],r=u(p),e=new y.default(r);d((0,f.decodeMIDI)(e,a))}catch(p){l(p)}}),I=(s,a={},o=null)=>new Promise((d,l)=>{const p=new XMLHttpRequest;p.open("GET",s,!0),p.responseType="arraybuffer",p.onerror=r=>l(r),p.onreadystatechange=r=>{if(p.readyState===4&&p.status===200){const e=p.response;if(e){const T=new Uint8Array(e),E=c(T,a,o);d(E)}}},p.send(null)}),w=(s,a,o=!0)=>new Promise((d,l)=>{const p=new FileReader;p.onload=r=>d(p.result),p.onprogress=r=>a&&a(r),p.onerror=r=>l(p.error),o?p.readAsDataURL(s):p.readAsArrayBuffer(s)}),L=(s,a={},o=null)=>new Promise(async(d,l)=>{const p=typeof s=="string";let r;p?(s.indexOf("base64,")===-1?r=await I(s,a,o):r=await g(s,a,o),console.error("loadMIDIFile via BASE64",{urlOrBlob:s,midiFile:r})):(r=await c(s,a,o),console.error("loadMIDIFile via ArrayBuffer",{urlOrBlob:s,midiFile:r})),d(r)}),R=async(s,a,o,d=!1)=>{const l=await w(s,o,d);return await L(l,{...a,trackName:s.name.split(".mid")[0].replace("_"," ")},o)}},{"./midi-stream":"lAHzI","./midi-decode":"HWbDn","../../utils":"jKVGE","@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],lAHzI:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n);class b{position=0;str;constructor(f){this.str=f}read(f){const _=this.str.substr(this.position,f);return this.position+=f,_}readInt32(){const f=(this.str.charCodeAt(this.position)<<24)+(this.str.charCodeAt(this.position+1)<<16)+(this.str.charCodeAt(this.position+2)<<8)+this.str.charCodeAt(this.position+3);return this.position+=4,f}readInt16(){const f=(this.str.charCodeAt(this.position)<<8)+this.str.charCodeAt(this.position+1);return this.position+=2,f}readInt8(f=!1){const _=this.str.charCodeAt(this.position);return f&&_>127&&(_-=256),this.position+=1,_}readVarInt(){let f=0;for(;;){const _=this.readInt8(!1);if(_&128)f+=_&127,f<<=7;else return f+_}}eof(){return this.position>=this.str.length}}n.default=b},{"@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],f4L6P:[function(A,F,n){n.interopDefault=function(t){return t&&t.__esModule?t:{default:t}},n.defineInteropFlag=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.exportAll=function(t,b){return Object.keys(t).forEach(function(y){y==="default"||y==="__esModule"||b.hasOwnProperty(y)||Object.defineProperty(b,y,{enumerable:!0,get:function(){return t[y]}})}),b},n.export=function(t,b,y){Object.defineProperty(t,b,{enumerable:!0,get:y})}},{}],HWbDn:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"decodeMIDI",()=>p);var b=A("./midi-stream"),y=t.interopDefault(b),f=A("./midi-command"),_=t.interopDefault(f),O=A("./midi-track"),D=t.interopDefault(O),u=A("./midi-commands"),c=A("../notes");const g="time-code-based",I="metrical";let w;const L=(r,e=4)=>{const T={};return T.id=r.read(e),T.length=r.readInt32(),T.data=r.read(T.length),T},R=r=>((r&65280)>>8^255)+1,s=(r,e={})=>{const T=L(r),E=T.id;if(E!=="MThd"&&E!=="MTrk"||T.length!==6)throw".mid file could not be read - header chunk 'MThd'/'MTrk' was not found";const N=new y.default(T.data),i=N.readInt16(),h=N.readInt16(),m=N.readInt16(),C=m&32768,P=C?g:I;switch(E){case"MThd":const x={};return P===g?(x.ticksPerFrame=m&255,x.framesPerSecond=R(m)):x.ticksPerQuarterNote=m&32767,{formatType:i,trackCount:h,timeDivision:m,isTimeCodeBased:C,timeCodeType:P,division:x};case"MTrk":return{formatType:i,trackCount:h,timeDivision:m,isTimeCodeBased:C,timeCodeType:P}}},a=(r,e)=>{const T=r.header.trackCount;for(let E=0;E<T;E++){const N=L(e);switch(N.id){case"MTrk":break;case"MThd":throw`Still working on MThd implementation... ${N.id}`;default:throw`Unexpected chunk - expected MTrk, got ${N.id}`}const i=new y.default(N.data);for(;!i.eof();){const h=o(i);r.addEvent(E,h)}}return r},o=r=>{const e=new _.default,T=r.readVarInt(),E=r.readInt8();return e.deltaTime=T,(E&240)==240?l(r,e,E):d(r,e,E)},d=(r,e,T)=>{let E;(T&128)==0?(E=T,T=w):(E=r.readInt8(),w=T);const N=T>>4;switch(e.channel=T&15,e.type=u.TYPE_CHANNEL,N){case 8:return e.subtype=u.COMMAND_NOTE_OFF,e.noteNumber=E,e.noteName=(0,c.convertMIDINoteNumberToName)(E),e.velocity=r.readInt8(),e;case 9:return e.noteNumber=E,e.noteName=(0,c.convertMIDINoteNumberToName)(E),e.velocity=r.readInt8(),e.velocity===0?e.subtype=u.COMMAND_NOTE_OFF:e.subtype=u.COMMAND_NOTE_ON,e;case 10:return e.subtype=u.COMMAND_NOTE_AFTER_TOUCH,e.noteNumber=E,e.noteName=(0,c.convertMIDINoteNumberToName)(E),e.amount=r.readInt8(),e;case 11:return e.subtype=u.COMMAND_CONTROLLER,e.controllerType=E,e.value=r.readInt8(),e;case 12:return e.subtype=u.COMMAND_PROGRAM_CHANGE,e.programNumber=E,e;case 13:return e.subtype=u.COMMAND_CHANNEL_AFTER_TOUCH,e.amount=E,e;case 14:return e.subtype=u.COMMAND_PITCH_BEND,e.value=E+(r.readInt8()<<7),e;default:throw"Unrecognised MIDI event type: "+N}},l=(r,e,T)=>{if(T===255){e.type=u.TYPE_META;const E=r.readInt8(),N=r.readVarInt();switch(E){case 0:if(e.subtype="sequenceNumber",N!==2)throw"Expected length for sequenceNumber event is 2, got "+N;return e.sequenceNumber=r.readInt16(),e;case 1:return e.subtype="text",e.text=r.read(N),e;case 2:return e.subtype="copyrightNotice",e.text=r.read(N),e;case 3:return e.subtype="trackName",e.text=r.read(N),e;case 4:return e.subtype="instrumentName",e.text=r.read(N),e;case 5:return e.subtype="lyrics",e.text=r.read(N),e;case 6:return e.subtype="marker",e.text=r.read(N),e;case 7:return e.subtype="cuePoint",e.text=r.read(N),e;case 32:if(e.subtype="midiChannelPrefix",N!==1)throw"Expected length for midiChannelPrefix event is 1, got "+N;return e.channel=r.readInt8(),e;case 47:if(e.subtype="endOfTrack",N!==0)throw"Expected length for endOfTrack event is 0, got "+N;return e;case 81:if(e.subtype="setTempo",N!==3)throw"Expected length for setTempo event is 3, got "+N;return e.microsecondsPerBeat=(r.readInt8()<<16)+(r.readInt8()<<8)+r.readInt8(),e;case 84:if(e.subtype="smpteOffset",N!==5)throw"Expected length for smpteOffset event is 5, got "+N;const i=r.readInt8();return e.frameRate={0:24,32:25,64:29,96:30}[i&96],e.hour=i&31,e.min=r.readInt8(),e.sec=r.readInt8(),e.frame=r.readInt8(),e.subframe=r.readInt8(),e;case 88:if(e.subtype="timeSignature",N!==4)throw"Expected length for timeSignature event is 4, got "+N;return e.numerator=r.readInt8(),e.denominator=Math.pow(2,r.readInt8()),e.metronome=r.readInt8(),e.thirtyseconds=r.readInt8(),e;case 89:if(e.subtype="keySignature",N!==2)throw"Expected length for keySignature event is 2, got "+N;return e.key=r.readInt8(!0),e.scale=r.readInt8(),e;case 127:return e.subtype="sequencerSpecific",e.data=r.read(N),e;default:return e.subtype="unknown",e.data=r.read(N),e}}else if(T===240){e.type=u.TYPE_SYSTEM_EXCLUSIVE;const E=r.readVarInt();return e.data=r.read(E),e}else if(T===247){e.type=u.TYPE_DIVIDED_SYSTEM_EXCLUSIVE;const E=r.readVarInt();return e.data=r.read(E),e}else throw"Unrecognised MIDI event type byte: "+T},p=(r,e={})=>{const T=s(r),E=new D.default(T,e);return a(E,r)}},{"./midi-stream":"lAHzI","./midi-command":"94cVd","./midi-track":"68H7N","./midi-commands":"lCwXv","../notes":"eLuxy","@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],"94cVd":[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n);class b{raw;time=0;timeCode=0;deltaTime;frameRate;channel;type;subtype;text;data;hour;min;sec;frame;subframe;microsecondsPerBeat;key;scale;numerator;denominator;metronome;thirtyseconds;amount;noteNumber;noteName;velocity;value;controllerType;programNumber;sequenceNumber;constructor(){}toString(){let f=`${this.time}. MIDI:Input::${this.subtype} Type:${this.type}`;return this.channel&&(f+=` [Channel ${this.channel}] `),this.noteNumber&&(f+=` Note:${this.noteNumber} -> ${this.noteName}`),this.velocity&&(f+=` Velocity:${this.velocity}`),f+`
`}}n.default=b},{"@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],"68H7N":[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n);var b=A("./general-midi"),y=A("./midi-command"),f=t.interopDefault(y),_=A("./midi-commands");class O{header;tracks=[];commands=[];instruments=[];noteOnCommands=[];trackName="";meta="";copyrightNotice="Copyright held by respective owners";lyrics="";trackPosition=0;commandPosition=0;duration=0;mimeType="audio/mid";get ticksPerBeat(){}get tempo(){}get timeSignature(){return[4,4]}getMatchingCommands(u=[_.COMMAND_NOTE_ON],c="channel"){return typeof u===String&&(u=[u]),this.commands.filter(g=>g.type===c?u.indexOf(g.subtype)>-1:!1)}getNextNoteCommand(){const u=[];let c=this.tracks[++this.trackPosition];for(;c&&c.subtype!==_.COMMAND_NOTE_ON||c.subtype!==_.COMMAND_NOTE_OFF;)c=this.tracks[++this.trackPosition];for(;c&&(c.subtype===_.COMMAND_NOTE_ON||c.subtype===_.COMMAND_NOTE_OFF);)u.push(c),c=this.tracks[++this.trackPosition];return u}getNextNoteOnCommand(){const u=[];let c=this.tracks[++this.trackPosition];for(;c&&c.subtype===_.COMMAND_NOTE_ON;)u.push(c),c=this.tracks[++this.trackPosition];return u}getNextCommands(){return this.tracks[++this.trackPosition]}getNextNoteOnCommand(){return this.noteOnCommands[++this.commandPosition]}getDurationUntilNextCommand(){const u=this.tracks[this.trackPosition+1];return u?u.deltaTime:-1}convertTimeToFraction(u){return u.time/this.duration}copyCommand(u){const c=new f.default;for(let g in u)c[g]=u[g];return c}constructor(u=null,c={}){u&&(this.header=u);for(let g in c)switch(g){case"commands":case"noteOnCommands":this[g]=c[g].map(I=>this.copyCommand(I));break;default:this[g]=c[g],console.log(g,this[g])}}addEvent(u,c){const g=this.commands[this.commands.length-1];if(c.type===_.TYPE_META)switch(c.subtype){case"trackName":c.text&&c.text!=="Untitled"&&(this[c.subtype]=c.text);break;case"text":case"copyrightNotice":case"lyrics":c.text&&(this[c.subtype]+=c.text);break;default:c.text&&(this.meta+=c.text)}else{switch(c.subtype){case _.COMMAND_PROGRAM_CHANGE:const I=b.GENERAL_MIDI_INSTRUMENTS[c.programNumber];this.instruments.push(I);break}if(c.subtype,_.COMMAND_NOTE_ON,_.COMMAND_NOTE_OFF,_.COMMAND_CONTROLLER,_.COMMAND_PITCH_BEND,_.COMMAND_PROGRAM_CHANGE,_.COMMAND_CHANNEL_AFTER_TOUCH,!g)this.tracks.push([c]);else if(c.deltaTime===0){const I=g.timeCode;c.timeCode=I,c.time=this.duration,this.tracks[this.tracks.length-1].push(c)}else this.duration+=c.deltaTime||0,c.timeCode=c.deltaTime,c.time=this.duration,this.tracks.push([c]);switch(this.commands.push(c),c.subtype){case _.COMMAND_NOTE_ON:this.noteOnCommands.push(c)}}}toString(){return`MIDI:Track::${this.commands.map(u=>u.toString()).join(", ")}`}commandToJSON(u){let c=`${u.time}. MIDI:Input::${u.subtype} Type:${u.type}`;return u.channel&&(c+=` [Channel ${u.channel}] `),u.noteNumber&&(c+=` Note:${u.noteNumber} -> ${u.noteName}`),u.velocity&&(c+=` Velocity:${u.velocity}`),c}toJSON(){return this.commands.map(c=>commandToJSON(c))}}n.default=O},{"./general-midi":"9Iyi7","./midi-command":"94cVd","./midi-commands":"lCwXv","@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],"9Iyi7":[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"GENERAL_MIDI_INSTRUMENTS",()=>b),t.export(n,"GENERAL_MIDI_INSTRUMENT_FAMILY_NAMES",()=>y),t.export(n,"GENERAL_MIDI_INSTRUMENT_FAMILY_IDS",()=>f),t.export(n,"GENERAL_MIDI_FAMILIES",()=>_),t.export(n,"GENERAL_MIDI_INSTRUMENT_FAMILIES",()=>O),t.export(n,"FAMILY_DICTIONARY",()=>D),t.export(n,"DrumKitByPatchID",()=>c);const b=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],y=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","ethnic","percussive","sound effects"],f={0:"piano",7:"chromatic percussion",12:"organ",25:"guitar",33:"bass",41:"strings",49:"ensemble",57:"brass",65:"reed",69:"pipe",81:"synth lead",89:"synth pad",97:"synth effects",105:"ethnic",113:"percussive",123:"sound effects"},_=new Map,O={},D={};let u=f[0];b.forEach((g,I)=>{f[I]&&(u=f[I]),_.set(u,[..._.get(u)||[],g]),D[g]=u});const c={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},{"@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],lCwXv:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"TYPE_CHANNEL",()=>b),t.export(n,"TYPE_META",()=>y),t.export(n,"TYPE_SYSTEM_EXCLUSIVE",()=>f),t.export(n,"TYPE_DIVIDED_SYSTEM_EXCLUSIVE",()=>_),t.export(n,"COMMAND_NOTE_OFF",()=>O),t.export(n,"COMMAND_NOTE_ON",()=>D),t.export(n,"COMMAND_NOTE_AFTER_TOUCH",()=>u),t.export(n,"COMMAND_CONTROLLER",()=>c),t.export(n,"COMMAND_PROGRAM_CHANGE",()=>g),t.export(n,"COMMAND_CHANNEL_AFTER_TOUCH",()=>I),t.export(n,"COMMAND_CHANNEL_PRESSURE",()=>w),t.export(n,"COMMAND_PITCH_BEND",()=>L),t.export(n,"COMMAND_SYSTEM_MESSAGE",()=>R),t.export(n,"COMMANDS",()=>s);const b="channel",y="meta",f="sysEx",_="dividedSysEx",O="noteOff",D="noteOn",u="noteAftertouch",c="controller",g="programChange",I="channelAftertouch",w="channelPressure",L="pitchBend",R="systemMessage",s=[O,D,u,c,g,w,L,R]},{"@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],eLuxy:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"SOLFEGE_SCALE",()=>g),t.export(n,"noteNumberToFrequency",()=>l),t.export(n,"createInstrumentBanks",()=>r),t.export(n,"NOTE_NAMES",()=>E),t.export(n,"getNoteName",()=>i),t.export(n,"getNoteSound",()=>h),t.export(n,"getFriendlyNoteName",()=>m),t.export(n,"convertNoteNameToMIDINoteNumber",()=>C),t.export(n,"convertMIDINoteNumberToName",()=>P),t.export(n,"noteNumberToFrequencyFast",()=>x),t.export(n,"frequencyToNoteNumber",()=>z);var b=A("../maths/maths"),y=A("../utils");const f=["A","Ab","B","Bb","C","D","Db","E","Eb","F","G","Gb"],_=["Ab","Bb","Db","Eb","Gb"],O=["A","B","C","D","E","F","G"],D=_.length-1,u=O.length-1,c=f.length,g=["Doe","Ray","Me","Far","Sew","La","Tea"],I={},w={},L=[],R=[],s=[],a=[],o=[],d=[],l=M=>{const S=(M-69)/12;return 440*S*S},p=(M=0,S=0)=>{const k=M+S;return f[k<0?c+k:k%c]},r=(M="mp3",S=".")=>{const k=[];for(let j=0;j<f.length;++j){const H=f[j];H==="A"?k.push(`A0${S}${M}`):H==="B"&&k.push(`B0${S}${M}`);for(let G=1;G<8;++G)k.push(`${H}${G}${S}${M}`);H==="C"&&k.push(`C8${S}${M}`)}return k},e=M=>{const S=M.charAt(0),k=parseInt(M.charAt(M.length-1));return{key:S,octave:k}},T=M=>{const{key:S,octave:k}=e(M);return M=M.replace(k,`-${k}`),M=M.replace("b","#"),M},E=r("",""),N=E.map(M=>T(M));for(let M=0;M<127;M++){const S=(M/c|0)-1,k=p(M%c,4),j=`${k}${S}`,H=T(j);w[j]=H,I[j]=M,s[M]=j,a[M]=H,L[M]={octave:S,key:k},o[M]=l(M);const G=E.indexOf(j)>-1;d[M]=G?j:"UNKNOWN"}const i=(M,S=3,k=!1)=>{let j,H;return k?(j=Math.floor(M*D),H=_[j]):(j=Math.floor(M*u),H=O[j]),`${H}${(0,b.clamp)(S,1,7)}`},h=(M,S=!1)=>g[Math.floor(M*(g.length-1))],m=M=>w[M]||M,C=M=>I[M],P=M=>d[M],x=(0,y.memoize)(l),$=Math.log(2),z=M=>{const S=Math.log(M/440)/$;return Math.round(12*S+69)}},{"../maths/maths":"bExI4","../utils":"jKVGE","@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],bExI4:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"TAU",()=>b),t.export(n,"HALF_PI",()=>y),t.export(n,"TWO_PI",()=>f),t.export(n,"range",()=>c),t.export(n,"rangeRounded",()=>g),t.export(n,"rescale",()=>I),t.export(n,"determineAngle",()=>w),t.export(n,"distance3D",()=>L),t.export(n,"distance2D",()=>R),t.export(n,"hypoteneuse2D",()=>s),t.export(n,"hypoteneuse3D",()=>a),t.export(n,"add3D",()=>o),t.export(n,"subtract3D",()=>d),t.export(n,"multiply3D",()=>l),t.export(n,"cross3D",()=>p),t.export(n,"divide3D",()=>r),t.export(n,"lerp",()=>e),t.export(n,"clamp",()=>T),t.export(n,"twist",()=>E),t.export(n,"round",()=>N);const b=2*Math.PI,y=Math.PI*.5,f=Math.PI*2,{PI:_,sqrt:O,atan2:D,tan:u}=Math,c=(i,h,m,C,P)=>{const x=(i-h)*(P-C)/(m-h)+C;return x<C?C:x>P?P:x},g=(i,h,m,C,P)=>{const x=Math.round((i-h)*(P-C)/(m-h)+C);return x<C?C:x>P?P:x},I=(i=0,h=1)=>{const m=1/(h-i);return C=>m*(C-i)},w=(i,h)=>{const m=i.y-h.y,C=h.x-i.x;return D(m,C)},L=(i,h,m,C,P,x)=>O((i-h)**2+(m-C)**2+(P-x)**2),R=(i,h,m,C)=>O((i-m)**2+(h-C)**2),s=(i,h)=>O((i.x-h.x)**2+(i.y-h.y)**2),a=(i,h)=>O((i.x-h.x)**2+(i.y-h.y)**2+(i.z-h.z)**2),o=(i,h,m={})=>(m.x=i.x+h.x,m.y=i.y+h.y,m.z=i.z+h.z,m),d=(i,h,m={})=>(m.x=i.x-h.x,m.y=i.y-h.y,m.z=i.z-h.z,m),l=(i,h,m={})=>(m.x=i.x*h.x,m.y=i.y*h.y,m.z=i.z*h.z,m),p=(i,h,m={})=>(m.x=i.y*h.z-i.z*h.y,m.y=i.z*h.x-i.x*h.z,m.z=i.x*h.y-i.y*h.x,m),r=(i,h,m={})=>(m.x=i.x/h.x,m.y=i.y/h.y,m.z=i.z/h.z,m),e=(i,h,m)=>(1-m)*i+m*h,T=(i,h,m)=>i>m?m:i<h?h:i,E=(i,h=0)=>(i<0?i=(i+1)*-1:i=1-i,T(i+h,-1,1)),N=i=>.5+i|0},{"@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}],jKVGE:[function(A,F,n){var t=A("@parcel/transformer-js/src/esmodule-helpers.js");t.defineInteropFlag(n),t.export(n,"convertOptionToObject",()=>b),t.export(n,"debounce",()=>y),t.export(n,"memoize",()=>f),t.export(n,"injectJavascript",()=>_),t.export(n,"b64ToUint6",()=>O),t.export(n,"uint6ToB64",()=>D),t.export(n,"decodeBase64",()=>u),t.export(n,"base64DecToArr",()=>c),t.export(n,"base64EncArr",()=>g),t.export(n,"UTF8ArrToStr",()=>I),t.export(n,"strToUTF8Arr",()=>w),t.export(n,"toBytes",()=>L),t.export(n,"toVarLenBytes",()=>R);const b=s=>s.reduce((a,o)=>{const d=o.split(":");return a[d[0]]=parseFloat(d[1]),a},{}),y=(s,a)=>{let o;return(...d)=>(clearTimeout(o),o=setTimeout(()=>s(...d),a),o)},f=s=>{const a=new Map;return(...o)=>{if(a.has(o))return a.get(o);const d=s.apply(void 0,o);return a.set(o,d),d}},_=async s=>new Promise((a,o)=>{const d=document.createElement("script");d.onload=()=>{a(s)},d.onerror=l=>{o(l)},d.src=s,document.head.appendChild(d)}),O=s=>s>64&&s<91?s-65:s>96&&s<123?s-71:s>47&&s<58?s+4:s===43?62:s===47?63:0,D=s=>s<26?s+65:s<52?s+71:s<62?s-4:s===62?43:s===63?47:65,u=(s,a)=>{const o=s.replace(/[^A-Za-z0-9\+\/]/g,""),d=o.length,l=a?Math.ceil((d*3+1>>2)/a)*a:d*3+1>>2,p=new Uint8Array(l);for(let r,e,T=0,E=0,N=0;N<d;N++)if(e=N&3,T|=O(o.charCodeAt(N))<<18-6*e,e===3||d-N==1){for(r=0;r<3&&E<l;r++,E++)p[E]=T>>>(16>>>r&24)&255;T=0}return p},c=(s,a)=>{for(var o=s.replace(/[^A-Za-z0-9\+\/]/g,""),d=o.length,l=a?Math.ceil((d*3+1>>2)/a)*a:d*3+1>>2,p=new Uint8Array(l),r,e,T=0,E=0,N=0;N<d;N++)if(e=N&3,T|=O(o.charCodeAt(N))<<6*(3-e),e===3||d-N==1){for(r=0;r<3&&E<l;r++,E++)p[E]=T>>>(16>>>r&24)&255;T=0}return p},g=s=>{let a=2,o="";for(var d=s.length,l=0,p=0;p<d;p++)a=p%3,p>0&&p*4/3%76==0&&(o+=`\r
`),l|=s[p]<<(16>>>a&24),(a===2||s.length-p==1)&&(o+=String.fromCodePoint(D(l>>>18&63),D(l>>>12&63),D(l>>>6&63),D(l&63)),l=0);return o.substr(0,o.length-2+a)+(a===2?"":a===1?"=":"==")},I=s=>{let a="";for(var o,d=s.length,l=0;l<d;l++)o=s[l],a+=String.fromCodePoint(o>251&&o<254&&l+5<d?(o-252)*1073741824+(s[++l]-128<<24)+(s[++l]-128<<18)+(s[++l]-128<<12)+(s[++l]-128<<6)+s[++l]-128:o>247&&o<252&&l+4<d?(o-248<<24)+(s[++l]-128<<18)+(s[++l]-128<<12)+(s[++l]-128<<6)+s[++l]-128:o>239&&o<248&&l+3<d?(o-240<<18)+(s[++l]-128<<12)+(s[++l]-128<<6)+s[++l]-128:o>223&&o<240&&l+2<d?(o-224<<12)+(s[++l]-128<<6)+s[++l]-128:o>191&&o<224&&l+1<d?(o-192<<6)+s[++l]-128:o);return a},w=s=>{for(var a,o,d=s.length,l=0,p=0;p<d;p++)o=s.codePointAt(p),o>65536&&p++,l+=o<128?1:o<2048?2:o<65536?3:o<2097152?4:o<67108864?5:6;a=new Uint8Array(l);for(var r=0,e=0;r<l;e++)o=s.codePointAt(e),o<128?a[r++]=o:o<2048?(a[r++]=192+(o>>>6),a[r++]=128+(o&63)):o<65536?(a[r++]=224+(o>>>12),a[r++]=128+(o>>>6&63),a[r++]=128+(o&63)):o<2097152?(a[r++]=240+(o>>>18),a[r++]=128+(o>>>12&63),a[r++]=128+(o>>>6&63),a[r++]=128+(o&63),e++):o<67108864?(a[r++]=248+(o>>>24),a[r++]=128+(o>>>18&63),a[r++]=128+(o>>>12&63),a[r++]=128+(o>>>6&63),a[r++]=128+(o&63),e++):(a[r++]=252+(o>>>30),a[r++]=128+(o>>>24&63),a[r++]=128+(o>>>18&63),a[r++]=128+(o>>>12&63),a[r++]=128+(o>>>6&63),a[r++]=128+(o&63),e++);return a},L=(s,a)=>{const o=new Array(a);for(let d=a-1;d>=0;d--)o[d]=s&255,s>>=8;return o},R=s=>{const a=[];let o=!0;do{const d=s&127;s>>=7,o?(a.unshift(d),o=!1):a.unshift(d|128)}while(s>0);return a}},{"@parcel/transformer-js/src/esmodule-helpers.js":"f4L6P"}]},["4sCyq"],"4sCyq","parcelRequireaaed")});export default v();
