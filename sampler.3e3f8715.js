var me=(T,M)=>()=>(M||T((M={exports:{}}).exports,M),M.exports);var pe=me((oe,Q)=>{(function(T,M,w,N,U){var I=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},k=typeof I[N]=="function"&&I[N],S=k.cache||{},F=typeof Q!="undefined"&&typeof Q.require=="function"&&Q.require.bind(Q);function i(m,H){if(!S[m]){if(!T[m]){var G=typeof I[N]=="function"&&I[N];if(!H&&G)return G(m,!0);if(k)return k(m,!0);if(F&&typeof m=="string")return F(m);var B=new Error("Cannot find module '"+m+"'");throw B.code="MODULE_NOT_FOUND",B}L.resolve=K,L.cache={};var W=S[m]=new i.Module(m);T[m][0].call(W.exports,L,W,W.exports,this)}return S[m].exports;function L(Y){var q=L.resolve(Y);return q===!1?{}:i(q)}function K(Y){var q=T[m][1][Y];return q??Y}}function d(m){this.id=m,this.bundle=i,this.exports={}}i.isParcelRequire=!0,i.Module=d,i.modules=T,i.cache=S,i.parent=k,i.register=function(m,H){T[m]=[function(G,B){B.exports=H},{}]},Object.defineProperty(i,"root",{get:function(){return I[N]}}),I[N]=i;for(var v=0;v<M.length;v++)i(M[v]);if(w){var E=i(w);typeof oe=="object"&&typeof Q!="undefined"?Q.exports=E:typeof define=="function"&&define.amd?define(function(){return E}):U&&(this[U]=E)}})({afGxW:[function(T,M,w){var N=T("@parcel/transformer-js/src/esmodule-helpers.js");N.defineInteropFlag(w);var U=T("@webaudiomodules/sdk"),I=T("@webaudiomodules/sdk-parammgr"),k=T("./sampler.wam.js"),S=N.interopDefault(k),F=T("url:./descriptor.json"),i=N.interopDefault(F),d=T("./descriptor.json"),v=N.interopDefault(d);const E="sampler",m=G=>G.substring(0,G.lastIndexOf("/"));class H extends U.WebAudioModule{_baseUrl=m(i.default);_descriptorUrl=i.default;_descriptor=v.default;async initialize(B){return super.initialize(B)}async createAudioNode(B){const W=new S.default(this.audioContext,B),L={gain:1},K=await I.ParamMgrFactory.create(this,{internalParamsConfig:L});return W.setup(K),W}async createGui(){}}w.default=H},{"@webaudiomodules/sdk":"hWxzW","@webaudiomodules/sdk-parammgr":"iUHts","./sampler.wam.js":"3NQx6","url:./descriptor.json":"dDhlP","./descriptor.json":"cyOqT","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],iUHts:[function(T,M,w){var N=T("@parcel/transformer-js/src/esmodule-helpers.js");N.defineInteropFlag(w),N.export(w,"CompositeAudioNode",()=>H),N.export(w,"ParamMgrFactory",()=>de);var U=Object.defineProperty,I=Object.defineProperties,k=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&d(e,r,t[r]);if(S)for(var r of S(t))i.call(t,r)&&d(e,r,t[r]);return e},E=(e,t)=>I(e,k(t)),m=(e,t,r)=>(d(e,typeof t!="symbol"?t+"":t,r),r),H=class extends GainNode{constructor(){super(...arguments);m(this,"_output"),m(this,"_wamNode")}get groupId(){return this.module.groupId}get moduleId(){return this.module.moduleId}get instanceId(){return this.module.instanceId}get module(){return this._wamNode.module}addEventListener(...e){return this._wamNode.addEventListener(...e)}removeEventListener(...e){return this._wamNode.removeEventListener(...e)}dispatchEvent(...e){return this._wamNode.dispatchEvent(...e)}getParameterInfo(...e){return this._wamNode.getParameterInfo(...e)}getParameterValues(...e){return this._wamNode.getParameterValues(...e)}setParameterValues(...e){return this._wamNode.setParameterValues(...e)}getState(){return this._wamNode.getState()}setState(...e){return this._wamNode.setState(...e)}getCompensationDelay(){return this._wamNode.getCompensationDelay()}scheduleEvents(...e){return this._wamNode.scheduleEvents(...e)}clearEvents(){return this._wamNode.clearEvents()}connectEvents(...e){return this._wamNode.connectEvents(...e)}disconnectEvents(...e){return this._wamNode.disconnectEvents(...e)}destroy(){return this._wamNode.destroy()}set channelCount(e){this._output?this._output.channelCount=e:super.channelCount=e}get channelCount(){return this._output?this._output.channelCount:super.channelCount}set channelCountMode(e){this._output?this._output.channelCountMode=e:super.channelCountMode=e}get channelCountMode(){return this._output?this._output.channelCountMode:super.channelCountMode}set channelInterpretation(e){this._output?this._output.channelInterpretation=e:super.channelInterpretation=e}get channelInterpretation(){return this._output?this._output.channelInterpretation:super.channelInterpretation}get numberOfInputs(){return super.numberOfInputs}get numberOfOutputs(){return this._output?this._output.numberOfOutputs:super.numberOfOutputs}get gain(){}connect(...e){return this._output&&this._output!==this?this._output.connect(...e):super.connect(...e)}disconnect(...e){return this._output&&this._output!==this?this._output.disconnect(...e):super.disconnect(...e)}},G=(e,t,...r)=>{const a=`(${t.toString()})(${r.map(c=>JSON.stringify(c)).join(", ")});`,s=URL.createObjectURL(new Blob([a],{type:"text/javascript"}));return e.addModule(s)},B=G,W=(e,t)=>{const r=globalThis,{AudioWorkletProcessor:a,registerProcessor:s,webAudioModules:c}=r,f=r.webAudioModules.getModuleScope(e),P=!!globalThis.SharedArrayBuffer,o=globalThis.SharedArrayBuffer||globalThis.ArrayBuffer,u=(p,n)=>n===0?p:p**1.5**-n,V=(p,n,l,g=0)=>u(n===0&&l===1?p:(p-n)/(l-n)||0,g),h=(p,n,l)=>n===0&&l===1?p:(p-n)/(l-n)||0,O=(p,n,l)=>n===0&&l===1?p:p*(l-n)+n,A=(p,n,l,g,y,C,x)=>O(h(h(Math.min(y,Math.max(g,p)),n,l),h(g,n,l),h(y,n,l)),C,x);class b extends a{static get parameterDescriptors(){return Object.entries(t).map(([n,{defaultValue:l,minValue:g,maxValue:y}])=>({name:n,defaultValue:l,minValue:g,maxValue:y}))}constructor(n){super();this.destroyed=!1,this.supportSharedArrayBuffer=P;const{paramsMapping:l,internalParamsMinValues:g,internalParams:y,groupId:C,instanceId:x}=n.processorOptions;this.groupId=C,this.moduleId=e,this.instanceId=x,this.internalParamsMinValues=g,this.paramsConfig=t,this.paramsMapping=l,this.paramsValues={},Object.entries(t).forEach(([D,{defaultValue:j}])=>{this.paramsValues[D]=j}),this.internalParams=y,this.internalParamsCount=this.internalParams.length,this.buffer=new o((this.internalParamsCount+1)*Float32Array.BYTES_PER_ELEMENT),this.$lock=new Int32Array(this.buffer,0,1),this.$internalParamsBuffer=new Float32Array(this.buffer,4,this.internalParamsCount),this.eventQueue=[],this.handleEvent=null,r.webAudioModules.addWam(this),f.paramMgrProcessors||(f.paramMgrProcessors={}),f.paramMgrProcessors[this.instanceId]=this,this.messagePortRequestId=-1;const _={},z={};this.call=(D,...j)=>new Promise((X,$)=>{const R=this.messagePortRequestId--;_[R]=X,z[R]=$,this.port.postMessage({id:R,call:D,args:j})}),this.handleMessage=({data:D})=>{var j,X;const{id:$,call:R,args:ee,value:ae,error:te}=D;if(R){const Z={id:$};try{Z.value=this[R](...ee)}catch(re){Z.error=re}this.port.postMessage(Z)}else te?(j=z[$])==null||j.call(z,te):(X=_[$])==null||X.call(_,ae),delete _[$],delete z[$]},this.port.start(),this.port.addEventListener("message",this.handleMessage)}setParamsMapping(n){this.paramsMapping=n}getBuffer(){return{lock:this.$lock,paramsBuffer:this.$internalParamsBuffer}}getCompensationDelay(){return 128}getParameterInfo(...n){n.length===0&&(n=Object.keys(this.paramsConfig));const l={};return n.forEach(g=>{l[g]=this.paramsConfig[g]}),l}getParameterValues(n,...l){l.length===0&&(l=Object.keys(this.paramsConfig));const g={};return l.forEach(y=>{if(!(y in this.paramsValues))return;const{minValue:C,maxValue:x,exponent:_}=this.paramsConfig[y],z=this.paramsValues[y];g[y]={id:y,value:n?V(z,C,x,_):z,normalized:n}}),g}scheduleEvents(...n){this.eventQueue.push(...n);const{currentTime:l}=r;this.eventQueue.sort((g,y)=>(g.time||l)-(y.time||l))}emitEvents(...n){c.emitEvents(this,...n)}clearEvents(){this.eventQueue=[]}lock(){globalThis.Atomics&&Atomics.store(this.$lock,0,1)}unlock(){globalThis.Atomics&&Atomics.store(this.$lock,0,0)}process(n,l,g){if(this.destroyed)return!1;const y=1;this.lock(),Object.entries(this.paramsConfig).forEach(([_,{minValue:z,maxValue:D}])=>{const j=g[_];_ in this.paramsValues&&(this.paramsValues[_]=j[j.length-1]),!!this.paramsMapping[_]&&Object.entries(this.paramsMapping[_]).forEach(([X,$])=>{const R=this.internalParams.indexOf(X);if(R===-1)return;const ee=this.internalParamsMinValues[R],{sourceRange:ae,targetRange:te}=$,[Z,re]=ae,[ne,ie]=te;let J;z!==ne||D!==ie||z!==Z||D!==re?J=j.map(se=>A(se,z,D,Z,re,ne,ie)-ee):ee?J=j.map(se=>se-ee):J=j,J.length===1?l[R+y][0].fill(J[0]):l[R+y][0].set(J),this.$internalParamsBuffer[R]=J[0]})}),this.unlock(),this.supportSharedArrayBuffer||this.call("setBuffer",{lock:this.$lock,paramsBuffer:this.$internalParamsBuffer});const{currentTime:C}=r;let x;for(x=0;x<this.eventQueue.length;x++){const _=this.eventQueue[x];if(_.time&&_.time>C)break;typeof this.handleEvent=="function"&&this.handleEvent(_),this.call("dispatchWamEvent",_)}return x&&this.eventQueue.splice(0,x),!0}connectEvents(n,l){c.connectEvents(this.groupId,this.instanceId,n,l)}disconnectEvents(n,l){if(typeof n=="undefined"){c.disconnectEvents(this.groupId,this.instanceId);return}c.disconnectEvents(this.groupId,this.instanceId,n,l)}destroy(){r.webAudioModules.removeWam(this),f.paramMgrProcessors&&delete f.paramMgrProcessors[this.instanceId],this.destroyed=!0,this.port.close()}}try{s(e,b)}catch(p){console.warn(p)}},L=W,K=e=>{const t=globalThis,r=(o,u)=>u===0?o:o**1.5**-u,a=(o,u)=>u===0?o:o**1.5**u,s=(o,u,V,h=0)=>r(u===0&&V===1?o:(o-u)/(V-u)||0,h),c=(o,u,V,h=0)=>u===0&&V===1?a(o,h):a(o,h)*(V-u)+u,f=(o,u,V)=>o>=u&&o<=V;class P{constructor(u,V={}){let{type:h,label:O,defaultValue:A,minValue:b,maxValue:p,discreteStep:n,exponent:l,choices:g,units:y}=V;h===void 0&&(h="float"),O===void 0&&(O=""),A===void 0&&(A=0),g===void 0&&(g=[]),h==="boolean"||h==="choice"?(n=1,b=0,g.length?p=g.length-1:p=1):(b===void 0&&(b=0),p===void 0&&(p=1),n===void 0&&(n=0),l===void 0&&(l=0),y===void 0&&(y=""));const C=`Param config error | ${u}: `;if(b>=p)throw Error(C.concat("minValue must be less than maxValue"));if(!f(A,b,p))throw Error(C.concat("defaultValue out of range"));if(n%1||n<0)throw Error(C.concat("discreteStep must be a non-negative integer"));if(n>0&&(b%1||p%1||A%1))throw Error(C.concat("non-zero discreteStep requires integer minValue, maxValue, and defaultValue"));if(h==="choice"&&!g.length)throw Error(C.concat("choice type parameter requires list of strings in choices"));this.id=u,this.label=O,this.type=h,this.defaultValue=A,this.minValue=b,this.maxValue=p,this.discreteStep=n,this.exponent=l,this.choices=g,this.units=y}normalize(u){return s(u,this.minValue,this.maxValue,this.exponent)}denormalize(u){return c(u,this.minValue,this.maxValue,this.exponent)}valueString(u){return this.choices?this.choices[u]:this.units!==""?`${u} ${this.units}`:`${u}`}}if(t.AudioWorkletProcessor){const o=t.webAudioModules.getModuleScope(e);o.WamParameterInfo||(o.WamParameterInfo=P)}return P},Y=K,q=Y(),ue=class{constructor(e={}){m(this,"_paramsConfig"),m(this,"_internalParamsConfig"),m(this,"_paramsMapping",{});const{paramsConfig:t,paramsMapping:r,internalParamsConfig:a}=e;this._paramsConfig=t,this._paramsMapping=r,this._internalParamsConfig=a}get paramsConfig(){const{internalParamsConfig:e}=this;return Object.entries(this._paramsConfig||e).reduce((t,[r,a])=>{var s,c,f,P;const o=e[r];return t[r]=new q(r,E(v({},a),{label:(s=a.label)!=null?s:r,defaultValue:(c=a.defaultValue)!=null?c:o==null?void 0:o.defaultValue,minValue:(f=a.minValue)!=null?f:o==null?void 0:o.minValue,maxValue:(P=a.maxValue)!=null?P:o==null?void 0:o.maxValue})),t},{})}get internalParamsConfig(){return Object.entries(this._internalParamsConfig||{}).reduce((e,[t,r])=>{if(r instanceof AudioParam)e[t]=r;else{const a={minValue:0,maxValue:1,defaultValue:0,automationRate:30};e[t]=v(v({},a),r)}return e},{})}get paramsMapping(){const e=this._paramsMapping||{},t=this.paramsConfig,r=this.internalParamsConfig;return Object.entries(t).reduce((a,[s,{minValue:c,maxValue:f}])=>{const P=[c,f],o={sourceRange:P,targetRange:[...P]};if(e[s]){const u=Object.entries(e[s]).reduce((V,[h,O])=>(r[h]&&(V[h]=v(v({},o),O)),V),{});a[s]=u}else r[s]&&(a[s]={[s]:v({},o)});return a},{})}},le=class extends AudioParam{constructor(){super(...arguments);m(this,"_info")}get exponent(){return this.info.exponent}get info(){return this._info}set info(e){this._info=e}set normalizedValue(e){this.value=this.info.denormalize(e)}get normalizedValue(){return this.info.normalize(this.value)}setValueAtTime(e,t){return super.setValueAtTime(e,t)}setNormalizedValueAtTime(e,t){const r=this.info.denormalize(e);return this.setValueAtTime(r,t)}linearRampToValueAtTime(e,t){return super.linearRampToValueAtTime(e,t)}linearRampToNormalizedValueAtTime(e,t){const r=this.info.denormalize(e);return this.linearRampToValueAtTime(r,t)}exponentialRampToValueAtTime(e,t){return super.exponentialRampToValueAtTime(e,t)}exponentialRampToNormalizedValueAtTime(e,t){const r=this.info.denormalize(e);return this.exponentialRampToValueAtTime(r,t)}setTargetAtTime(e,t,r){return super.setTargetAtTime(e,t,r)}setNormalizedTargetAtTime(e,t,r){const a=this.info.denormalize(e);return this.setTargetAtTime(a,t,r)}setValueCurveAtTime(e,t,r){return super.setValueCurveAtTime(e,t,r)}setNormalizedValueCurveAtTime(e,t,r){const a=Array.from(e).map(s=>this.info.denormalize(s));return this.setValueCurveAtTime(a,t,r)}cancelScheduledParamValues(e){return super.cancelScheduledValues(e)}cancelAndHoldParamAtTime(e){return super.cancelAndHoldAtTime(e)}},ce=globalThis.AudioWorkletNode,he=class extends ce{constructor(e,t){super(e.audioContext,e.moduleId,{numberOfInputs:0,numberOfOutputs:1+t.processorOptions.internalParams.length,parameterData:t.parameterData,processorOptions:t.processorOptions});m(this,"requestDispatchIParamChange",f=>{const P=this.internalParamsConfig[f];if(!("onChange"in P))return;const{automationRate:o,onChange:u}=P;if(typeof o!="number"||!o)return;const V=1e3/o,h=this.internalParams.indexOf(f);h!==-1&&(h>=this.internalParams.length||(typeof this.paramsUpdateCheckFnRef[h]=="number"&&window.clearTimeout(this.paramsUpdateCheckFnRef[h]),this.paramsUpdateCheckFn[h]=()=>{const O=this.$prevParamsBuffer[h],A=this.$paramsBuffer[h];A!==O&&(u(A,O),this.$prevParamsBuffer[h]=A),this.paramsUpdateCheckFnRef[h]=window.setTimeout(this.paramsUpdateCheckFn[h],V)},this.paramsUpdateCheckFn[h]()))});const{processorOptions:r,internalParamsConfig:a}=t;this.initialized=!1,this.module=e,this.instanceId=t.processorOptions.instanceId,this.groupId=t.processorOptions.groupId,this.paramsConfig=r.paramsConfig,this.internalParams=r.internalParams,this.internalParamsConfig=a,this.$prevParamsBuffer=new Float32Array(this.internalParams.length),this.paramsUpdateCheckFn=[],this.paramsUpdateCheckFnRef=[],this.messageRequestId=0,Object.entries(this.getParams()).forEach(([f,P])=>{Object.setPrototypeOf(P,le.prototype),P._info=this.paramsConfig[f]});const s={},c={};this.call=(f,...P)=>{const o=this.messageRequestId;return this.messageRequestId+=1,new Promise((u,V)=>{s[o]=u,c[o]=V,this.port.postMessage({id:o,call:f,args:P})})},this.handleMessage=({data:f})=>{var P,o;const{id:u,call:V,args:h,value:O,error:A}=f;if(V){const b={id:u};try{b.value=this[V](...h)}catch(p){b.error=p}this.port.postMessage(b)}else A?(P=c[u])==null||P.call(c,A):(o=s[u])==null||o.call(s,O),delete s[u],delete c[u]},this.port.start(),this.port.addEventListener("message",this.handleMessage)}get parameters(){return super.parameters}get moduleId(){return this.module.moduleId}async initialize(){const e=await this.call("getBuffer"),{lock:t,paramsBuffer:r}=e;this.$lock=t,this.$paramsBuffer=r;const a=1;return Object.entries(this.internalParamsConfig).forEach(([s,c],f)=>{if(this.context.state==="suspended"&&(this.$paramsBuffer[f]=c.defaultValue),c instanceof AudioParam)try{c.automationRate="a-rate"}catch{}finally{c.value=Math.max(0,c.minValue),this.connect(c,a+f)}else c instanceof AudioNode?this.connect(c,a+f):this.requestDispatchIParamChange(s)}),this.connect(this.module.audioContext.destination,0,0),this.initialized=!0,this}setBuffer({lock:e,paramsBuffer:t}){this.$lock=e,this.$paramsBuffer=t}setParamsMapping(e){return this.call("setParamsMapping",e)}getCompensationDelay(){return this.call("getCompensationDelay")}getParameterInfo(...e){return this.call("getParameterInfo",...e)}getParameterValues(e,...t){return this.call("getParameterValues",e,...t)}scheduleAutomation(e){const t=e.time||this.context.currentTime,{id:r,normalized:a,value:s}=e.data,c=this.getParam(r);!c||(c.info.type==="float"?a?c.linearRampToNormalizedValueAtTime(s,t):c.linearRampToValueAtTime(s,t):a?c.setNormalizedValueAtTime(s,t):c.setValueAtTime(s,t))}scheduleEvents(...e){e.forEach(t=>{t.type==="wam-automation"&&this.scheduleAutomation(t)}),this.call("scheduleEvents",...e)}emitEvents(...e){this.call("emitEvents",...e)}clearEvents(){this.call("clearEvents")}dispatchWamEvent(e){e.type==="wam-automation"?this.scheduleAutomation(e):this.dispatchEvent(new CustomEvent(e.type,{detail:e}))}async setParameterValues(e){Object.keys(e).forEach(t=>{const r=e[t],a=this.parameters.get(t);!a||(r.normalized?a.normalizedValue=r.value:a.value=r.value)})}async getState(){return this.getParamsValues()}async setState(e){this.setParamsValues(e)}convertTimeToFrame(e){return Math.round(e*this.context.sampleRate)}convertFrameToTime(e){return e/this.context.sampleRate}getIParamIndex(e){const t=this.internalParams.indexOf(e);return t===-1?null:t}connectIParam(e,t,r){const a=1,s=this.getIParamIndex(e);s!==null&&(t instanceof AudioNode?typeof r=="number"?this.connect(t,a+s,r):this.connect(t,a+s):this.connect(t,a+s))}disconnectIParam(e,t,r){const a=1,s=this.getIParamIndex(e);s!==null&&(t instanceof AudioNode?typeof r=="number"?this.disconnect(t,a+s,r):this.disconnect(t,a+s):this.disconnect(t,a+s))}getIParamValue(e){const t=this.getIParamIndex(e);return t!==null?this.$paramsBuffer[t]:null}getIParamsValues(){const e={};return this.internalParams.forEach((t,r)=>{e[t]=this.$paramsBuffer[r]}),e}getParam(e){return this.parameters.get(e)||null}getParams(){return Object.fromEntries(this.parameters)}getParamValue(e){const t=this.parameters.get(e);return t?t.value:null}setParamValue(e,t){const r=this.parameters.get(e);!r||(r.value=t)}getParamsValues(){const e={};return this.parameters.forEach((t,r)=>{e[r]=t.value}),e}setParamsValues(e){!e||Object.entries(e).forEach(([t,r])=>{this.setParamValue(t,r)})}getNormalizedParamValue(e){const t=this.parameters.get(e);return t?t.normalizedValue:null}setNormalizedParamValue(e,t){const r=this.parameters.get(e);!r||(r.normalizedValue=t)}getNormalizedParamsValues(){const e={};return this.parameters.forEach((t,r)=>{e[r]=this.getNormalizedParamValue(r)}),e}setNormalizedParamsValues(e){!e||Object.entries(e).forEach(([t,r])=>{this.setNormalizedParamValue(t,r)})}setParamValueAtTime(e,t,r){const a=this.parameters.get(e);return a?a.setValueAtTime(t,r):null}setNormalizedParamValueAtTime(e,t,r){const a=this.parameters.get(e);return a?a.setNormalizedValueAtTime(t,r):null}linearRampToParamValueAtTime(e,t,r){const a=this.parameters.get(e);return a?a.linearRampToValueAtTime(t,r):null}linearRampToNormalizedParamValueAtTime(e,t,r){const a=this.parameters.get(e);return a?a.linearRampToNormalizedValueAtTime(t,r):null}exponentialRampToParamValueAtTime(e,t,r){const a=this.parameters.get(e);return a?a.exponentialRampToValueAtTime(t,r):null}exponentialRampToNormalizedParamValueAtTime(e,t,r){const a=this.parameters.get(e);return a?a.exponentialRampToNormalizedValueAtTime(t,r):null}setParamTargetAtTime(e,t,r,a){const s=this.parameters.get(e);return s?s.setTargetAtTime(t,r,a):null}setNormalizedParamTargetAtTime(e,t,r,a){const s=this.parameters.get(e);return s?s.setNormalizedTargetAtTime(t,r,a):null}setParamValueCurveAtTime(e,t,r,a){const s=this.parameters.get(e);return s?s.setValueCurveAtTime(t,r,a):null}setNormalizedParamValueCurveAtTime(e,t,r,a){const s=this.parameters.get(e);return s?s.setNormalizedValueCurveAtTime(t,r,a):null}cancelScheduledParamValues(e,t){const r=this.parameters.get(e);return r?r.cancelScheduledValues(t):null}cancelAndHoldParamAtTime(e,t){const r=this.parameters.get(e);return r?r.cancelAndHoldAtTime(t):null}connectEvents(e,t){this.call("connectEvents",e,t)}disconnectEvents(e,t){this.call("disconnectEvents",e,t)}async destroy(){this.disconnect(),this.paramsUpdateCheckFnRef.forEach(e=>{typeof e=="number"&&window.clearTimeout(e)}),await this.call("destroy"),this.port.close()}},de=class{static async create(e,t={}){const{audioContext:r,moduleId:a}=e,s=t.instanceId||e.instanceId,c=t.groupId||e.groupId,{paramsConfig:f,paramsMapping:P,internalParamsConfig:o}=new ue(t),u=Object.entries(f).reduce((A,[b,{defaultValue:p}])=>(A[b]=p,A),{}),V=Object.entries(f).reduce((A,[b,{id:p,label:n,type:l,defaultValue:g,minValue:y,maxValue:C,discreteStep:x,exponent:_,choices:z,units:D}])=>(A[b]={id:p,label:n,type:l,defaultValue:g,minValue:y,maxValue:C,discreteStep:x,exponent:_,choices:z,units:D},A),{});await B(r.audioWorklet,L,a,V);const h={internalParamsConfig:o,parameterData:u,processorOptions:{paramsConfig:f,paramsMapping:P,internalParamsMinValues:Object.values(o).map(A=>Math.max(0,(A==null?void 0:A.minValue)||0)),internalParams:Object.keys(o),groupId:c,instanceId:s,moduleId:a}},O=new he(e,h);return await O.initialize(),O}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"3NQx6":[function(T,M,w){var N=T("@parcel/transformer-js/src/esmodule-helpers.js");N.defineInteropFlag(w),N.export(w,"MIDI",()=>I),N.export(w,"createSamplerEngine",()=>S);var U=T("@webaudiomodules/sdk-parammgr");class I{static NOTE_ON=144;static NOTE_OFF=128;static CC=176}class k extends U.CompositeAudioNode{_wamNode=void 0;isEnabled=!0;pack=void 0;audioBuffers=new Map;samples=new Map;get paramMgr(){return this._wamNode}set status(i){this.isEnabled!==i&&(this.isEnabled=i,this.isEnabled?(console.log("BYPASS MODE OFF FX RUNNING"),this.wetGainNode.gain.linearRampToValueAtTime(1,this.context.currentTime+.5),this.dryGainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.5)):(console.log("BYPASS MODE ON"),this.wetGainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.5),this.dryGainNode.gain.linearRampToValueAtTime(1,this.context.currentTime+.5)))}constructor(i,d){super(i,d);this.createNodes()}setup(i){i.addEventListener("wam-midi",d=>this.processMIDIEvents([{event:d.detail.data.bytes,time:0}])),this._wamNode=i,this.connectNodes(),this._output=this.outputNode,console.log("sampler.wam CONSTRUCTOR SETUP",{thiswamNode:this._wamNode})}processMIDIEvents(i){i.forEach(d=>{if(d.event[0]==I.NOTE_ON){const v=d.event[1];d.event[2]?this.noteOn(v,d.time):this.noteOff(v,d.time)}else if(d.event[0]==I.NOTE_OFF){const v=d.event[1];this.noteOff(v,d.time)}})}async noteOn(i,d=1){console.log("SAMPLER : NOTE ON",{noteNumber:i,velocity:d},this)}async noteOff(i,d=0){console.log("note off",{noteNumber:i,velocity:d},this)}createNodes(){this.outputNode=this.context.createGain(),this.dryGainNode=this.context.createGain(),this.wetGainNode=this.context.createGain(),this.delayNode=this.context.createDelay(.05),this.feedbackGainNode=this.context.createGain()}connectNodes(){super.connect(this.wetGainNode),super.connect(this.dryGainNode),this.wetGainNode.gain.value=.5,this.wetGainNode.connect(this.delayNode),this.delayNode.delayTime.value=.05,this.delayNode.connect(this.feedbackGainNode),this.feedbackGainNode.gain.value=.6,this.feedbackGainNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),this.dryGainNode.connect(this.outputNode)}async loadAudioArrayBuffer(i){return await(await fetch(i)).arrayBuffer()}async loadAudio(i,d=!1){const v=this.audioBuffers.get(i);if(!d&&v!==void 0)return v;const E=await this.loadAudioArrayBuffer(i),m=await this.context.decodeAudioData(E);return this.audioBuffers.set(i,m),m}fetchAudioBuffer(i,d=!0){const v=this.samples.get(i);if(!d&&v!==void 0)return v.stop(),v;const E=this.context.createBufferSource();return E.connect(this.wetGainNode),E.buffer=i,this.samples.set(i,E),E}async play(i,d=0,v=128,E={loop:!1}){let m=this.fetchAudioBuffer(i);m.loop=E.loop||!1,this.context.state==="suspended"&&await this.context.resume(),d==0?m.start(0):m.start(0,this.context.currentTime-d)}}w.default=k;const S=(F,i,d)=>new k(F,d)},{"@webaudiomodules/sdk-parammgr":"iUHts","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],dDhlP:[function(T,M,w){M.exports=T("3677905493ad99a2").getBundleURL("bnrrX")+T("a19cd0326e92732c").resolve("3cLeh")},{"3677905493ad99a2":"bGZ1f",a19cd0326e92732c:"6jNRu"}],cyOqT:[function(T,M,w){M.exports=JSON.parse('{"name":"Sampler","identifier":"com.designerzen.sampler","vendor":"designerzen","description":"Simple Sample Player","version":"1.0.0","apiVersion":"2.0.0","thumbnail":"screenshot.png","keywords":["sampler"],"website":"https://interface.place","isInstrument":true,"hasMidiInput":true,"hasAudioInput":false,"hasAudioOutput":true}')},{}]},[],null,"parcelRequireaaed")});export default pe();
