import{$41a5d68e8c3ceba71b364f383f9ef0f2$init as e,$cf564582c441b5818e0bdae69064d72b$init as t}from"./index.5621255c.js";var a={};const n=document.documentElement,s=async(a=!1)=>{const s=window.hasOwnProperty("BeforeInstallPromptEvent");let o,l,i=!1,r=!1,c=!1,d="./manifest.webmanifest",p=[];const u=navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")||navigator.userAgent.includes("Macintosh")&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,m=()=>new Promise(((e,t)=>{c=!1,e()}));document.addEventListener("keyup",(e=>{"Escape"===e.key&&m()}));const h=()=>navigator.standalone?navigator.standalone:!!matchMedia("(display-mode: standalone)").matches,g=async()=>{try{const t=await fetch(d),a=await t.json();if(l=a,a)return(e=a).icons&&e.icons[0]?e.name?e.description||console.error("Your web manifest must have a description listed"):console.error("Your web manifest must have a name listed"):console.error("Your web manifest must have atleast one icon listed"),a}catch(e){return null}var e},w=async a=>{const c=s&&p.length<1&&(r||u);if(r&&"standalone"in navigator&&!1===navigator.standalone||c&&!1===i){await(async()=>{try{await g()}catch(e){console.error("Error getting manifest, check that you have a valid web manifest")}"getInstalledRelatedApps"in navigator&&(p=await navigator.getInstalledRelatedApps())})();console.log("Application is currently ",h()?"installed":"not installed"),console.log({manifestdata:l}),n.classList.add(h()?"installed":"not-installed");const s=document.createElement("button");return s.classList.add("install-app"),s.setAttribute("aria-label",`Click to install ${l.short_name} Version ${e().VERSION}`),s.style.setProperty("--logo",`url(${l.icons[0].src})`),s.innerHTML="Install App",t().addTooltip(s),t().setToast("This App can be installed!<br> Click the orange button on the left"),s.addEventListener("click",(async()=>{t().setFeedback("Installing",0);try{const e=await(async()=>new Promise((async(e,t)=>{o?(o.prompt(),await m(),"accepted"===(await o.userChoice).outcome?(console.log("Your PWA has been installed"),i=!0,e(!0)):(console.log("User chose to not install"),i=!1,e(!1))):t("no prompt cached")})))();t().setToast(e?"The App was installed":"Maybe some other time"),e?document.querySelector(".install-app").style.display="none":s.classList.add("later")}catch(e){t().setToast("The App was not installed")}})),(a=a||n).appendChild(s),!0}return n.classList.add(i?"installed":"not-installed"),console.log("Application not installable",{showInstaller:c,installed:i},h()?"installed":"not-installed"),console.error({isSupportingBrowser:s,relatedApps:p,hasPrompt:r,isIOS:u}),!1};return window.addEventListener("beforeinstallprompt",(e=>{o=e,r=!0,e.preventDefault(),a||u||w()}),{once:!0}),!a&&u&&window.addEventListener("load",(async e=>{w()}),{once:!0}),w};var o,l,i;o=a,l="installer",i=function(){return s},Object.defineProperty(o,l,{get:i,enumerable:!0});export default a;
//# sourceMappingURL=install.74ac13ac.js.map
