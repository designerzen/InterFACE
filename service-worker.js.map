{"mappings":"AAaAA,cAAAA,2EAEAC,QAAQC,UAAAA,CAAWC,OATW,IAU9BF,QAAQG,KAAKC,oBAAAA,CACTC,OAPqB,MAQrBC,OAPEC,SAQFC,SAAU,cACVC,QAAS,YAIbC,KAAKC,iBAAiB,WAAYC,QAC5BA,EAAMC,OAAQD,EAAMC,KAAKC,kBAUfC,MAAAA,sCAA4CH,EAAMC,8BAA8BD,EAAMC,KAAKC,YATrGE,QAAQC,IAAAA,qCAA0CL,EAAMC,MAC7B,iBAAvBD,EAAMC,KAAKC,QACXJ,KAAKQ,cACyB,kBAAvBN,EAAMC,KAAKC,QAClBJ,KAAKS,QAAQC,QAEblB,MAAMmB,QAAQ,uDAUtBC,UAAAC,EACAC,WAAAC,EACAC,oBAAAC,EACAC,iBAAAC,EACAC,gBAAAC,GACE/B,QAAQgC,SAELC,cAAAC,GAAiBlC,QAAQmC,SACzBC,iBAAAC,GAAoBrC,QAAQsC,YAC5BC,oBAAAC,GAAuBxC,QAAQyC,eAC/BC,kBAAAC,EAAmBC,wBAAAC,GAA2B7C,QAAQ8C,mBACtDC,iBAAAC,GAAoBhD,QAAQiD,YAE5BC,qBAAAC,EAAqBC,WAAAC,GAAcrD,QAAQsD,WAqBlDN,EAAAA,CAAAA,CAAoBO,IAAK,aAAcC,SC5ElB,WD8ErBjC,IAEAM,IAEAF,IAEAF,IAEAM,IAiBAG,GAboBuB,kBACVC,GAAYD,QAEI,QAAxBC,EAAQC,aACgB,UAAxBD,EAAQC,aACgB,UAAxBD,EAAQC,aACRD,EAAQH,IAAIK,QAAQ,UAAYF,EAAQH,IAAIM,OAAS,IAQrDC,IACIT,EAAAA,CACFU,UAjBgB,eAkBhBC,QAAAA,CAAAA,IACMnB,EAAAA,CACFoB,SAAAA,CAAW,EAAG,WAEZzB,MA0BVN,EACE,0DAAA,IACImB,EAAAA,CACFU,UAAW,sBACXC,QAAAA,CAAAA,IACMnB,EAAAA,CACFoB,SAAAA,CAAW,EAAG,WAEZ5B,EAAAA,CAEF6B,cAAeC,aAMvBjC,EACE,+CAAA,IACImB,EAAAA,CACFU,UAAW,kBACXC,QAAAA,CAAAA,IACMnB,EAAAA,CACFoB,SAAAA,CAAW,EAAG,WAEZ5B,EAAAA,CAEF6B,cAAeC","sources":["./source/service-worker.js","./source/version.js"],"sourcesContent":["import { VERSION } from './version'\n\n// Not compiled so best add the ; to the es5\nconst ONE_DAY = 60 * 60 * 24;\nconst REVISION = VERSION;\nconst BUILD_MMR = \"0.0.5\";\nconst WORKBOX_DEBUG_LOGGING = true;\n// Workbox version - update manually when there are new releases.\nconst WORKBOX_VERSION = '6.0.2';\n// Cache naming and versioning.\nconst APP_CACHE_PREFIX = 'mct';\nconst APP_CACHE_SUFFIX = `v${BUILD_MMR}`;\n\nimportScripts(`https://storage.googleapis.com/workbox-cdn/releases/${WORKBOX_VERSION}/workbox-sw.js`);\n\nworkbox.setConfig({debug: WORKBOX_DEBUG_LOGGING});\nworkbox.core.setCacheNameDetails({\n    prefix: APP_CACHE_PREFIX,\n    suffix: APP_CACHE_SUFFIX,\n    precache: 'installtime',\n    runtime: 'runtime',\n});\n\n\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.message) {\n      console.log(`>>> Message received from client: `, event.data);\n      if (event.data.message === 'SKIP_WAITING') {\n          self.skipWaiting();\n      } else if (event.data.message === 'CLIENTS_CLAIM') {\n          self.clients.claim();\n      } else {\n          debug.warning('>>>> No idea what to do with that message!');\n      }\n  } else {\n      throw new Error(`Message event handler: event.data=[${event.data}], event.data.message=[${event.data.message}]`);\n  }\n});\n\n\n// Load caching routines\nconst {\n  pageCache,\n  imageCache,\n  staticResourceCache,\n  googleFontsCache,\n  offlineFallback,\n} = workbox.recipes;\n\nconst {registerRoute} = workbox.routing;\nconst {ExpirationPlugin} = workbox.expiration;\nconst {RangeRequestsPlugin} = workbox.rangeRequests;\nconst {CacheableResponse, CacheableResponsePlugin} = workbox.cacheableResponse;\nconst {precacheAndRoute} = workbox.precaching;\n\nconst {StaleWhileRevalidate,CacheFirst} = workbox.strategies;\n// CacheFirst - an implementation of a cache-first request strategy.\n// A cache first strategy is useful for assets that have been revisioned, such as URLs like /styles/example.a8f5f1.css, since they can be cached for long periods of time.\n// If the network request fails, and there is no cache match, this will throw a WorkboxError exception.\n\n// import { registerRoute } from 'workbox-routing';\n// import { StaleWhileRevalidate } from 'workbox-strategies';\n// import { CacheableResponsePlugin } from 'workbox-cacheable-response';\n\n\n// import {\n//   pageCache,\n//   imageCache,\n//   staticResourceCache,\n//   googleFontsCache,\n//   offlineFallback,\n// } from 'workbox-recipes';\n// import { precacheAndRoute } from 'workbox-precaching';\n\n// Include offline.html in the manifest__WB_MANIFEST\n// precacheAndRoute(self.origin);\nprecacheAndRoute([ {url: 'index.html', revision:REVISION }])\n\npageCache();\n\ngoogleFontsCache();\n\nstaticResourceCache();\n\nimageCache();\n\nofflineFallback();\n\n// Music files!\nconst CACHE_MEDIA = 'static-media';\nconst catchMedia = (match) =>{\n  const { request } = match\n  const isMedia = \n  request.destination === 'mp3' ||\n  request.destination === 'media' ||\n  request.destination === 'audio' || \n  request.url.indexOf(\".mp3\") === request.url.length - 4;\n  \n  // console.error(isMedia, \"matchCallback\", {match, request, pos:request.url.indexOf(\".mp3\") })\n  \n  return isMedia\n}\n\nregisterRoute(\n  catchMedia,\n  new CacheFirst({\n    cacheName: CACHE_MEDIA,\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new RangeRequestsPlugin()\n    ],\n  }),\n);\n// workbox.loadModule('workbox-range-requests');\n// RangeRequestsPlugin\n// registerRoute(\n//   catchMedia,\n//   new StaleWhileRevalidate({\n//     cacheName: CACHE_MEDIA,\n//     plugins: [\n//       new CacheableResponsePlugin({\n//         statuses: [0, 200],\n//       }),\n//     ],\n//   }),\n// );\n\n\n// TF json\n// https://storage.googleapis.com/tfhub-tfjs-modules/mediapipe/tfjs-model/facemesh/1/default/1/model.json\n\n// Now the TF models...\n// https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2/model.json?tfjs-format=file\n\n// Cache the cloud hosted TF models as they are heavy and not local!\nregisterRoute(\n  /^https:\\/\\/storage\\.googleapis\\.com\\/tfhub-tfjs-modules/,\n  new CacheFirst({\n    cacheName: 'tf-models-googleapi',\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new ExpirationPlugin({\n        // one month should be good\n        maxAgeSeconds: ONE_DAY * 30,\n      }),\n    ],\n  }),\n);\n// https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2/model.json?tfjs-format=file\nregisterRoute(\n  /^https:\\/\\/tfhub\\.dev\\/mediapipe\\/tfjs-model/,\n  new CacheFirst({\n    cacheName: 'tf-models-tfhub',\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new ExpirationPlugin({\n        // one month should be good\n        maxAgeSeconds: ONE_DAY * 30,\n      }),\n    ],\n  }),\n);\n\n\n\n// workbox.routing.registerRoute(\n//   /^https:\\/\\/fonts\\.googleapis\\.com/,\n//   workbox.strategies.staleWhileRevalidate({\n//     cacheName: 'google-fonts-stylesheets',\n//   }),\n// );","export const VERSION=\"0.1.0\""],"names":["importScripts","workbox","setConfig","debug","core","setCacheNameDetails","prefix","suffix","$ca3fdd64ab54808ffba2921b5363564a$var$APP_CACHE_SUFFIX","precache","runtime","self","addEventListener","event","data","message","Error","console","log","skipWaiting","clients","claim","warning","pageCache","$ca3fdd64ab54808ffba2921b5363564a$var$pageCache","imageCache","$ca3fdd64ab54808ffba2921b5363564a$var$imageCache","staticResourceCache","$ca3fdd64ab54808ffba2921b5363564a$var$staticResourceCache","googleFontsCache","$ca3fdd64ab54808ffba2921b5363564a$var$googleFontsCache","offlineFallback","$ca3fdd64ab54808ffba2921b5363564a$var$offlineFallback","recipes","registerRoute","$ca3fdd64ab54808ffba2921b5363564a$var$registerRoute","routing","ExpirationPlugin","$ca3fdd64ab54808ffba2921b5363564a$var$ExpirationPlugin","expiration","RangeRequestsPlugin","$ca3fdd64ab54808ffba2921b5363564a$var$RangeRequestsPlugin","rangeRequests","CacheableResponse","$ca3fdd64ab54808ffba2921b5363564a$var$CacheableResponse","CacheableResponsePlugin","$ca3fdd64ab54808ffba2921b5363564a$var$CacheableResponsePlugin","cacheableResponse","precacheAndRoute","$ca3fdd64ab54808ffba2921b5363564a$var$precacheAndRoute","precaching","StaleWhileRevalidate","$ca3fdd64ab54808ffba2921b5363564a$var$StaleWhileRevalidate","CacheFirst","$ca3fdd64ab54808ffba2921b5363564a$var$CacheFirst","strategies","url","revision","match","request","destination","indexOf","length","$ca3fdd64ab54808ffba2921b5363564a$var$catchMedia","cacheName","plugins","statuses","maxAgeSeconds","$ca3fdd64ab54808ffba2921b5363564a$var$ONE_DAY"],"version":3,"file":"service-worker.js.map"}