{"mappings":"usCAAA,IAAAA,EAAAC,EAAA,aAGA,MACMC,EAAWC,EAAAA,QAOXC,EAAoB,IANRD,EAAAA,QAQlBE,cAAe,2EAEfC,QAAQC,UAAU,CAACC,OATW,IAU9BF,QAAQG,KAAKC,oBAAoB,CAC7BC,OAPqB,MAQrBC,OAAQR,EACRS,SAAU,cACVC,QAAS,YAIbC,KAAKC,iBAAiB,UAAYC,IAChC,IAAIA,EAAMC,OAAQD,EAAMC,KAAKC,QAUzB,MAAM,IAAIC,MAAO,sCAAqCH,EAAMC,8BAA8BD,EAAMC,KAAKC,YATrGE,QAAQC,IAAK,qCAAqCL,EAAMC,MAC7B,iBAAvBD,EAAMC,KAAKC,QACXJ,KAAKQ,cACyB,kBAAvBN,EAAMC,KAAKC,QAClBJ,KAAKS,QAAQC,QAEbjB,MAAMkB,QAAQ,gDASxB,MAAMC,UACJA,EADIC,WAEJA,EAFIC,oBAGJA,EAHIC,iBAIJA,EAJIC,gBAKJA,GACEzB,QAAQ0B,SAENC,cAACA,GAAiB3B,QAAQ4B,SAC1BC,iBAACA,GAAoB7B,QAAQ8B,YAC7BC,oBAACA,GAAuB/B,QAAQgC,eAChCC,kBAACA,EAADC,wBAAoBA,GAA2BlC,QAAQmC,mBACvDC,iBAACA,GAAoBpC,QAAQqC,YAE7BC,qBAACA,EAADC,WAAsBA,GAAcvC,QAAQwC,WAqBlDJ,EAAiB,CAAE,CAACK,IAAK,aAAcC,SAAS9C,KAEhDyB,IAEAG,IAEAD,IAGAD,IAEAG,IAiBAE,EAboBgB,IAClB,MAAMC,QAAEA,GAAYD,EASpB,MAPwB,QAAxBC,EAAQC,aACgB,UAAxBD,EAAQC,aACgB,UAAxBD,EAAQC,aACRD,EAAQH,IAAIK,QAAQ,UAAYF,EAAQH,IAAIM,OAAS,GASrD,IAAIR,EAAW,CACbS,UAjBgB,eAkBhBC,QAAS,CACP,IAAIf,EAAwB,CAC1BgB,SAAU,CAAC,EAAG,OAEhB,IAAInB,MA0BVJ,EACE,0DACA,IAAIY,EAAW,CACbS,UAAW,sBACXC,QAAS,CACP,IAAIf,EAAwB,CAC1BgB,SAAU,CAAC,EAAG,OAEhB,IAAIrB,EAAiB,CAEnBsB,cAAeC,aAMvBzB,EACE,+CACA,IAAIY,EAAW,CACbS,UAAW,kBACXC,QAAS,CACP,IAAIf,EAAwB,CAC1BgB,SAAU,CAAC,EAAG,OAEhB,IAAIrB,EAAiB,CAEnBsB,cAAeC,oNCpKF,gBACH","sources":["./source/service-worker.js","./source/version.js"],"sourcesContent":["import { VERSION } from './version'\n\n// Not compiled so best add the ; to the es5\nconst ONE_DAY = 60 * 60 * 24;\nconst REVISION = VERSION;\nconst BUILD_MMR = VERSION;\nconst WORKBOX_DEBUG_LOGGING = process.env.NODE_ENV === \"development\";\n// Workbox version - update manually when there are new releases.\nconst WORKBOX_VERSION = '6.0.2';\n// Cache naming and versioning.\nconst APP_CACHE_PREFIX = 'mct';\nconst APP_CACHE_SUFFIX = `v${BUILD_MMR}`;\n\nimportScripts(`https://storage.googleapis.com/workbox-cdn/releases/${WORKBOX_VERSION}/workbox-sw.js`);\n\nworkbox.setConfig({debug: WORKBOX_DEBUG_LOGGING});\nworkbox.core.setCacheNameDetails({\n    prefix: APP_CACHE_PREFIX,\n    suffix: APP_CACHE_SUFFIX,\n    precache: 'installtime',\n    runtime: 'runtime',\n});\n\n\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.message) {\n      console.log(`>>> Message received from client: `, event.data);\n      if (event.data.message === 'SKIP_WAITING') {\n          self.skipWaiting();\n      } else if (event.data.message === 'CLIENTS_CLAIM') {\n          self.clients.claim();\n      } else {\n          debug.warning('>>>> No idea what to do with that message!');\n      }\n  } else {\n      throw new Error(`Message event handler: event.data=[${event.data}], event.data.message=[${event.data.message}]`);\n  }\n});\n\n\n// Load caching routines\nconst {\n  pageCache,\n  imageCache,\n  staticResourceCache,\n  googleFontsCache,\n  offlineFallback,\n} = workbox.recipes;\n\nconst {registerRoute} = workbox.routing;\nconst {ExpirationPlugin} = workbox.expiration;\nconst {RangeRequestsPlugin} = workbox.rangeRequests;\nconst {CacheableResponse, CacheableResponsePlugin} = workbox.cacheableResponse;\nconst {precacheAndRoute} = workbox.precaching;\n\nconst {StaleWhileRevalidate,CacheFirst} = workbox.strategies;\n// CacheFirst - an implementation of a cache-first request strategy.\n// A cache first strategy is useful for assets that have been revisioned, such as URLs like /styles/example.a8f5f1.css, since they can be cached for long periods of time.\n// If the network request fails, and there is no cache match, this will throw a WorkboxError exception.\n\n// import { registerRoute } from 'workbox-routing';\n// import { StaleWhileRevalidate } from 'workbox-strategies';\n// import { CacheableResponsePlugin } from 'workbox-cacheable-response';\n\n\n// import {\n//   pageCache,\n//   imageCache,\n//   staticResourceCache,\n//   googleFontsCache,\n//   offlineFallback,\n// } from 'workbox-recipes';\n// import { precacheAndRoute } from 'workbox-precaching';\n\n// Include offline.html in the manifest__WB_MANIFEST\n// precacheAndRoute(self.origin);\nprecacheAndRoute([ {url: 'index.html', revision:REVISION }])\n\npageCache();\n\ngoogleFontsCache();\n\nstaticResourceCache();\n\n// so this aint working...\nimageCache();\n\nofflineFallback();\n\n// Music files!\nconst CACHE_MEDIA = 'static-media';\nconst catchMedia = (match) =>{\n  const { request } = match\n  const isMedia = \n  request.destination === 'mp3' ||\n  request.destination === 'media' ||\n  request.destination === 'audio' || \n  request.url.indexOf(\".mp3\") === request.url.length - 4;\n  \n  // console.error(isMedia, \"matchCallback\", {match, request, pos:request.url.indexOf(\".mp3\") })\n  \n  return isMedia\n}\n\nregisterRoute(\n  catchMedia,\n  new CacheFirst({\n    cacheName: CACHE_MEDIA,\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new RangeRequestsPlugin()\n    ],\n  }),\n);\n// workbox.loadModule('workbox-range-requests');\n// RangeRequestsPlugin\n// registerRoute(\n//   catchMedia,\n//   new StaleWhileRevalidate({\n//     cacheName: CACHE_MEDIA,\n//     plugins: [\n//       new CacheableResponsePlugin({\n//         statuses: [0, 200],\n//       }),\n//     ],\n//   }),\n// );\n\n\n// TF json\n// https://storage.googleapis.com/tfhub-tfjs-modules/mediapipe/tfjs-model/facemesh/1/default/1/model.json\n\n// Now the TF models...\n// https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2/model.json?tfjs-format=file\n\n// Cache the cloud hosted TF models as they are heavy and not local!\nregisterRoute(\n  /^https:\\/\\/storage\\.googleapis\\.com\\/tfhub-tfjs-modules/,\n  new CacheFirst({\n    cacheName: 'tf-models-googleapi',\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new ExpirationPlugin({\n        // one month should be good\n        maxAgeSeconds: ONE_DAY * 30,\n      }),\n    ],\n  }),\n);\n// https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2/model.json?tfjs-format=file\nregisterRoute(\n  /^https:\\/\\/tfhub\\.dev\\/mediapipe\\/tfjs-model/,\n  new CacheFirst({\n    cacheName: 'tf-models-tfhub',\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new ExpirationPlugin({\n        // one month should be good\n        maxAgeSeconds: ONE_DAY * 30,\n      }),\n    ],\n  }),\n);\n\n\n\n// workbox.routing.registerRoute(\n//   /^https:\\/\\/fonts\\.googleapis\\.com/,\n//   workbox.strategies.staleWhileRevalidate({\n//     cacheName: 'google-fonts-stylesheets',\n//   }),\n// );","export const VERSION=\"0.39.1\";\rexport const DATE=1613510754820;"],"names":["_version","require","REVISION","VERSION","APP_CACHE_SUFFIX","importScripts","workbox","setConfig","debug","core","setCacheNameDetails","prefix","suffix","precache","runtime","self","addEventListener","event","data","message","Error","console","log","skipWaiting","clients","claim","warning","pageCache","imageCache","staticResourceCache","googleFontsCache","offlineFallback","recipes","registerRoute","routing","ExpirationPlugin","expiration","RangeRequestsPlugin","rangeRequests","CacheableResponse","CacheableResponsePlugin","cacheableResponse","precacheAndRoute","precaching","StaleWhileRevalidate","CacheFirst","strategies","url","revision","match","request","destination","indexOf","length","cacheName","plugins","statuses","maxAgeSeconds","ONE_DAY"],"version":3,"file":"service-worker.js.map"}