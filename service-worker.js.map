{"mappings":"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","sources":["./source/service-worker.js","./source/version.js"],"sourcesContent":["import { VERSION } from './version'\n\n// Not compiled so best add the ; to the es5\nconst ONE_DAY = 60 * 60 * 24;\nconst REVISION = VERSION;\nconst BUILD_MMR = \"0.0.5\";\nconst WORKBOX_DEBUG_LOGGING = true;\n// Workbox version - update manually when there are new releases.\nconst WORKBOX_VERSION = '6.0.2';\n// Cache naming and versioning.\nconst APP_CACHE_PREFIX = 'mct';\nconst APP_CACHE_SUFFIX = `v${BUILD_MMR}`;\n\nimportScripts(`https://storage.googleapis.com/workbox-cdn/releases/${WORKBOX_VERSION}/workbox-sw.js`);\n\nworkbox.setConfig({debug: WORKBOX_DEBUG_LOGGING});\nworkbox.core.setCacheNameDetails({\n    prefix: APP_CACHE_PREFIX,\n    suffix: APP_CACHE_SUFFIX,\n    precache: 'installtime',\n    runtime: 'runtime',\n});\n\n\nself.addEventListener('message', (event) => {\n  if (event.data && event.data.message) {\n      console.log(`>>> Message received from client: `, event.data);\n      if (event.data.message === 'SKIP_WAITING') {\n          self.skipWaiting();\n      } else if (event.data.message === 'CLIENTS_CLAIM') {\n          self.clients.claim();\n      } else {\n          debug.warning('>>>> No idea what to do with that message!');\n      }\n  } else {\n      throw new Error(`Message event handler: event.data=[${event.data}], event.data.message=[${event.data.message}]`);\n  }\n});\n\n\n// Load caching routines\nconst {\n  pageCache,\n  imageCache,\n  staticResourceCache,\n  googleFontsCache,\n  offlineFallback,\n} = workbox.recipes;\n\nconst {registerRoute} = workbox.routing;\nconst {ExpirationPlugin} = workbox.expiration;\nconst {RangeRequestsPlugin} = workbox.rangeRequests;\nconst {CacheableResponse, CacheableResponsePlugin} = workbox.cacheableResponse;\nconst {precacheAndRoute} = workbox.precaching;\n\nconst {StaleWhileRevalidate,CacheFirst} = workbox.strategies;\n// CacheFirst - an implementation of a cache-first request strategy.\n// A cache first strategy is useful for assets that have been revisioned, such as URLs like /styles/example.a8f5f1.css, since they can be cached for long periods of time.\n// If the network request fails, and there is no cache match, this will throw a WorkboxError exception.\n\n// import { registerRoute } from 'workbox-routing';\n// import { StaleWhileRevalidate } from 'workbox-strategies';\n// import { CacheableResponsePlugin } from 'workbox-cacheable-response';\n\n\n// import {\n//   pageCache,\n//   imageCache,\n//   staticResourceCache,\n//   googleFontsCache,\n//   offlineFallback,\n// } from 'workbox-recipes';\n// import { precacheAndRoute } from 'workbox-precaching';\n\n// Include offline.html in the manifest__WB_MANIFEST\n// precacheAndRoute(self.origin);\nprecacheAndRoute([ {url: 'index.html', revision:REVISION }])\n\npageCache();\n\ngoogleFontsCache();\n\nstaticResourceCache();\n\nimageCache();\n\nofflineFallback();\n\n// Music files!\nconst CACHE_MEDIA = 'static-media';\nconst catchMedia = (match) =>{\n  const { request } = match\n  const isMedia = \n  request.destination === 'mp3' ||\n  request.destination === 'media' ||\n  request.destination === 'audio' || \n  request.url.indexOf(\".mp3\") === request.url.length - 4;\n  \n  // console.error(isMedia, \"matchCallback\", {match, request, pos:request.url.indexOf(\".mp3\") })\n  \n  return isMedia\n}\n\nregisterRoute(\n  catchMedia,\n  new CacheFirst({\n    cacheName: CACHE_MEDIA,\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new RangeRequestsPlugin()\n    ],\n  }),\n);\n// workbox.loadModule('workbox-range-requests');\n// RangeRequestsPlugin\n// registerRoute(\n//   catchMedia,\n//   new StaleWhileRevalidate({\n//     cacheName: CACHE_MEDIA,\n//     plugins: [\n//       new CacheableResponsePlugin({\n//         statuses: [0, 200],\n//       }),\n//     ],\n//   }),\n// );\n\n\n// TF json\n// https://storage.googleapis.com/tfhub-tfjs-modules/mediapipe/tfjs-model/facemesh/1/default/1/model.json\n\n// Now the TF models...\n// https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2/model.json?tfjs-format=file\n\n// Cache the cloud hosted TF models as they are heavy and not local!\nregisterRoute(\n  /^https:\\/\\/storage\\.googleapis\\.com\\/tfhub-tfjs-modules/,\n  new CacheFirst({\n    cacheName: 'tf-models-googleapi',\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new ExpirationPlugin({\n        // one month should be good\n        maxAgeSeconds: ONE_DAY * 30,\n      }),\n    ],\n  }),\n);\n// https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2/model.json?tfjs-format=file\nregisterRoute(\n  /^https:\\/\\/tfhub\\.dev\\/mediapipe\\/tfjs-model/,\n  new CacheFirst({\n    cacheName: 'tf-models-tfhub',\n    plugins: [\n      new CacheableResponsePlugin({\n        statuses: [0, 200],\n      }),\n      new ExpirationPlugin({\n        // one month should be good\n        maxAgeSeconds: ONE_DAY * 30,\n      }),\n    ],\n  }),\n);\n\n\n\n// workbox.routing.registerRoute(\n//   /^https:\\/\\/fonts\\.googleapis\\.com/,\n//   workbox.strategies.staleWhileRevalidate({\n//     cacheName: 'google-fonts-stylesheets',\n//   }),\n// );","export const VERSION=\"0.23.0\"; export const DATE=\"1611518784502\";"],"names":["ONE_DAY","REVISION","VERSION","BUILD_MMR","WORKBOX_DEBUG_LOGGING","WORKBOX_VERSION","APP_CACHE_PREFIX","APP_CACHE_SUFFIX","importScripts","workbox","setConfig","debug","core","setCacheNameDetails","prefix","suffix","precache","runtime","self","addEventListener","event","data","message","console","log","skipWaiting","clients","claim","warning","Error","recipes","pageCache","imageCache","staticResourceCache","googleFontsCache","offlineFallback","registerRoute","routing","ExpirationPlugin","expiration","RangeRequestsPlugin","rangeRequests","cacheableResponse","CacheableResponse","CacheableResponsePlugin","precacheAndRoute","precaching","strategies","StaleWhileRevalidate","CacheFirst","url","revision","CACHE_MEDIA","catchMedia","match","request","isMedia","destination","indexOf","length","cacheName","plugins","statuses","maxAgeSeconds","DATE"],"version":3,"file":"service-worker.js.map"}