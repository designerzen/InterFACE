import{$9bc1d6e15ed5cfc2bb3548a625288aa9$init as t}from"./index.ddf1f818.js";var e,n,a,r,i=!1;function o(){return n||(n=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return s(t[0])}return"/"}()),n}function s(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}function c(t){let e=(""+t).match(/(https?|file|ftp):\/\/[^/]+/);if(!e)throw new Error("Origin not found");return e[0]}function l(){return i||(i=!0,n=null,(e={}).getBundleURL=o,a=s,e.getBaseURL=a,r=c,e.getOrigin=r),e}var d,u=!1;function g(){return u||(u=!0,d={},d=l().getBundleURL()+"service-worker.js"),d}const f=async()=>new Promise(((t,e)=>{let n,a=0;const r=()=>{n.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()};"serviceWorker"in navigator?window.addEventListener("load",(async()=>{n=await navigator.serviceWorker.register(g());if(n.installing&&navigator.storage){const t=await navigator.storage.estimate();t&&(a=((t,e=2)=>{if(0===t)return"0 Bytes";const n=e<0?0:e,a=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB"][a]})(t.usage))}n.onupdatefound=async()=>{const a=n.installing;a.onstatechange=async()=>{if("installed"===a.state)if(navigator.serviceWorker){const e=await navigator.serviceWorker.getRegistration();e&&e.waiting&&t(r)}else e("No Service Worker");else e("Not Installed")}}})):e("Service Workers not allowed")}));(async()=>{try{const e=await f();t().setToast("An Update is available! Press update to install it");const n=document.createElement("button");n.classList.add("update-available"),n.innerHTML="Update to new version",n.addEventListener("click",(()=>e()),{once:!0}),document.documentElement.appendChild(n)}catch(t){}})();
//# sourceMappingURL=index.84d76682.js.map
