var Vt=(C,Pe)=>()=>(Pe||C((Pe={exports:{}}).exports,Pe),Pe.exports);var zt=Vt((It,ut)=>{(function(C,Pe,o,l,T){var ie=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{},ne=typeof ie[l]=="function"&&ie[l],x=ne.cache||{},Q=typeof ut!="undefined"&&typeof ut.require=="function"&&ut.require.bind(ut);function Z(k,pe){if(!x[k]){if(!C[k]){var ee=typeof ie[l]=="function"&&ie[l];if(!pe&&ee)return ee(k,!0);if(ne)return ne(k,!0);if(Q&&typeof k=="string")return Q(k);var ve=new Error("Cannot find module '"+k+"'");throw ve.code="MODULE_NOT_FOUND",ve}xe.resolve=q,xe.cache={};var Ie=x[k]=new Z.Module(k);C[k][0].call(Ie.exports,xe,Ie,Ie.exports,this)}return x[k].exports;function xe(U){var ue=xe.resolve(U);return ue===!1?{}:Z(ue)}function q(U){var ue=C[k][1][U];return ue??U}}function re(k){this.id=k,this.bundle=Z,this.exports={}}Z.isParcelRequire=!0,Z.Module=re,Z.modules=C,Z.cache=x,Z.parent=ne,Z.register=function(k,pe){C[k]=[function(ee,ve){ve.exports=pe},{}]},Object.defineProperty(Z,"root",{get:function(){return ie[l]}}),ie[l]=Z;for(var Y=0;Y<Pe.length;Y++)Z(Pe[Y]);if(o){var te=Z(o);typeof It=="object"&&typeof ut!="undefined"?ut.exports=te:typeof define=="function"&&define.amd?define(function(){return te}):T&&(this[T]=te)}})({bUg4E:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"DisplayLookingGlass3D",()=>re);var T=C("./display-abstract"),ie=C("@mediapipe/tasks-vision"),ne=C("@lookingglass/webxr"),x=C("three/src/Three.js"),Q=C("three/examples/jsm/webxr/VRButton.js"),Z=C("./display-webgl-3d");class re extends Z.DisplayWebGL3D{constructor(te,k,pe,ee=478){super(te,k,pe,ee);const ve=ne.LookingGlassConfig;ve.tileHeight=512,ve.numViews=45,ve.targetY=0,ve.targetZ=0,ve.targetDiam=3,ve.fovy=14*Math.PI/180,new ne.LookingGlassWebXRPolyfill,this.renderer.xr.enabled=!0,document.body.append(Q.VRButton.createButton(renderer)),this.available=!0}}},{"./display-abstract":"5Ql3r","@mediapipe/tasks-vision":"fKA8n","@lookingglass/webxr":"abBq7","three/src/Three.js":"3iqaT","three/examples/jsm/webxr/VRButton.js":"2SUV4","./display-webgl-3d":"kYJdi","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],abBq7:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"LookingGlassConfig",()=>S),l.export(o,"LookingGlassWebXRPolyfill",()=>L);var T=C("@lookingglass/webxr-polyfill/src/api/index"),ie=l.interopDefault(T),ne=C("@lookingglass/webxr-polyfill/src/api/XRSystem"),x=l.interopDefault(ne),Q=C("@lookingglass/webxr-polyfill/src/WebXRPolyfill"),Z=l.interopDefault(Q),re=C("holoplay-core"),Y=C("@lookingglass/webxr-polyfill/src/devices/XRDevice"),te=l.interopDefault(Y),k=C("@lookingglass/webxr-polyfill/src/api/XRSpace"),pe=l.interopDefault(k),ee=C("gl-matrix"),ve=C("@lookingglass/webxr-polyfill/src/api/XRWebGLLayer"),Ie=l.interopDefault(ve),xe=Object.defineProperty,q=(E,w,v)=>w in E?xe(E,w,{enumerable:!0,configurable:!0,writable:!0,value:v}):E[w]=v,U=(E,w,v)=>(q(E,typeof w!="symbol"?w+"":w,v),v);const ue=1.6;var D;(function(E){E[E.Swizzled=0]="Swizzled",E[E.Center=1]="Center",E[E.Quilt=2]="Quilt"})(D||(D={}));class ye extends EventTarget{constructor(w){super();U(this,"_calibration",{configVersion:"1.0",pitch:{value:45},slope:{value:-5},center:{value:-.5},viewCone:{value:40},invView:{value:1},verticalAngle:{value:0},DPI:{value:338},screenW:{value:250},screenH:{value:250},flipImageX:{value:0},flipImageY:{value:0},flipSubp:{value:0},serial:"LKG-DEFAULT-#####"}),U(this,"_viewControls",{tileHeight:512,numViews:48,trackballX:0,trackballY:0,targetX:0,targetY:ue,targetZ:-.5,targetDiam:2,fovy:13/180*Math.PI,depthiness:1.25,inlineView:D.Center,capturing:!1,quiltResolution:3840,popup:null,XRSession:null,lkgCanvas:null,appCanvas:null}),U(this,"LookingGlassDetected"),this._viewControls={...this._viewControls,...w},this.syncCalibration()}syncCalibration(){new re.Client(w=>{if(w.devices.length<1){console.log("No Looking Glass devices found");return}w.devices.length>1&&console.log("More than one Looking Glass device found... using the first one"),this.calibration=w.devices[0].calibration})}addEventListener(w,v,G){super.addEventListener(w,v,G)}onConfigChange(){this.dispatchEvent(new Event("on-config-changed"))}get calibration(){return this._calibration}set calibration(w){this._calibration={...this._calibration,...w},this.onConfigChange()}updateViewControls(w){w!=null&&(this._viewControls={...this._viewControls,...w},this.onConfigChange())}get tileHeight(){return Math.round(this.framebufferHeight/this.quiltHeight)}get quiltResolution(){return this._viewControls.quiltResolution}set quiltResolution(w){this.updateViewControls({quiltResolution:w})}get numViews(){return this.quiltWidth*this.quiltHeight}get targetX(){return this._viewControls.targetX}set targetX(w){this.updateViewControls({targetX:w})}get targetY(){return this._viewControls.targetY}set targetY(w){this.updateViewControls({targetY:w})}get targetZ(){return this._viewControls.targetZ}set targetZ(w){this.updateViewControls({targetZ:w})}get trackballX(){return this._viewControls.trackballX}set trackballX(w){this.updateViewControls({trackballX:w})}get trackballY(){return this._viewControls.trackballY}set trackballY(w){this.updateViewControls({trackballY:w})}get targetDiam(){return this._viewControls.targetDiam}set targetDiam(w){this.updateViewControls({targetDiam:w})}get fovy(){return this._viewControls.fovy}set fovy(w){this.updateViewControls({fovy:w})}get depthiness(){return this._viewControls.depthiness}set depthiness(w){this.updateViewControls({depthiness:w})}get inlineView(){return this._viewControls.inlineView}set inlineView(w){this.updateViewControls({inlineView:w})}get capturing(){return this._viewControls.capturing}set capturing(w){this.updateViewControls({capturing:w})}get popup(){return this._viewControls.popup}set popup(w){this.updateViewControls({popup:w})}get XRSession(){return this._viewControls.XRSession}set XRSession(w){this.updateViewControls({XRSession:w})}get lkgCanvas(){return this._viewControls.lkgCanvas}set lkgCanvas(w){this.updateViewControls({lkgCanvas:w})}get appCanvas(){return this._viewControls.appCanvas}set appCanvas(w){this.updateViewControls({appCanvas:w})}get aspect(){return this._calibration.screenW.value/this._calibration.screenH.value}get tileWidth(){return Math.round(this.framebufferWidth/this.quiltWidth)}get framebufferWidth(){return this._calibration.screenW.value<7e3?this._viewControls.quiltResolution:7680}get quiltWidth(){return this.calibration.screenW.value==1536?8:this.calibration.screenW.value==3840||this.calibration.screenW.value>7e3?5:8}get quiltHeight(){return this.calibration.screenW.value==1536?6:this.calibration.screenW.value==3840||this.calibration.screenW.value>7e3?9:6}get framebufferHeight(){return this._calibration.screenW.value<7e3?this._viewControls.quiltResolution:4320}get viewCone(){return this._calibration.viewCone.value*this.depthiness/180*Math.PI}get tilt(){return this._calibration.screenH.value/(this._calibration.screenW.value*this._calibration.slope.value)*(this._calibration.flipImageX.value?-1:1)}set tilt(w){}get subp(){return 1/(this._calibration.screenW.value*3)}get pitch(){const w=this._calibration.screenW.value/this._calibration.DPI.value;return this._calibration.pitch.value*w*Math.cos(Math.atan(1/this._calibration.slope.value))}}let z=null;function $(){return z==null&&(z=new ye),z}function j(E){const w=$();E!=null&&w.updateViewControls(E)}async function oe(){const E=$();let w=2;function v(){if(E.appCanvas!=null)try{let M=E.appCanvas.toDataURL();const e=document.createElement("a");e.style.display="none",e.href=M,e.download=`hologram_qs${E.quiltWidth}x${E.quiltHeight}a${E.aspect}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(M)}catch(M){console.error("Error while capturing canvas data:",M)}finally{E.inlineView=w}}const G=document.getElementById("screenshotbutton");G&&G.addEventListener("click",()=>{w=E.inlineView;const M=K.getInstance();if(!M){console.warn("LookingGlassXRDevice not initialized");return}E.inlineView=2,M.captureScreenshot=!0,setTimeout(()=>{M.screenshotCallback=v},100)})}function ce(){var E;const w=$();if(console.log(w,"for debugging purposes"),w.lkgCanvas==null)console.warn("window placement called without a valid XR Session!");else{let v=function(){let u=p.d-p.a,g=p.w-p.s;u&&g&&(u*=Math.sqrt(.5),g*=Math.sqrt(.5));const m=w.trackballX,_=w.trackballY,F=Math.cos(m)*u-Math.sin(m)*Math.cos(_)*g,I=-Math.sin(_)*g,P=-Math.sin(m)*u-Math.cos(m)*Math.cos(_)*g;w.targetX=w.targetX+F*w.targetDiam*.03,w.targetY=w.targetY+I*w.targetDiam*.03,w.targetZ=w.targetZ+P*w.targetDiam*.03,requestAnimationFrame(v)};const G=document.createElement("style");document.head.appendChild(G),(E=G.sheet)==null||E.insertRule("#LookingGlassWebXRControls * { all: revert; font-family: sans-serif }");const M=document.createElement("div");M.id="LookingGlassWebXRControls",M.style.position="fixed",M.style.zIndex="1000",M.style.padding="15px",M.style.width="320px",M.style.maxWidth="calc(100vw - 18px)",M.style.maxHeight="calc(100vh - 18px)",M.style.whiteSpace="nowrap",M.style.background="rgba(0, 0, 0, 0.6)",M.style.color="white",M.style.borderRadius="10px",M.style.right="15px",M.style.bottom="15px",M.style.flex="row";const e=document.createElement("div");M.appendChild(e),e.style.width="100%",e.style.textAlign="center",e.style.fontWeight="bold",e.style.marginBottom="8px",e.innerText="Looking Glass Controls";const t=document.createElement("button");t.style.display="block",t.style.margin="auto",t.style.width="100%",t.style.height="35px",t.style.padding="4px",t.style.marginBottom="8px",t.style.borderRadius="8px",t.id="screenshotbutton",M.appendChild(t),t.innerText="Save Hologram";const r=document.createElement("button");r.style.display="block",r.style.margin="auto",r.style.width="100%",r.style.height="35px",r.style.padding="4px",r.style.marginBottom="8px",r.style.borderRadius="8px",r.id="copybutton",M.appendChild(r),r.innerText="Copy Config",r.addEventListener("click",()=>{be(w)});const s=document.createElement("div");M.appendChild(s),s.style.width="290px",s.style.whiteSpace="normal",s.style.color="rgba(255,255,255,0.7)",s.style.fontSize="14px",s.style.margin="5px 0",s.innerHTML="Click the popup and use WASD, mouse left/right drag, and scroll.";const a=document.createElement("div");M.appendChild(a);const h=(u,g,m)=>{const _=m.stringify,F=document.createElement("div");F.style.marginBottom="8px",a.appendChild(F);const I=u,P=w[u],V=document.createElement("label");F.appendChild(V),V.innerText=m.label,V.setAttribute("for",I),V.style.width="100px",V.style.display="inline-block",V.style.textDecoration="dotted underline 1px",V.style.fontFamily='"Courier New"',V.style.fontSize="13px",V.style.fontWeight="bold",V.title=m.title;const O=document.createElement("input");F.appendChild(O),Object.assign(O,g),O.id=I,O.title=m.title,O.value=g.value!==void 0?g.value:P;const B=ae=>{w[u]=ae,Me(ae)};O.oninput=()=>{const ae=g.type==="range"?parseFloat(O.value):g.type==="checkbox"?O.checked:O.value;B(ae)};const J=ae=>{let le=ae(w[u]);m.fixRange&&(le=m.fixRange(le),O.max=Math.max(parseFloat(O.max),le).toString(),O.min=Math.min(parseFloat(O.min),le).toString()),O.value=le,B(le)};g.type==="range"&&(O.style.width="110px",O.style.height="8px",O.onwheel=ae=>{J(le=>le+Math.sign(ae.deltaX-ae.deltaY)*g.step)});let Me=ae=>{};if(_){const ae=document.createElement("span");ae.style.fontFamily='"Courier New"',ae.style.fontSize="13px",ae.style.marginLeft="3px",F.appendChild(ae),Me=le=>{ae.innerHTML=_(le)},Me(P)}return J};h("fovy",{type:"range",min:1/180*Math.PI,max:120.1/180*Math.PI,step:1/180*Math.PI},{label:"fov",title:"perspective fov (degrades stereo effect)",fixRange:u=>Math.max(1/180*Math.PI,Math.min(u,120.1/180*Math.PI)),stringify:u=>{const g=u/Math.PI*180,m=Math.atan(Math.tan(u/2)*w.aspect)*2/Math.PI*180;return`${g.toFixed()}&deg;&times;${m.toFixed()}&deg;`}}),h("depthiness",{type:"range",min:0,max:2,step:.01},{label:"depthiness",title:"exaggerates depth by multiplying the width of the view cone (as reported by the firmware) - can somewhat compensate for depthiness lost using higher fov.",fixRange:u=>Math.max(0,u),stringify:u=>`${u.toFixed(2)}x`}),h("inlineView",{type:"range",min:0,max:2,step:1},{label:"inline view",title:"what to show inline on the original canvas (swizzled = no overwrite)",fixRange:u=>Math.max(0,Math.min(u,2)),stringify:u=>u===0?"swizzled":u===1?"center":u===2?"quilt":"?"}),w.lkgCanvas.oncontextmenu=u=>{u.preventDefault()},w.lkgCanvas.addEventListener("wheel",u=>{const g=w.targetDiam,m=1.1,_=Math.log(g)/Math.log(m);return w.targetDiam=Math.pow(m,_+u.deltaY*.01)}),w.lkgCanvas.addEventListener("mousemove",u=>{const g=u.movementX,m=-u.movementY;if(u.buttons&2||u.buttons&1&&(u.shiftKey||u.ctrlKey)){const _=w.trackballX,F=w.trackballY,I=-Math.cos(_)*g+Math.sin(_)*Math.sin(F)*m,P=-Math.cos(F)*m,V=Math.sin(_)*g+Math.cos(_)*Math.sin(F)*m;w.targetX=w.targetX+I*w.targetDiam*.001,w.targetY=w.targetY+P*w.targetDiam*.001,w.targetZ=w.targetZ+V*w.targetDiam*.001}else u.buttons&1&&(w.trackballX=w.trackballX-g*.01,w.trackballY=w.trackballY-m*.01)});const p={w:0,a:0,s:0,d:0};return w.lkgCanvas.addEventListener("keydown",u=>{switch(u.code){case"KeyW":p.w=1;break;case"KeyA":p.a=1;break;case"KeyS":p.s=1;break;case"KeyD":p.d=1;break}}),w.lkgCanvas.addEventListener("keyup",u=>{switch(u.code){case"KeyW":p.w=0;break;case"KeyA":p.a=0;break;case"KeyS":p.s=0;break;case"KeyD":p.d=0;break}}),requestAnimationFrame(v),setTimeout(()=>{oe()},1e3),M}}function be(E){const w={targetX:E.targetX,targetY:E.targetY,targetZ:E.targetZ,fovy:`${Math.round(E.fovy/Math.PI*180)} * Math.PI / 180`,targetDiam:E.targetDiam,trackballX:E.trackballX,trackballY:E.trackballY,depthiness:E.depthiness};let v=JSON.stringify(w,null,4).replace(/"/g,"").replace(/{/g,"").replace(/}/g,"");navigator.clipboard.writeText(v)}let ge;const Qe=(E,w)=>{const v=$();if(v.lkgCanvas==null){console.warn("window placement called without a valid XR Session!");return}else if(E==!1)ze(v,ge);else{ge==null&&(ge=ce()),v.lkgCanvas.style.position="fixed",v.lkgCanvas.style.bottom="0",v.lkgCanvas.style.left="0",v.lkgCanvas.width=v.calibration.screenW.value,v.lkgCanvas.height=v.calibration.screenH.value,document.body.appendChild(ge);const G="getScreenDetails"in window;console.log(G,"Screen placement API exists"),G?_e(v.lkgCanvas,v,w):Le(v,v.lkgCanvas,w)}};async function _e(E,w,v){const G=await window.getScreenDetails();console.log(G);const M=G.screens.filter(e=>e.label.includes("LKG"))[0];if(console.log(M,"monitors"),M===void 0){console.log("no Looking Glass monitor detected - manually opening popup window"),Le(w,E,v);return}else{console.log("monitor ID",M.label,"serial number",w.calibration);const e=[`left=${M.left}`,`top=${M.top}`,`width=${M.width}`,`height=${M.height}`,"menubar=no","toolbar=no","location=no","status=no","resizable=yes","scrollbars=no","fullscreenEnabled=true"].join(",");w.popup=window.open("","new",e),w.popup&&(w.popup.document.body.style.background="black",w.popup.document.body.style.transform="1.0",Xe(w),w.popup.document.body.appendChild(E),console.assert(v),w.popup.onbeforeunload=v)}}function Le(E,w,v){E.popup=window.open("",void 0,"width=640,height=360"),E.popup&&(E.popup.document.title="Looking Glass Window (fullscreen me on Looking Glass!)",E.popup.document.body.style.background="black",E.popup.document.body.style.transform="1.0",Xe(E),E.popup.document.body.appendChild(w),console.assert(v),E.popup.onbeforeunload=v)}function ze(E,w){var v;(v=w.parentElement)==null||v.removeChild(w),E.popup&&(E.popup.onbeforeunload=null,E.popup.close(),E.popup=null)}function Xe(E){E.popup&&E.popup.document.addEventListener("keydown",w=>{w.ctrlKey&&(w.key==="="||w.key==="-"||w.key==="+")&&w.preventDefault()})}const He=Symbol("LookingGlassXRWebGLLayer");class f extends Ie.default{constructor(w,v,G){super(w,v,G);const M=$();M.appCanvas=v.canvas,M.lkgCanvas=document.createElement("canvas"),M.lkgCanvas.tabIndex=0;const e=M.lkgCanvas.getContext("2d",{alpha:!1});M.lkgCanvas.addEventListener("dblclick",function(){this.requestFullscreen()});const t=this[ve.PRIVATE].config,r=v.createTexture();let s,a;const h=v.createFramebuffer(),p=v.getExtension("OES_vertex_array_object"),u=34229,g=p?p.bindVertexArrayOES.bind(p):v.bindVertexArray.bind(v);(t.depth||t.stencil)&&(t.depth&&t.stencil?a={format:v.DEPTH_STENCIL,attachment:v.DEPTH_STENCIL_ATTACHMENT}:t.depth?a={format:v.DEPTH_COMPONENT16,attachment:v.DEPTH_ATTACHMENT}:t.stencil&&(a={format:v.STENCIL_INDEX8,attachment:v.STENCIL_ATTACHMENT}),s=v.createRenderbuffer());const m=(fe,$e,Ye,qe,st)=>{_(fe,$e,st.framebufferWidth,st.framebufferHeight),Ye&&F(fe,Ye,qe,st.framebufferWidth,st.framebufferHeight)},_=(fe,$e,Ye,qe)=>{const st=fe.getParameter(fe.TEXTURE_BINDING_2D);fe.bindTexture(fe.TEXTURE_2D,$e),fe.texImage2D(fe.TEXTURE_2D,0,fe.RGBA,Ye,qe,0,fe.RGBA,fe.UNSIGNED_BYTE,null),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.bindTexture(fe.TEXTURE_2D,st)},F=(fe,$e,Ye,qe,st)=>{const lt=fe.getParameter(fe.RENDERBUFFER_BINDING);fe.bindRenderbuffer(fe.RENDERBUFFER,$e),fe.renderbufferStorage(fe.RENDERBUFFER,Ye.format,qe,st),fe.bindRenderbuffer(fe.RENDERBUFFER,lt)},I=(fe,$e,Ye,qe,st,lt)=>{const mt=fe.getParameter(fe.FRAMEBUFFER_BINDING);fe.bindFramebuffer(fe.FRAMEBUFFER,$e),fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,Ye,0),(lt.depth||lt.stencil)&&fe.framebufferRenderbuffer(fe.FRAMEBUFFER,qe.attachment,fe.RENDERBUFFER,st),fe.bindFramebuffer(fe.FRAMEBUFFER,mt)};m(v,r,s,a,M),M.addEventListener("on-config-changed",()=>m(v,r,s,a,M)),I(v,h,r,a,s,t);const P=`
		attribute vec2 a_position;
		varying vec2 v_texcoord;
		void main() {
		  gl_Position = vec4(a_position * 2.0 - 1.0, 0.0, 1.0);
		  v_texcoord = a_position;
		}
	  `;function V(fe,$e,Ye){const qe=fe.createShader($e);return fe.shaderSource(qe,Ye),fe.compileShader(qe),fe.getShaderParameter(qe,fe.COMPILE_STATUS)?qe:(console.warn(fe.getShaderInfoLog(qe)),null)}function O(fe,$e,Ye){let qe=fe.createProgram();const st=V(fe,fe.VERTEX_SHADER,$e),lt=V(fe,fe.FRAGMENT_SHADER,Ye);return st===null||lt===null?(console.error("There was a problem with shader construction"),null):(fe.attachShader(qe,st),fe.attachShader(qe,lt),fe.linkProgram(qe),fe.getProgramParameter(qe,fe.LINK_STATUS)?qe:(console.warn(fe.getProgramInfoLog(qe)),null))}let B,J,Me,ae;const le=(fe,$e,Ye)=>{const qe=Ye($e);if(qe===J)return;J=qe;const st=V(fe,fe.FRAGMENT_SHADER,qe);if(st===null)return;B&&fe.deleteShader(B),B=st;const lt=O(fe,P,qe);if(lt===null){console.warn("There was a problem with shader construction");return}Me=fe.getAttribLocation(lt,"a_position"),ae=fe.getUniformLocation(lt,"u_viewType");const mt=fe.getUniformLocation(lt,"u_texture"),Ft=fe.getParameter(fe.CURRENT_PROGRAM);fe.useProgram(lt),fe.uniform1i(mt,0),fe.useProgram(Ft),Ae&&fe.deleteProgram(Ae),Ae=lt};console.log((0,re.Shader)(M));let Ae=O(v,P,(0,re.Shader)(M));Ae===null&&console.warn("There was a problem with shader construction"),M.addEventListener("on-config-changed",()=>{le(v,M,re.Shader)});const de=p?p.createVertexArrayOES():v.createVertexArray(),Ce=v.createBuffer(),Be=v.getParameter(v.ARRAY_BUFFER_BINDING),Fe=v.getParameter(u);g(de),v.bindBuffer(v.ARRAY_BUFFER,Ce),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),v.STATIC_DRAW),v.enableVertexAttribArray(Me),v.vertexAttribPointer(Me,2,v.FLOAT,!1,0,0),g(Fe),v.bindBuffer(v.ARRAY_BUFFER,Be);const Ne=()=>{console.assert(this[He].LookingGlassEnabled),v.bindFramebuffer(v.FRAMEBUFFER,this.framebuffer);const fe=v.getParameter(v.COLOR_CLEAR_VALUE),$e=v.getParameter(v.DEPTH_CLEAR_VALUE),Ye=v.getParameter(v.STENCIL_CLEAR_VALUE);v.clearColor(0,0,0,0),v.clearDepth(1),v.clearStencil(0),v.clear(v.DEPTH_BUFFER_BIT|v.COLOR_BUFFER_BIT|v.STENCIL_BUFFER_BIT),v.clearColor(fe[0],fe[1],fe[2],fe[3]),v.clearDepth($e),v.clearStencil(Ye)};function ke(){if(!M.appCanvas||!M.lkgCanvas)return;(M.appCanvas.width!==M.framebufferWidth||M.appCanvas.height!==M.framebufferHeight)&&(M.appCanvas.width,M.appCanvas.height,M.appCanvas.width=M.framebufferWidth,M.appCanvas.height=M.framebufferHeight);const fe=je();Se(),Ze(),tt(),ct(),Ve(fe)}function Ve(fe){v.activeTexture(fe.activeTexture),v.bindTexture(v.TEXTURE_2D,fe.textureBinding),v.useProgram(fe.program),v.bindRenderbuffer(v.RENDERBUFFER,fe.renderbufferBinding),v.bindFramebuffer(v.FRAMEBUFFER,fe.framebufferBinding),fe.scissorTest?v.enable(v.SCISSOR_TEST):v.disable(v.SCISSOR_TEST),fe.stencilTest?v.enable(v.STENCIL_TEST):v.disable(v.STENCIL_TEST),fe.depthTest?v.enable(v.DEPTH_TEST):v.disable(v.DEPTH_TEST),fe.blend?v.enable(v.BLEND):v.disable(v.BLEND),fe.cullFace?v.enable(v.CULL_FACE):v.disable(v.CULL_FACE),g(fe.VAO)}function je(){return{VAO:v.getParameter(v.VERTEX_ARRAY_BINDING),cullFace:v.getParameter(v.CULL_FACE),blend:v.getParameter(v.BLEND),depthTest:v.getParameter(v.DEPTH_TEST),stencilTest:v.getParameter(v.STENCIL_TEST),scissorTest:v.getParameter(v.SCISSOR_TEST),viewport:v.getParameter(v.VIEWPORT),framebufferBinding:v.getParameter(v.FRAMEBUFFER_BINDING),renderbufferBinding:v.getParameter(v.RENDERBUFFER_BINDING),program:v.getParameter(v.CURRENT_PROGRAM),activeTexture:v.getParameter(v.ACTIVE_TEXTURE),textureBinding:v.getParameter(v.TEXTURE_BINDING_2D)}}function Se(){v.bindFramebuffer(v.FRAMEBUFFER,null),v.useProgram(Ae),g(de),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,r),v.disable(v.BLEND),v.disable(v.CULL_FACE),v.disable(v.DEPTH_TEST),v.disable(v.STENCIL_TEST),v.viewport(0,0,v.drawingBufferWidth,v.drawingBufferHeight)}function Ze(){v.uniform1i(ae,0),v.drawArrays(v.TRIANGLES,0,6)}function tt(){if(!M.lkgCanvas||!M.appCanvas){console.warn("Looking Glass Canvas is not defined");return}e==null||e.clearRect(0,0,M.lkgCanvas.width,M.lkgCanvas.height),e==null||e.drawImage(M.appCanvas,0,0,M.framebufferWidth,M.framebufferHeight,0,0,M.calibration.screenW.value,M.calibration.screenH.value)}function ct(){if(!M.appCanvas){console.warn("Looking Glass Canvas is not defined");return}M.inlineView!==0&&(M.capturing&&M.appCanvas.width!==M.framebufferWidth&&(M.appCanvas.width=M.framebufferWidth,M.appCanvas.height=M.framebufferHeight,v.viewport(0,0,M.framebufferHeight,M.framebufferWidth)),v.uniform1i(ae,M.inlineView),v.drawArrays(v.TRIANGLES,0,6))}window.addEventListener("unload",()=>{M.popup&&M.popup.close(),M.popup=null}),this[He]={LookingGlassEnabled:!1,framebuffer:h,clearFramebuffer:Ne,blitTextureToDefaultFramebufferIfNeeded:ke,moveCanvasToWindow:Qe}}get framebuffer(){return this[He].LookingGlassEnabled?this[He].framebuffer:null}get framebufferWidth(){return $().framebufferWidth}get framebufferHeight(){return $().framebufferHeight}}const R=class extends te.default{constructor(E){super(E),this.sessions=new Map,this.viewSpaces=[],this.basePoseMatrix=ee.mat4.create(),this.inlineProjectionMatrix=ee.mat4.create(),this.inlineInverseViewMatrix=ee.mat4.create(),this.LookingGlassProjectionMatrices=[],this.LookingGlassInverseViewMatrices=[],this.captureScreenshot=!1,this.screenshotCallback=null,R.instance||(R.instance=this)}static getInstance(){return R.instance}onBaseLayerSet(E,w){const v=this.sessions.get(E);v.baseLayer=w;const G=$(),M=w[He];M.LookingGlassEnabled=v.immersive,v.immersive&&(G.XRSession=this.sessions.get(E),G.popup==null?M.moveCanvasToWindow(!0,()=>{this.endSession(E)}):console.warn("attempted to assign baselayer twice?"))}isSessionSupported(E){return E==="inline"||E==="immersive-vr"}isFeatureSupported(E){switch(E){case"viewer":return!0;case"local":return!0;case"local-floor":return!0;case"bounded-floor":return!1;case"unbounded":return!1;default:return console.warn("LookingGlassXRDevice.isFeatureSupported: feature not understood:",E),!1}}async requestSession(E,w){if(!this.isSessionSupported(E))return Promise.reject();const v=E!=="inline",G=new Ee(E,w);return this.sessions.set(G.id,G),v&&this.dispatchEvent("@@webxr-polyfill/vr-present-start",G.id),Promise.resolve(G.id)}requestAnimationFrame(E){return this.global.requestAnimationFrame(E)}cancelAnimationFrame(E){this.global.cancelAnimationFrame(E)}onFrameStart(E,w){const v=this.sessions.get(E),G=$();if(v.immersive){const M=Math.tan(.5*G.fovy),e=.5*G.targetDiam/M,t=e-G.targetDiam,r=this.basePoseMatrix;ee.mat4.fromTranslation(r,[G.targetX,G.targetY,G.targetZ]),ee.mat4.rotate(r,r,G.trackballX,[0,1,0]),ee.mat4.rotate(r,r,-G.trackballY,[1,0,0]),ee.mat4.translate(r,r,[0,0,e]);for(let s=0;s<G.numViews;++s){const a=(s+.5)/G.numViews-.5,h=Math.tan(G.viewCone*a),p=e*h,u=this.LookingGlassInverseViewMatrices[s]=this.LookingGlassInverseViewMatrices[s]||ee.mat4.create();ee.mat4.translate(u,r,[p,0,0]),ee.mat4.invert(u,u);const g=Math.max(t+w.depthNear,.01),m=t+w.depthFar,_=g*M,F=_,I=-_,P=g*-h,V=G.aspect*_,O=P+V,B=P-V,J=this.LookingGlassProjectionMatrices[s]=this.LookingGlassProjectionMatrices[s]||ee.mat4.create();ee.mat4.set(J,2*g/(O-B),0,0,0,0,2*g/(F-I),0,0,(O+B)/(O-B),(F+I)/(F-I),-(m+g)/(m-g),-1,0,0,-2*m*g/(m-g),0)}v.baseLayer[He].clearFramebuffer()}else{const M=v.baseLayer.context,e=M.drawingBufferWidth/M.drawingBufferHeight;ee.mat4.perspective(this.inlineProjectionMatrix,w.inlineVerticalFieldOfView,e,w.depthNear,w.depthFar),ee.mat4.fromTranslation(this.basePoseMatrix,[0,ue,0]),ee.mat4.invert(this.inlineInverseViewMatrix,this.basePoseMatrix)}}onFrameEnd(E){this.sessions.get(E).baseLayer[He].blitTextureToDefaultFramebufferIfNeeded(),this.captureScreenshot&&this.screenshotCallback&&(this.screenshotCallback(),this.captureScreenshot=!1)}async requestFrameOfReferenceTransform(E,w){const v=ee.mat4.create();switch(E){case"viewer":case"local":return ee.mat4.fromTranslation(v,[0,-ue,0]),v;case"local-floor":return v;default:throw new Error("XRReferenceSpaceType not understood")}}endSession(E){const w=this.sessions.get(E);w.immersive&&w.baseLayer&&(w.baseLayer[He].moveCanvasToWindow(!1),this.dispatchEvent("@@webxr-polyfill/vr-present-end",E)),w.ended=!0}doesSessionSupportReferenceSpace(E,w){const v=this.sessions.get(E);return v.ended?!1:v.enabledFeatures.has(w)}getViewSpaces(E){if(E==="immersive-vr"){const w=$();for(let v=this.viewSpaces.length;v<w.numViews;++v)this.viewSpaces[v]=new Te(v);return this.viewSpaces.length=w.numViews,this.viewSpaces}}getViewport(E,w,v,G,M){if(M===void 0){const e=this.sessions.get(E).baseLayer.context;G.x=0,G.y=0,G.width=e.drawingBufferWidth,G.height=e.drawingBufferHeight}else{const e=$(),t=M%e.quiltWidth,r=Math.floor(M/e.quiltWidth);G.x=e.framebufferWidth/e.quiltWidth*t,G.y=e.framebufferHeight/e.quiltHeight*r,G.width=e.framebufferWidth/e.quiltWidth,G.height=e.framebufferHeight/e.quiltHeight}return!0}getProjectionMatrix(E,w){return w===void 0?this.inlineProjectionMatrix:this.LookingGlassProjectionMatrices[w]||ee.mat4.create()}getBasePoseMatrix(){return this.basePoseMatrix}getBaseViewMatrix(){return this.inlineInverseViewMatrix}_getViewMatrixByIndex(E){return this.LookingGlassInverseViewMatrices[E]=this.LookingGlassInverseViewMatrices[E]||ee.mat4.create()}getInputSources(){return[]}getInputPose(E,w,v){return null}onWindowResize(){}};let K=R;U(K,"instance",null);let we=0;class Ee{constructor(w,v){U(this,"mode"),U(this,"immersive"),U(this,"id"),U(this,"baseLayer"),U(this,"inlineVerticalFieldOfView"),U(this,"ended"),U(this,"enabledFeatures"),this.mode=w,this.immersive=w==="immersive-vr"||w==="immersive-ar",this.id=++we,this.baseLayer=null,this.inlineVerticalFieldOfView=Math.PI*.5,this.ended=!1,this.enabledFeatures=v}}class Te extends pe.default{constructor(w){super();U(this,"viewIndex"),this.viewIndex=w}get eye(){return"none"}_onPoseUpdate(w){this._inverseBaseMatrix=w._getViewMatrixByIndex(this.viewIndex)}}class L extends Z.default{constructor(w){super();U(this,"vrButton"),U(this,"device"),U(this,"isPresenting",!1),j(w),this.loadPolyfill()}static async init(w){new L(w)}async loadPolyfill(){this.overrideDefaultVRButton(),console.warn('Looking Glass WebXR "polyfill" overriding native WebXR API.');for(const w in ie.default)this.global[w]=ie.default[w];this.global.XRWebGLLayer=f,this.injected=!0,this.device=new K(this.global),this.xr=new x.default(Promise.resolve(this.device)),Object.defineProperty(this.global.navigator,"xr",{value:this.xr,configurable:!0})}async overrideDefaultVRButton(){this.vrButton=await A("VRButton"),this.vrButton&&this.device?(this.device.addEventListener("@@webxr-polyfill/vr-present-start",()=>{this.isPresenting=!0,this.updateVRButtonUI()}),this.device.addEventListener("@@webxr-polyfill/vr-present-end",()=>{this.isPresenting=!1,this.updateVRButtonUI()}),this.vrButton.addEventListener("click",w=>{this.updateVRButtonUI()}),this.updateVRButtonUI()):console.warn("Unable to find VRButton")}async updateVRButtonUI(){if(this.vrButton){await b(100),this.isPresenting?this.vrButton.innerHTML="EXIT LOOKING GLASS":this.vrButton.innerHTML="ENTER LOOKING GLASS";const w=220;this.vrButton.style.width=`${w}px`,this.vrButton.style.left=`calc(50% - ${w/2}px)`}}update(w){j(w)}}async function A(E){return new Promise(w=>{const v=new MutationObserver(function(G){G.forEach(function(M){M.addedNodes.forEach(function(e){const t=e;t.id===E&&(w(t),v.disconnect())})})});v.observe(document.body,{subtree:!1,childList:!0}),setTimeout(()=>{v.disconnect(),w(null)},5e3)})}function b(E){return new Promise(w=>setTimeout(w,E))}const S=$()},{"@lookingglass/webxr-polyfill/src/api/index":"eytcy","@lookingglass/webxr-polyfill/src/api/XRSystem":"fJEYR","@lookingglass/webxr-polyfill/src/WebXRPolyfill":"e9hlL","holoplay-core":"8DXo9","@lookingglass/webxr-polyfill/src/devices/XRDevice":"2Jvjj","@lookingglass/webxr-polyfill/src/api/XRSpace":"cO4ve","gl-matrix":"36S8q","@lookingglass/webxr-polyfill/src/api/XRWebGLLayer":"gHFkz","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],eytcy:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("./XRSystem"),ie=l.interopDefault(T),ne=C("./XRSession"),x=l.interopDefault(ne),Q=C("./XRSessionEvent"),Z=l.interopDefault(Q),re=C("./XRFrame"),Y=l.interopDefault(re),te=C("./XRView"),k=l.interopDefault(te),pe=C("./XRViewport"),ee=l.interopDefault(pe),ve=C("./XRViewerPose"),Ie=l.interopDefault(ve),xe=C("./XRInputSource"),q=l.interopDefault(xe),U=C("./XRInputSourceEvent"),ue=l.interopDefault(U),D=C("./XRInputSourcesChangeEvent"),ye=l.interopDefault(D),z=C("./XRWebGLLayer"),$=l.interopDefault(z),j=C("./XRSpace"),oe=l.interopDefault(j),ce=C("./XRReferenceSpace"),be=l.interopDefault(ce),ge=C("./XRReferenceSpaceEvent"),Qe=l.interopDefault(ge),_e=C("./XRRenderState"),Le=l.interopDefault(_e),ze=C("./XRRigidTransform"),Xe=l.interopDefault(ze),He=C("./XRPose"),f=l.interopDefault(He);o.default={XRSystem:ie.default,XRSession:x.default,XRSessionEvent:Z.default,XRFrame:Y.default,XRView:k.default,XRViewport:ee.default,XRViewerPose:Ie.default,XRWebGLLayer:$.default,XRSpace:oe.default,XRReferenceSpace:be.default,XRReferenceSpaceEvent:Qe.default,XRInputSource:q.default,XRInputSourceEvent:ue.default,XRInputSourcesChangeEvent:ye.default,XRRenderState:Le.default,XRRigidTransform:Xe.default,XRPose:f.default}},{"./XRSystem":"fJEYR","./XRSession":"dvFzp","./XRSessionEvent":"91P16","./XRFrame":"42OoZ","./XRView":"hCgN1","./XRViewport":"l0Vir","./XRViewerPose":"erVb6","./XRInputSource":"94RWx","./XRInputSourceEvent":"6tOje","./XRInputSourcesChangeEvent":"jaivQ","./XRWebGLLayer":"gHFkz","./XRSpace":"cO4ve","./XRReferenceSpace":"1wDMx","./XRReferenceSpaceEvent":"b6SAu","./XRRenderState":"joLzs","./XRRigidTransform":"hGGT0","./XRPose":"fmx0d","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],fJEYR:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>x),l.export(o,"XRSessionModes",()=>Q);var T=C("../lib/EventTarget"),ie=l.interopDefault(T),ne=C("./XRReferenceSpace");const x=Symbol("@@webxr-polyfill/XR"),Q=["inline","immersive-vr","immersive-ar"],Z={inline:{requiredFeatures:["viewer"],optionalFeatures:[]},"immersive-vr":{requiredFeatures:["viewer","local"],optionalFeatures:[]},"immersive-ar":{requiredFeatures:["viewer","local"],optionalFeatures:[]}},re=`Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode
or navigator.xr.requestSession('inline') prior to requesting an immersive
session. This is a limitation specific to the WebXR Polyfill and does not apply
to native implementations of the API.`;class Y extends ie.default{constructor(k){super();this[x]={device:null,devicePromise:k,immersiveSession:null,inlineSessions:new Set},k.then(pe=>{this[x].device=pe})}async isSessionSupported(k){return this[x].device||await this[x].devicePromise,k!="inline"?Promise.resolve(this[x].device.isSessionSupported(k)):Promise.resolve(!0)}async requestSession(k,pe){if(!this[x].device){if(k!="inline")throw new Error(re);await this[x].devicePromise}if(!Q.includes(k))throw new TypeError(`The provided value '${k}' is not a valid enum value of type XRSessionMode`);const ee=Z[k],ve=ee.requiredFeatures.concat(pe&&pe.requiredFeatures?pe.requiredFeatures:[]),Ie=ee.optionalFeatures.concat(pe&&pe.optionalFeatures?pe.optionalFeatures:[]),xe=new Set;let q=!1;for(let ye of ve)this[x].device.isFeatureSupported(ye)?xe.add(ye):(console.error(`The required feature '${ye}' is not supported`),q=!0);if(q)throw new DOMException("Session does not support some required features","NotSupportedError");for(let ye of Ie)this[x].device.isFeatureSupported(ye)?xe.add(ye):console.log(`The optional feature '${ye}' is not supported`);const U=await this[x].device.requestSession(k,xe),ue=new XRSession(this[x].device,k,U);k=="inline"?this[x].inlineSessions.add(ue):this[x].immersiveSession=ue;const D=()=>{k=="inline"?this[x].inlineSessions.delete(ue):this[x].immersiveSession=null,ue.removeEventListener("end",D)};return ue.addEventListener("end",D),ue}}o.default=Y},{"../lib/EventTarget":"da0uT","./XRReferenceSpace":"1wDMx","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],da0uT:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);const T=Symbol("@@webxr-polyfill/EventTarget");class ie{constructor(){this[T]={listeners:new Map}}addEventListener(x,Q){if(typeof x!="string")throw new Error("`type` must be a string");if(typeof Q!="function")throw new Error("`listener` must be a function");const Z=this[T].listeners.get(x)||[];Z.push(Q),this[T].listeners.set(x,Z)}removeEventListener(x,Q){if(typeof x!="string")throw new Error("`type` must be a string");if(typeof Q!="function")throw new Error("`listener` must be a function");const Z=this[T].listeners.get(x)||[];for(let re=Z.length;re>=0;re--)Z[re]===Q&&Z.pop()}dispatchEvent(x,Q){const Z=this[T].listeners.get(x)||[],re=[];for(let Y=0;Y<Z.length;Y++)re[Y]=Z[Y];for(let Y of re)Y(Q);typeof this[`on${x}`]=="function"&&this[`on${x}`](Q)}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"1wDMx":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>Q),l.export(o,"XRReferenceSpaceTypes",()=>Z);var T=C("./XRSpace"),ie=l.interopDefault(T),ne=C("gl-matrix/src/gl-matrix/mat4");const x=1.6,Q=Symbol("@@webxr-polyfill/XRReferenceSpace"),Z=["viewer","local","local-floor","bounded-floor","unbounded"];function re(te){return te==="bounded-floor"||te==="local-floor"}class Y extends ie.default{constructor(k,pe=null){if(!Z.includes(k))throw new Error(`XRReferenceSpaceType must be one of ${Z}`);super(k);if(k==="bounded-floor"&&!pe)throw new Error("XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level");re(k)&&!pe&&(pe=ne.identity(new Float32Array(16)),pe[13]=x),this._inverseBaseMatrix=pe||ne.identity(new Float32Array(16)),this[Q]={type:k,transform:pe,originOffset:ne.identity(new Float32Array(16))}}_transformBasePoseMatrix(k,pe){ne.multiply(k,this._inverseBaseMatrix,pe)}_originOffsetMatrix(){return this[Q].originOffset}_adjustForOriginOffset(k){let pe=new Float32Array(16);ne.invert(pe,this[Q].originOffset),ne.multiply(k,pe,k)}_getSpaceRelativeTransform(k){let pe=super._getSpaceRelativeTransform(k);return this._adjustForOriginOffset(pe.matrix),new XRRigidTransform(pe.matrix)}getOffsetReferenceSpace(k){let pe=new Y(this[Q].type,this[Q].transform,this[Q].bounds);return ne.multiply(pe[Q].originOffset,this[Q].originOffset,k.matrix),pe}}o.default=Y},{"./XRSpace":"cO4ve","gl-matrix/src/gl-matrix/mat4":"fwNkE","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],cO4ve:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>x),l.export(o,"XRSpaceSpecialTypes",()=>Q);var T=C("./XRRigidTransform"),ie=l.interopDefault(T),ne=C("gl-matrix/src/gl-matrix/mat4");const x=Symbol("@@webxr-polyfill/XRSpace"),Q=["grip","target-ray"];class Z{constructor(Y=null,te=null){this[x]={specialType:Y,inputSource:te,baseMatrix:null,inverseBaseMatrix:null,lastFrameId:-1}}get _specialType(){return this[x].specialType}get _inputSource(){return this[x].inputSource}_ensurePoseUpdated(Y,te){te!=this[x].lastFrameId&&(this[x].lastFrameId=te,this._onPoseUpdate(Y))}_onPoseUpdate(Y){this[x].specialType=="viewer"&&(this._baseMatrix=Y.getBasePoseMatrix())}set _baseMatrix(Y){this[x].baseMatrix=Y,this[x].inverseBaseMatrix=null}get _baseMatrix(){return this[x].baseMatrix||this[x].inverseBaseMatrix&&(this[x].baseMatrix=new Float32Array(16),ne.invert(this[x].baseMatrix,this[x].inverseBaseMatrix)),this[x].baseMatrix}set _inverseBaseMatrix(Y){this[x].inverseBaseMatrix=Y,this[x].baseMatrix=null}get _inverseBaseMatrix(){return this[x].inverseBaseMatrix||this[x].baseMatrix&&(this[x].inverseBaseMatrix=new Float32Array(16),ne.invert(this[x].inverseBaseMatrix,this[x].baseMatrix)),this[x].inverseBaseMatrix}_getSpaceRelativeTransform(Y){if(!this._inverseBaseMatrix||!Y._baseMatrix)return null;let te=new Float32Array(16);return ne.multiply(te,this._inverseBaseMatrix,Y._baseMatrix),new ie.default(te)}}o.default=Z},{"./XRRigidTransform":"hGGT0","gl-matrix/src/gl-matrix/mat4":"fwNkE","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],hGGT0:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>x);var T=C("gl-matrix/src/gl-matrix/mat4"),ie=C("gl-matrix/src/gl-matrix/vec3"),ne=C("gl-matrix/src/gl-matrix/quat");const x=Symbol("@@webxr-polyfill/XRRigidTransform");class Q{constructor(){if(this[x]={matrix:null,position:null,orientation:null,inverse:null},arguments.length===0)this[x].matrix=T.identity(new Float32Array(16));else if(arguments.length===1)arguments[0]instanceof Float32Array?this[x].matrix=arguments[0]:(this[x].position=this._getPoint(arguments[0]),this[x].orientation=DOMPointReadOnly.fromPoint({x:0,y:0,z:0,w:1}));else if(arguments.length===2)this[x].position=this._getPoint(arguments[0]),this[x].orientation=this._getPoint(arguments[1]);else throw new Error("Too many arguments!");if(this[x].matrix){let re=ie.create();T.getTranslation(re,this[x].matrix),this[x].position=DOMPointReadOnly.fromPoint({x:re[0],y:re[1],z:re[2]});let Y=ne.create();T.getRotation(Y,this[x].matrix),this[x].orientation=DOMPointReadOnly.fromPoint({x:Y[0],y:Y[1],z:Y[2],w:Y[3]})}else this[x].matrix=T.identity(new Float32Array(16)),T.fromRotationTranslation(this[x].matrix,ne.fromValues(this[x].orientation.x,this[x].orientation.y,this[x].orientation.z,this[x].orientation.w),ie.fromValues(this[x].position.x,this[x].position.y,this[x].position.z))}_getPoint(re){return re instanceof DOMPointReadOnly?re:DOMPointReadOnly.fromPoint(re)}get matrix(){return this[x].matrix}get position(){return this[x].position}get orientation(){return this[x].orientation}get inverse(){if(this[x].inverse===null){let re=T.identity(new Float32Array(16));T.invert(re,this[x].matrix),this[x].inverse=new Q(re),this[x].inverse[x].inverse=this}return this[x].inverse}}o.default=Q},{"gl-matrix/src/gl-matrix/mat4":"fwNkE","gl-matrix/src/gl-matrix/vec3":"3ENtf","gl-matrix/src/gl-matrix/quat":"danCg","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],fwNkE:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"create",()=>ie),l.export(o,"clone",()=>ne),l.export(o,"copy",()=>x),l.export(o,"fromValues",()=>Q),l.export(o,"set",()=>Z),l.export(o,"identity",()=>re),l.export(o,"transpose",()=>Y),l.export(o,"invert",()=>te),l.export(o,"adjoint",()=>k),l.export(o,"determinant",()=>pe),l.export(o,"multiply",()=>ee),l.export(o,"translate",()=>ve),l.export(o,"scale",()=>Ie),l.export(o,"rotate",()=>xe),l.export(o,"rotateX",()=>q),l.export(o,"rotateY",()=>U),l.export(o,"rotateZ",()=>ue),l.export(o,"fromTranslation",()=>D),l.export(o,"fromScaling",()=>ye),l.export(o,"fromRotation",()=>z),l.export(o,"fromXRotation",()=>$),l.export(o,"fromYRotation",()=>j),l.export(o,"fromZRotation",()=>oe),l.export(o,"fromRotationTranslation",()=>ce),l.export(o,"fromQuat2",()=>be),l.export(o,"getTranslation",()=>ge),l.export(o,"getScaling",()=>Qe),l.export(o,"getRotation",()=>_e),l.export(o,"fromRotationTranslationScale",()=>Le),l.export(o,"fromRotationTranslationScaleOrigin",()=>ze),l.export(o,"fromQuat",()=>Xe),l.export(o,"frustum",()=>He),l.export(o,"perspective",()=>f),l.export(o,"perspectiveFromFieldOfView",()=>R),l.export(o,"ortho",()=>K),l.export(o,"lookAt",()=>we),l.export(o,"targetTo",()=>Ee),l.export(o,"str",()=>Te),l.export(o,"frob",()=>L),l.export(o,"add",()=>A),l.export(o,"subtract",()=>b),l.export(o,"multiplyScalar",()=>S),l.export(o,"multiplyScalarAndAdd",()=>E),l.export(o,"exactEquals",()=>w),l.export(o,"equals",()=>v),l.export(o,"mul",()=>G),l.export(o,"sub",()=>M);var T=C("./common.js");function ie(){let e=new T.ARRAY_TYPE(16);return T.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ne(e){let t=new T.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Q(e,t,r,s,a,h,p,u,g,m,_,F,I,P,V,O){let B=new T.ARRAY_TYPE(16);return B[0]=e,B[1]=t,B[2]=r,B[3]=s,B[4]=a,B[5]=h,B[6]=p,B[7]=u,B[8]=g,B[9]=m,B[10]=_,B[11]=F,B[12]=I,B[13]=P,B[14]=V,B[15]=O,B}function Z(e,t,r,s,a,h,p,u,g,m,_,F,I,P,V,O,B){return e[0]=t,e[1]=r,e[2]=s,e[3]=a,e[4]=h,e[5]=p,e[6]=u,e[7]=g,e[8]=m,e[9]=_,e[10]=F,e[11]=I,e[12]=P,e[13]=V,e[14]=O,e[15]=B,e}function re(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y(e,t){if(e===t){let r=t[1],s=t[2],a=t[3],h=t[6],p=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=h,e[11]=t[14],e[12]=a,e[13]=p,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function te(e,t){let r=t[0],s=t[1],a=t[2],h=t[3],p=t[4],u=t[5],g=t[6],m=t[7],_=t[8],F=t[9],I=t[10],P=t[11],V=t[12],O=t[13],B=t[14],J=t[15],Me=r*u-s*p,ae=r*g-a*p,le=r*m-h*p,Ae=s*g-a*u,de=s*m-h*u,Ce=a*m-h*g,Be=_*O-F*V,Fe=_*B-I*V,Ne=_*J-P*V,ke=F*B-I*O,Ve=F*J-P*O,je=I*J-P*B,Se=Me*je-ae*Ve+le*ke+Ae*Ne-de*Fe+Ce*Be;return Se?(Se=1/Se,e[0]=(u*je-g*Ve+m*ke)*Se,e[1]=(a*Ve-s*je-h*ke)*Se,e[2]=(O*Ce-B*de+J*Ae)*Se,e[3]=(I*de-F*Ce-P*Ae)*Se,e[4]=(g*Ne-p*je-m*Fe)*Se,e[5]=(r*je-a*Ne+h*Fe)*Se,e[6]=(B*le-V*Ce-J*ae)*Se,e[7]=(_*Ce-I*le+P*ae)*Se,e[8]=(p*Ve-u*Ne+m*Be)*Se,e[9]=(s*Ne-r*Ve-h*Be)*Se,e[10]=(V*de-O*le+J*Me)*Se,e[11]=(F*le-_*de-P*Me)*Se,e[12]=(u*Fe-p*ke-g*Be)*Se,e[13]=(r*ke-s*Fe+a*Be)*Se,e[14]=(O*ae-V*Ae-B*Me)*Se,e[15]=(_*Ae-F*ae+I*Me)*Se,e):null}function k(e,t){let r=t[0],s=t[1],a=t[2],h=t[3],p=t[4],u=t[5],g=t[6],m=t[7],_=t[8],F=t[9],I=t[10],P=t[11],V=t[12],O=t[13],B=t[14],J=t[15];return e[0]=u*(I*J-P*B)-F*(g*J-m*B)+O*(g*P-m*I),e[1]=-(s*(I*J-P*B)-F*(a*J-h*B)+O*(a*P-h*I)),e[2]=s*(g*J-m*B)-u*(a*J-h*B)+O*(a*m-h*g),e[3]=-(s*(g*P-m*I)-u*(a*P-h*I)+F*(a*m-h*g)),e[4]=-(p*(I*J-P*B)-_*(g*J-m*B)+V*(g*P-m*I)),e[5]=r*(I*J-P*B)-_*(a*J-h*B)+V*(a*P-h*I),e[6]=-(r*(g*J-m*B)-p*(a*J-h*B)+V*(a*m-h*g)),e[7]=r*(g*P-m*I)-p*(a*P-h*I)+_*(a*m-h*g),e[8]=p*(F*J-P*O)-_*(u*J-m*O)+V*(u*P-m*F),e[9]=-(r*(F*J-P*O)-_*(s*J-h*O)+V*(s*P-h*F)),e[10]=r*(u*J-m*O)-p*(s*J-h*O)+V*(s*m-h*u),e[11]=-(r*(u*P-m*F)-p*(s*P-h*F)+_*(s*m-h*u)),e[12]=-(p*(F*B-I*O)-_*(u*B-g*O)+V*(u*I-g*F)),e[13]=r*(F*B-I*O)-_*(s*B-a*O)+V*(s*I-a*F),e[14]=-(r*(u*B-g*O)-p*(s*B-a*O)+V*(s*g-a*u)),e[15]=r*(u*I-g*F)-p*(s*I-a*F)+_*(s*g-a*u),e}function pe(e){let t=e[0],r=e[1],s=e[2],a=e[3],h=e[4],p=e[5],u=e[6],g=e[7],m=e[8],_=e[9],F=e[10],I=e[11],P=e[12],V=e[13],O=e[14],B=e[15],J=t*p-r*h,Me=t*u-s*h,ae=t*g-a*h,le=r*u-s*p,Ae=r*g-a*p,de=s*g-a*u,Ce=m*V-_*P,Be=m*O-F*P,Fe=m*B-I*P,Ne=_*O-F*V,ke=_*B-I*V,Ve=F*B-I*O;return J*Ve-Me*ke+ae*Ne+le*Fe-Ae*Be+de*Ce}function ee(e,t,r){let s=t[0],a=t[1],h=t[2],p=t[3],u=t[4],g=t[5],m=t[6],_=t[7],F=t[8],I=t[9],P=t[10],V=t[11],O=t[12],B=t[13],J=t[14],Me=t[15],ae=r[0],le=r[1],Ae=r[2],de=r[3];return e[0]=ae*s+le*u+Ae*F+de*O,e[1]=ae*a+le*g+Ae*I+de*B,e[2]=ae*h+le*m+Ae*P+de*J,e[3]=ae*p+le*_+Ae*V+de*Me,ae=r[4],le=r[5],Ae=r[6],de=r[7],e[4]=ae*s+le*u+Ae*F+de*O,e[5]=ae*a+le*g+Ae*I+de*B,e[6]=ae*h+le*m+Ae*P+de*J,e[7]=ae*p+le*_+Ae*V+de*Me,ae=r[8],le=r[9],Ae=r[10],de=r[11],e[8]=ae*s+le*u+Ae*F+de*O,e[9]=ae*a+le*g+Ae*I+de*B,e[10]=ae*h+le*m+Ae*P+de*J,e[11]=ae*p+le*_+Ae*V+de*Me,ae=r[12],le=r[13],Ae=r[14],de=r[15],e[12]=ae*s+le*u+Ae*F+de*O,e[13]=ae*a+le*g+Ae*I+de*B,e[14]=ae*h+le*m+Ae*P+de*J,e[15]=ae*p+le*_+Ae*V+de*Me,e}function ve(e,t,r){let s=r[0],a=r[1],h=r[2],p,u,g,m,_,F,I,P,V,O,B,J;return t===e?(e[12]=t[0]*s+t[4]*a+t[8]*h+t[12],e[13]=t[1]*s+t[5]*a+t[9]*h+t[13],e[14]=t[2]*s+t[6]*a+t[10]*h+t[14],e[15]=t[3]*s+t[7]*a+t[11]*h+t[15]):(p=t[0],u=t[1],g=t[2],m=t[3],_=t[4],F=t[5],I=t[6],P=t[7],V=t[8],O=t[9],B=t[10],J=t[11],e[0]=p,e[1]=u,e[2]=g,e[3]=m,e[4]=_,e[5]=F,e[6]=I,e[7]=P,e[8]=V,e[9]=O,e[10]=B,e[11]=J,e[12]=p*s+_*a+V*h+t[12],e[13]=u*s+F*a+O*h+t[13],e[14]=g*s+I*a+B*h+t[14],e[15]=m*s+P*a+J*h+t[15]),e}function Ie(e,t,r){let s=r[0],a=r[1],h=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*h,e[9]=t[9]*h,e[10]=t[10]*h,e[11]=t[11]*h,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function xe(e,t,r,s){let a=s[0],h=s[1],p=s[2],u=Math.sqrt(a*a+h*h+p*p),g,m,_,F,I,P,V,O,B,J,Me,ae,le,Ae,de,Ce,Be,Fe,Ne,ke,Ve,je,Se,Ze;return u<T.EPSILON?null:(u=1/u,a*=u,h*=u,p*=u,g=Math.sin(r),m=Math.cos(r),_=1-m,F=t[0],I=t[1],P=t[2],V=t[3],O=t[4],B=t[5],J=t[6],Me=t[7],ae=t[8],le=t[9],Ae=t[10],de=t[11],Ce=a*a*_+m,Be=h*a*_+p*g,Fe=p*a*_-h*g,Ne=a*h*_-p*g,ke=h*h*_+m,Ve=p*h*_+a*g,je=a*p*_+h*g,Se=h*p*_-a*g,Ze=p*p*_+m,e[0]=F*Ce+O*Be+ae*Fe,e[1]=I*Ce+B*Be+le*Fe,e[2]=P*Ce+J*Be+Ae*Fe,e[3]=V*Ce+Me*Be+de*Fe,e[4]=F*Ne+O*ke+ae*Ve,e[5]=I*Ne+B*ke+le*Ve,e[6]=P*Ne+J*ke+Ae*Ve,e[7]=V*Ne+Me*ke+de*Ve,e[8]=F*je+O*Se+ae*Ze,e[9]=I*je+B*Se+le*Ze,e[10]=P*je+J*Se+Ae*Ze,e[11]=V*je+Me*Se+de*Ze,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function q(e,t,r){let s=Math.sin(r),a=Math.cos(r),h=t[4],p=t[5],u=t[6],g=t[7],m=t[8],_=t[9],F=t[10],I=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=h*a+m*s,e[5]=p*a+_*s,e[6]=u*a+F*s,e[7]=g*a+I*s,e[8]=m*a-h*s,e[9]=_*a-p*s,e[10]=F*a-u*s,e[11]=I*a-g*s,e}function U(e,t,r){let s=Math.sin(r),a=Math.cos(r),h=t[0],p=t[1],u=t[2],g=t[3],m=t[8],_=t[9],F=t[10],I=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*a-m*s,e[1]=p*a-_*s,e[2]=u*a-F*s,e[3]=g*a-I*s,e[8]=h*s+m*a,e[9]=p*s+_*a,e[10]=u*s+F*a,e[11]=g*s+I*a,e}function ue(e,t,r){let s=Math.sin(r),a=Math.cos(r),h=t[0],p=t[1],u=t[2],g=t[3],m=t[4],_=t[5],F=t[6],I=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*a+m*s,e[1]=p*a+_*s,e[2]=u*a+F*s,e[3]=g*a+I*s,e[4]=m*a-h*s,e[5]=_*a-p*s,e[6]=F*a-u*s,e[7]=I*a-g*s,e}function D(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ye(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,t,r){let s=r[0],a=r[1],h=r[2],p=Math.sqrt(s*s+a*a+h*h),u,g,m;return p<T.EPSILON?null:(p=1/p,s*=p,a*=p,h*=p,u=Math.sin(t),g=Math.cos(t),m=1-g,e[0]=s*s*m+g,e[1]=a*s*m+h*u,e[2]=h*s*m-a*u,e[3]=0,e[4]=s*a*m-h*u,e[5]=a*a*m+g,e[6]=h*a*m+s*u,e[7]=0,e[8]=s*h*m+a*u,e[9]=a*h*m-s*u,e[10]=h*h*m+g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function $(e,t){let r=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){let r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oe(e,t){let r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ce(e,t,r){let s=t[0],a=t[1],h=t[2],p=t[3],u=s+s,g=a+a,m=h+h,_=s*u,F=s*g,I=s*m,P=a*g,V=a*m,O=h*m,B=p*u,J=p*g,Me=p*m;return e[0]=1-(P+O),e[1]=F+Me,e[2]=I-J,e[3]=0,e[4]=F-Me,e[5]=1-(_+O),e[6]=V+B,e[7]=0,e[8]=I+J,e[9]=V-B,e[10]=1-(_+P),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function be(e,t){let r=new T.ARRAY_TYPE(3),s=-t[0],a=-t[1],h=-t[2],p=t[3],u=t[4],g=t[5],m=t[6],_=t[7],F=s*s+a*a+h*h+p*p;return F>0?(r[0]=(u*p+_*s+g*h-m*a)*2/F,r[1]=(g*p+_*a+m*s-u*h)*2/F,r[2]=(m*p+_*h+u*a-g*s)*2/F):(r[0]=(u*p+_*s+g*h-m*a)*2,r[1]=(g*p+_*a+m*s-u*h)*2,r[2]=(m*p+_*h+u*a-g*s)*2),ce(e,t,r),e}function ge(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Qe(e,t){let r=t[0],s=t[1],a=t[2],h=t[4],p=t[5],u=t[6],g=t[8],m=t[9],_=t[10];return e[0]=Math.sqrt(r*r+s*s+a*a),e[1]=Math.sqrt(h*h+p*p+u*u),e[2]=Math.sqrt(g*g+m*m+_*_),e}function _e(e,t){let r=t[0]+t[5]+t[10],s=0;return r>0?(s=Math.sqrt(r+1)*2,e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=Math.sqrt(1+t[0]-t[5]-t[10])*2,e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=Math.sqrt(1+t[5]-t[0]-t[10])*2,e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=Math.sqrt(1+t[10]-t[0]-t[5])*2,e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function Le(e,t,r,s){let a=t[0],h=t[1],p=t[2],u=t[3],g=a+a,m=h+h,_=p+p,F=a*g,I=a*m,P=a*_,V=h*m,O=h*_,B=p*_,J=u*g,Me=u*m,ae=u*_,le=s[0],Ae=s[1],de=s[2];return e[0]=(1-(V+B))*le,e[1]=(I+ae)*le,e[2]=(P-Me)*le,e[3]=0,e[4]=(I-ae)*Ae,e[5]=(1-(F+B))*Ae,e[6]=(O+J)*Ae,e[7]=0,e[8]=(P+Me)*de,e[9]=(O-J)*de,e[10]=(1-(F+V))*de,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ze(e,t,r,s,a){let h=t[0],p=t[1],u=t[2],g=t[3],m=h+h,_=p+p,F=u+u,I=h*m,P=h*_,V=h*F,O=p*_,B=p*F,J=u*F,Me=g*m,ae=g*_,le=g*F,Ae=s[0],de=s[1],Ce=s[2],Be=a[0],Fe=a[1],Ne=a[2],ke=(1-(O+J))*Ae,Ve=(P+le)*Ae,je=(V-ae)*Ae,Se=(P-le)*de,Ze=(1-(I+J))*de,tt=(B+Me)*de,ct=(V+ae)*Ce,fe=(B-Me)*Ce,$e=(1-(I+O))*Ce;return e[0]=ke,e[1]=Ve,e[2]=je,e[3]=0,e[4]=Se,e[5]=Ze,e[6]=tt,e[7]=0,e[8]=ct,e[9]=fe,e[10]=$e,e[11]=0,e[12]=r[0]+Be-(ke*Be+Se*Fe+ct*Ne),e[13]=r[1]+Fe-(Ve*Be+Ze*Fe+fe*Ne),e[14]=r[2]+Ne-(je*Be+tt*Fe+$e*Ne),e[15]=1,e}function Xe(e,t){let r=t[0],s=t[1],a=t[2],h=t[3],p=r+r,u=s+s,g=a+a,m=r*p,_=s*p,F=s*u,I=a*p,P=a*u,V=a*g,O=h*p,B=h*u,J=h*g;return e[0]=1-F-V,e[1]=_+J,e[2]=I-B,e[3]=0,e[4]=_-J,e[5]=1-m-V,e[6]=P+O,e[7]=0,e[8]=I+B,e[9]=P-O,e[10]=1-m-F,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function He(e,t,r,s,a,h,p){let u=1/(r-t),g=1/(a-s),m=1/(h-p);return e[0]=h*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h*2*g,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(a+s)*g,e[10]=(p+h)*m,e[11]=-1,e[12]=0,e[13]=0,e[14]=p*h*2*m,e[15]=0,e}function f(e,t,r,s,a){let h=1/Math.tan(t/2),p;return e[0]=h/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(p=1/(s-a),e[10]=(a+s)*p,e[14]=2*a*s*p):(e[10]=-1,e[14]=-2*s),e}function R(e,t,r,s){let a=Math.tan(t.upDegrees*Math.PI/180),h=Math.tan(t.downDegrees*Math.PI/180),p=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),g=2/(p+u),m=2/(a+h);return e[0]=g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=m,e[6]=0,e[7]=0,e[8]=-((p-u)*g*.5),e[9]=(a-h)*m*.5,e[10]=s/(r-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*r/(r-s),e[15]=0,e}function K(e,t,r,s,a,h,p){let u=1/(t-r),g=1/(s-a),m=1/(h-p);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*m,e[11]=0,e[12]=(t+r)*u,e[13]=(a+s)*g,e[14]=(p+h)*m,e[15]=1,e}function we(e,t,r,s){let a,h,p,u,g,m,_,F,I,P,V=t[0],O=t[1],B=t[2],J=s[0],Me=s[1],ae=s[2],le=r[0],Ae=r[1],de=r[2];return Math.abs(V-le)<T.EPSILON&&Math.abs(O-Ae)<T.EPSILON&&Math.abs(B-de)<T.EPSILON?re(e):(_=V-le,F=O-Ae,I=B-de,P=1/Math.sqrt(_*_+F*F+I*I),_*=P,F*=P,I*=P,a=Me*I-ae*F,h=ae*_-J*I,p=J*F-Me*_,P=Math.sqrt(a*a+h*h+p*p),P?(P=1/P,a*=P,h*=P,p*=P):(a=0,h=0,p=0),u=F*p-I*h,g=I*a-_*p,m=_*h-F*a,P=Math.sqrt(u*u+g*g+m*m),P?(P=1/P,u*=P,g*=P,m*=P):(u=0,g=0,m=0),e[0]=a,e[1]=u,e[2]=_,e[3]=0,e[4]=h,e[5]=g,e[6]=F,e[7]=0,e[8]=p,e[9]=m,e[10]=I,e[11]=0,e[12]=-(a*V+h*O+p*B),e[13]=-(u*V+g*O+m*B),e[14]=-(_*V+F*O+I*B),e[15]=1,e)}function Ee(e,t,r,s){let a=t[0],h=t[1],p=t[2],u=s[0],g=s[1],m=s[2],_=a-r[0],F=h-r[1],I=p-r[2],P=_*_+F*F+I*I;P>0&&(P=1/Math.sqrt(P),_*=P,F*=P,I*=P);let V=g*I-m*F,O=m*_-u*I,B=u*F-g*_;return P=V*V+O*O+B*B,P>0&&(P=1/Math.sqrt(P),V*=P,O*=P,B*=P),e[0]=V,e[1]=O,e[2]=B,e[3]=0,e[4]=F*B-I*O,e[5]=I*V-_*B,e[6]=_*O-F*V,e[7]=0,e[8]=_,e[9]=F,e[10]=I,e[11]=0,e[12]=a,e[13]=h,e[14]=p,e[15]=1,e}function Te(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function L(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function A(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function b(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function S(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function E(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e[4]=t[4]+r[4]*s,e[5]=t[5]+r[5]*s,e[6]=t[6]+r[6]*s,e[7]=t[7]+r[7]*s,e[8]=t[8]+r[8]*s,e[9]=t[9]+r[9]*s,e[10]=t[10]+r[10]*s,e[11]=t[11]+r[11]*s,e[12]=t[12]+r[12]*s,e[13]=t[13]+r[13]*s,e[14]=t[14]+r[14]*s,e[15]=t[15]+r[15]*s,e}function w(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function v(e,t){let r=e[0],s=e[1],a=e[2],h=e[3],p=e[4],u=e[5],g=e[6],m=e[7],_=e[8],F=e[9],I=e[10],P=e[11],V=e[12],O=e[13],B=e[14],J=e[15],Me=t[0],ae=t[1],le=t[2],Ae=t[3],de=t[4],Ce=t[5],Be=t[6],Fe=t[7],Ne=t[8],ke=t[9],Ve=t[10],je=t[11],Se=t[12],Ze=t[13],tt=t[14],ct=t[15];return Math.abs(r-Me)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(Me))&&Math.abs(s-ae)<=T.EPSILON*Math.max(1,Math.abs(s),Math.abs(ae))&&Math.abs(a-le)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(le))&&Math.abs(h-Ae)<=T.EPSILON*Math.max(1,Math.abs(h),Math.abs(Ae))&&Math.abs(p-de)<=T.EPSILON*Math.max(1,Math.abs(p),Math.abs(de))&&Math.abs(u-Ce)<=T.EPSILON*Math.max(1,Math.abs(u),Math.abs(Ce))&&Math.abs(g-Be)<=T.EPSILON*Math.max(1,Math.abs(g),Math.abs(Be))&&Math.abs(m-Fe)<=T.EPSILON*Math.max(1,Math.abs(m),Math.abs(Fe))&&Math.abs(_-Ne)<=T.EPSILON*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(F-ke)<=T.EPSILON*Math.max(1,Math.abs(F),Math.abs(ke))&&Math.abs(I-Ve)<=T.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ve))&&Math.abs(P-je)<=T.EPSILON*Math.max(1,Math.abs(P),Math.abs(je))&&Math.abs(V-Se)<=T.EPSILON*Math.max(1,Math.abs(V),Math.abs(Se))&&Math.abs(O-Ze)<=T.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ze))&&Math.abs(B-tt)<=T.EPSILON*Math.max(1,Math.abs(B),Math.abs(tt))&&Math.abs(J-ct)<=T.EPSILON*Math.max(1,Math.abs(J),Math.abs(ct))}const G=ee,M=b},{"./common.js":"gmUyR","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],gmUyR:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"EPSILON",()=>T),l.export(o,"ARRAY_TYPE",()=>ie),l.export(o,"RANDOM",()=>ne),l.export(o,"setMatrixArrayType",()=>x),l.export(o,"toRadian",()=>Z),l.export(o,"equals",()=>re);const T=1e-6;let ie=typeof Float32Array!="undefined"?Float32Array:Array;const ne=Math.random;function x(Y){ie=Y}const Q=Math.PI/180;function Z(Y){return Y*Q}function re(Y,te){return Math.abs(Y-te)<=T*Math.max(1,Math.abs(Y),Math.abs(te))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"3ENtf":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"create",()=>ie),l.export(o,"clone",()=>ne),l.export(o,"length",()=>x),l.export(o,"fromValues",()=>Q),l.export(o,"copy",()=>Z),l.export(o,"set",()=>re),l.export(o,"add",()=>Y),l.export(o,"subtract",()=>te),l.export(o,"multiply",()=>k),l.export(o,"divide",()=>pe),l.export(o,"ceil",()=>ee),l.export(o,"floor",()=>ve),l.export(o,"min",()=>Ie),l.export(o,"max",()=>xe),l.export(o,"round",()=>q),l.export(o,"scale",()=>U),l.export(o,"scaleAndAdd",()=>ue),l.export(o,"distance",()=>D),l.export(o,"squaredDistance",()=>ye),l.export(o,"squaredLength",()=>z),l.export(o,"negate",()=>$),l.export(o,"inverse",()=>j),l.export(o,"normalize",()=>oe),l.export(o,"dot",()=>ce),l.export(o,"cross",()=>be),l.export(o,"lerp",()=>ge),l.export(o,"hermite",()=>Qe),l.export(o,"bezier",()=>_e),l.export(o,"random",()=>Le),l.export(o,"transformMat4",()=>ze),l.export(o,"transformMat3",()=>Xe),l.export(o,"transformQuat",()=>He),l.export(o,"rotateX",()=>f),l.export(o,"rotateY",()=>R),l.export(o,"rotateZ",()=>K),l.export(o,"angle",()=>we),l.export(o,"str",()=>Ee),l.export(o,"exactEquals",()=>Te),l.export(o,"equals",()=>L),l.export(o,"sub",()=>A),l.export(o,"mul",()=>b),l.export(o,"div",()=>S),l.export(o,"dist",()=>E),l.export(o,"sqrDist",()=>w),l.export(o,"len",()=>v),l.export(o,"sqrLen",()=>G),l.export(o,"forEach",()=>M);var T=C("./common.js");function ie(){let e=new T.ARRAY_TYPE(3);return T.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ne(e){var t=new T.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function x(e){let t=e[0],r=e[1],s=e[2];return Math.sqrt(t*t+r*r+s*s)}function Q(e,t,r){let s=new T.ARRAY_TYPE(3);return s[0]=e,s[1]=t,s[2]=r,s}function Z(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function re(e,t,r,s){return e[0]=t,e[1]=r,e[2]=s,e}function Y(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function te(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function k(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function pe(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function ee(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ve(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Ie(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function xe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function q(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function U(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function ue(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e}function D(e,t){let r=t[0]-e[0],s=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(r*r+s*s+a*a)}function ye(e,t){let r=t[0]-e[0],s=t[1]-e[1],a=t[2]-e[2];return r*r+s*s+a*a}function z(e){let t=e[0],r=e[1],s=e[2];return t*t+r*r+s*s}function $(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function oe(e,t){let r=t[0],s=t[1],a=t[2],h=r*r+s*s+a*a;return h>0&&(h=1/Math.sqrt(h),e[0]=t[0]*h,e[1]=t[1]*h,e[2]=t[2]*h),e}function ce(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function be(e,t,r){let s=t[0],a=t[1],h=t[2],p=r[0],u=r[1],g=r[2];return e[0]=a*g-h*u,e[1]=h*p-s*g,e[2]=s*u-a*p,e}function ge(e,t,r,s){let a=t[0],h=t[1],p=t[2];return e[0]=a+s*(r[0]-a),e[1]=h+s*(r[1]-h),e[2]=p+s*(r[2]-p),e}function Qe(e,t,r,s,a,h){let p=h*h,u=p*(2*h-3)+1,g=p*(h-2)+h,m=p*(h-1),_=p*(3-2*h);return e[0]=t[0]*u+r[0]*g+s[0]*m+a[0]*_,e[1]=t[1]*u+r[1]*g+s[1]*m+a[1]*_,e[2]=t[2]*u+r[2]*g+s[2]*m+a[2]*_,e}function _e(e,t,r,s,a,h){let p=1-h,u=p*p,g=h*h,m=u*p,_=3*h*u,F=3*g*p,I=g*h;return e[0]=t[0]*m+r[0]*_+s[0]*F+a[0]*I,e[1]=t[1]*m+r[1]*_+s[1]*F+a[1]*I,e[2]=t[2]*m+r[2]*_+s[2]*F+a[2]*I,e}function Le(e,t){t=t||1;let r=T.RANDOM()*2*Math.PI,s=T.RANDOM()*2-1,a=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=s*t,e}function ze(e,t,r){let s=t[0],a=t[1],h=t[2],p=r[3]*s+r[7]*a+r[11]*h+r[15];return p=p||1,e[0]=(r[0]*s+r[4]*a+r[8]*h+r[12])/p,e[1]=(r[1]*s+r[5]*a+r[9]*h+r[13])/p,e[2]=(r[2]*s+r[6]*a+r[10]*h+r[14])/p,e}function Xe(e,t,r){let s=t[0],a=t[1],h=t[2];return e[0]=s*r[0]+a*r[3]+h*r[6],e[1]=s*r[1]+a*r[4]+h*r[7],e[2]=s*r[2]+a*r[5]+h*r[8],e}function He(e,t,r){let s=r[0],a=r[1],h=r[2],p=r[3],u=t[0],g=t[1],m=t[2],_=a*m-h*g,F=h*u-s*m,I=s*g-a*u,P=a*I-h*F,V=h*_-s*I,O=s*F-a*_,B=p*2;return _*=B,F*=B,I*=B,P*=2,V*=2,O*=2,e[0]=u+_+P,e[1]=g+F+V,e[2]=m+I+O,e}function f(e,t,r,s){let a=[],h=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],h[0]=a[0],h[1]=a[1]*Math.cos(s)-a[2]*Math.sin(s),h[2]=a[1]*Math.sin(s)+a[2]*Math.cos(s),e[0]=h[0]+r[0],e[1]=h[1]+r[1],e[2]=h[2]+r[2],e}function R(e,t,r,s){let a=[],h=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],h[0]=a[2]*Math.sin(s)+a[0]*Math.cos(s),h[1]=a[1],h[2]=a[2]*Math.cos(s)-a[0]*Math.sin(s),e[0]=h[0]+r[0],e[1]=h[1]+r[1],e[2]=h[2]+r[2],e}function K(e,t,r,s){let a=[],h=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],h[0]=a[0]*Math.cos(s)-a[1]*Math.sin(s),h[1]=a[0]*Math.sin(s)+a[1]*Math.cos(s),h[2]=a[2],e[0]=h[0]+r[0],e[1]=h[1]+r[1],e[2]=h[2]+r[2],e}function we(e,t){let r=Q(e[0],e[1],e[2]),s=Q(t[0],t[1],t[2]);oe(r,r),oe(s,s);let a=ce(r,s);return a>1?0:a<-1?Math.PI:Math.acos(a)}function Ee(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Te(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function L(e,t){let r=e[0],s=e[1],a=e[2],h=t[0],p=t[1],u=t[2];return Math.abs(r-h)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-p)<=T.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-u)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))}const A=te,b=k,S=pe,E=D,w=ye,v=x,G=z,M=function(){let e=ie();return function(t,r,s,a,h,p){let u,g;for(r||(r=3),s||(s=0),a?g=Math.min(a*r+s,t.length):g=t.length,u=s;u<g;u+=r)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],h(e,e,p),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}()},{"./common.js":"gmUyR","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],danCg:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"create",()=>Q),l.export(o,"identity",()=>Z),l.export(o,"setAxisAngle",()=>re),l.export(o,"getAxisAngle",()=>Y),l.export(o,"multiply",()=>te),l.export(o,"rotateX",()=>k),l.export(o,"rotateY",()=>pe),l.export(o,"rotateZ",()=>ee),l.export(o,"calculateW",()=>ve),l.export(o,"slerp",()=>Ie),l.export(o,"random",()=>xe),l.export(o,"invert",()=>q),l.export(o,"conjugate",()=>U),l.export(o,"fromMat3",()=>ue),l.export(o,"fromEuler",()=>D),l.export(o,"str",()=>ye),l.export(o,"clone",()=>z),l.export(o,"fromValues",()=>$),l.export(o,"copy",()=>j),l.export(o,"set",()=>oe),l.export(o,"add",()=>ce),l.export(o,"mul",()=>be),l.export(o,"scale",()=>ge),l.export(o,"dot",()=>Qe),l.export(o,"lerp",()=>_e),l.export(o,"length",()=>Le),l.export(o,"len",()=>ze),l.export(o,"squaredLength",()=>Xe),l.export(o,"sqrLen",()=>He),l.export(o,"normalize",()=>f),l.export(o,"exactEquals",()=>R),l.export(o,"equals",()=>K),l.export(o,"rotationTo",()=>we),l.export(o,"sqlerp",()=>Ee),l.export(o,"setAxes",()=>Te);var T=C("./common.js"),ie=C("./mat3.js"),ne=C("./vec3.js"),x=C("./vec4.js");function Q(){let L=new T.ARRAY_TYPE(4);return T.ARRAY_TYPE!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L[3]=1,L}function Z(L){return L[0]=0,L[1]=0,L[2]=0,L[3]=1,L}function re(L,A,b){b=b*.5;let S=Math.sin(b);return L[0]=S*A[0],L[1]=S*A[1],L[2]=S*A[2],L[3]=Math.cos(b),L}function Y(L,A){let b=Math.acos(A[3])*2,S=Math.sin(b/2);return S>T.EPSILON?(L[0]=A[0]/S,L[1]=A[1]/S,L[2]=A[2]/S):(L[0]=1,L[1]=0,L[2]=0),b}function te(L,A,b){let S=A[0],E=A[1],w=A[2],v=A[3],G=b[0],M=b[1],e=b[2],t=b[3];return L[0]=S*t+v*G+E*e-w*M,L[1]=E*t+v*M+w*G-S*e,L[2]=w*t+v*e+S*M-E*G,L[3]=v*t-S*G-E*M-w*e,L}function k(L,A,b){b*=.5;let S=A[0],E=A[1],w=A[2],v=A[3],G=Math.sin(b),M=Math.cos(b);return L[0]=S*M+v*G,L[1]=E*M+w*G,L[2]=w*M-E*G,L[3]=v*M-S*G,L}function pe(L,A,b){b*=.5;let S=A[0],E=A[1],w=A[2],v=A[3],G=Math.sin(b),M=Math.cos(b);return L[0]=S*M-w*G,L[1]=E*M+v*G,L[2]=w*M+S*G,L[3]=v*M-E*G,L}function ee(L,A,b){b*=.5;let S=A[0],E=A[1],w=A[2],v=A[3],G=Math.sin(b),M=Math.cos(b);return L[0]=S*M+E*G,L[1]=E*M-S*G,L[2]=w*M+v*G,L[3]=v*M-w*G,L}function ve(L,A){let b=A[0],S=A[1],E=A[2];return L[0]=b,L[1]=S,L[2]=E,L[3]=Math.sqrt(Math.abs(1-b*b-S*S-E*E)),L}function Ie(L,A,b,S){let E=A[0],w=A[1],v=A[2],G=A[3],M=b[0],e=b[1],t=b[2],r=b[3],s,a,h,p,u;return a=E*M+w*e+v*t+G*r,a<0&&(a=-a,M=-M,e=-e,t=-t,r=-r),1-a>T.EPSILON?(s=Math.acos(a),h=Math.sin(s),p=Math.sin((1-S)*s)/h,u=Math.sin(S*s)/h):(p=1-S,u=S),L[0]=p*E+u*M,L[1]=p*w+u*e,L[2]=p*v+u*t,L[3]=p*G+u*r,L}function xe(L){let A=T.RANDOM(),b=T.RANDOM(),S=T.RANDOM(),E=Math.sqrt(1-A),w=Math.sqrt(A);return L[0]=E*Math.sin(2*Math.PI*b),L[1]=E*Math.cos(2*Math.PI*b),L[2]=w*Math.sin(2*Math.PI*S),L[3]=w*Math.cos(2*Math.PI*S),L}function q(L,A){let b=A[0],S=A[1],E=A[2],w=A[3],v=b*b+S*S+E*E+w*w,G=v?1/v:0;return L[0]=-b*G,L[1]=-S*G,L[2]=-E*G,L[3]=w*G,L}function U(L,A){return L[0]=-A[0],L[1]=-A[1],L[2]=-A[2],L[3]=A[3],L}function ue(L,A){let b=A[0]+A[4]+A[8],S;if(b>0)S=Math.sqrt(b+1),L[3]=.5*S,S=.5/S,L[0]=(A[5]-A[7])*S,L[1]=(A[6]-A[2])*S,L[2]=(A[1]-A[3])*S;else{let E=0;A[4]>A[0]&&(E=1),A[8]>A[E*3+E]&&(E=2);let w=(E+1)%3,v=(E+2)%3;S=Math.sqrt(A[E*3+E]-A[w*3+w]-A[v*3+v]+1),L[E]=.5*S,S=.5/S,L[3]=(A[w*3+v]-A[v*3+w])*S,L[w]=(A[w*3+E]+A[E*3+w])*S,L[v]=(A[v*3+E]+A[E*3+v])*S}return L}function D(L,A,b,S){let E=.5*Math.PI/180;A*=E,b*=E,S*=E;let w=Math.sin(A),v=Math.cos(A),G=Math.sin(b),M=Math.cos(b),e=Math.sin(S),t=Math.cos(S);return L[0]=w*M*t-v*G*e,L[1]=v*G*t+w*M*e,L[2]=v*M*e-w*G*t,L[3]=v*M*t+w*G*e,L}function ye(L){return"quat("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+")"}const z=x.clone,$=x.fromValues,j=x.copy,oe=x.set,ce=x.add,be=te,ge=x.scale,Qe=x.dot,_e=x.lerp,Le=x.length,ze=Le,Xe=x.squaredLength,He=Xe,f=x.normalize,R=x.exactEquals,K=x.equals,we=function(){let L=ne.create(),A=ne.fromValues(1,0,0),b=ne.fromValues(0,1,0);return function(S,E,w){let v=ne.dot(E,w);return v<-.999999?(ne.cross(L,A,E),ne.len(L)<1e-6&&ne.cross(L,b,E),ne.normalize(L,L),re(S,L,Math.PI),S):v>.999999?(S[0]=0,S[1]=0,S[2]=0,S[3]=1,S):(ne.cross(L,E,w),S[0]=L[0],S[1]=L[1],S[2]=L[2],S[3]=1+v,f(S,S))}}(),Ee=function(){let L=Q(),A=Q();return function(b,S,E,w,v,G){return Ie(L,S,v,G),Ie(A,E,w,G),Ie(b,L,A,2*G*(1-G)),b}}(),Te=function(){let L=ie.create();return function(A,b,S,E){return L[0]=S[0],L[3]=S[1],L[6]=S[2],L[1]=E[0],L[4]=E[1],L[7]=E[2],L[2]=-b[0],L[5]=-b[1],L[8]=-b[2],f(A,ue(A,L))}}()},{"./common.js":"gmUyR","./mat3.js":"aLRre","./vec3.js":"3ENtf","./vec4.js":"5ZzZt","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],aLRre:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"create",()=>ie),l.export(o,"fromMat4",()=>ne),l.export(o,"clone",()=>x),l.export(o,"copy",()=>Q),l.export(o,"fromValues",()=>Z),l.export(o,"set",()=>re),l.export(o,"identity",()=>Y),l.export(o,"transpose",()=>te),l.export(o,"invert",()=>k),l.export(o,"adjoint",()=>pe),l.export(o,"determinant",()=>ee),l.export(o,"multiply",()=>ve),l.export(o,"translate",()=>Ie),l.export(o,"rotate",()=>xe),l.export(o,"scale",()=>q),l.export(o,"fromTranslation",()=>U),l.export(o,"fromRotation",()=>ue),l.export(o,"fromScaling",()=>D),l.export(o,"fromMat2d",()=>ye),l.export(o,"fromQuat",()=>z),l.export(o,"normalFromMat4",()=>$),l.export(o,"projection",()=>j),l.export(o,"str",()=>oe),l.export(o,"frob",()=>ce),l.export(o,"add",()=>be),l.export(o,"subtract",()=>ge),l.export(o,"multiplyScalar",()=>Qe),l.export(o,"multiplyScalarAndAdd",()=>_e),l.export(o,"exactEquals",()=>Le),l.export(o,"equals",()=>ze),l.export(o,"mul",()=>Xe),l.export(o,"sub",()=>He);var T=C("./common.js");function ie(){let f=new T.ARRAY_TYPE(9);return T.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function ne(f,R){return f[0]=R[0],f[1]=R[1],f[2]=R[2],f[3]=R[4],f[4]=R[5],f[5]=R[6],f[6]=R[8],f[7]=R[9],f[8]=R[10],f}function x(f){let R=new T.ARRAY_TYPE(9);return R[0]=f[0],R[1]=f[1],R[2]=f[2],R[3]=f[3],R[4]=f[4],R[5]=f[5],R[6]=f[6],R[7]=f[7],R[8]=f[8],R}function Q(f,R){return f[0]=R[0],f[1]=R[1],f[2]=R[2],f[3]=R[3],f[4]=R[4],f[5]=R[5],f[6]=R[6],f[7]=R[7],f[8]=R[8],f}function Z(f,R,K,we,Ee,Te,L,A,b){let S=new T.ARRAY_TYPE(9);return S[0]=f,S[1]=R,S[2]=K,S[3]=we,S[4]=Ee,S[5]=Te,S[6]=L,S[7]=A,S[8]=b,S}function re(f,R,K,we,Ee,Te,L,A,b,S){return f[0]=R,f[1]=K,f[2]=we,f[3]=Ee,f[4]=Te,f[5]=L,f[6]=A,f[7]=b,f[8]=S,f}function Y(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f}function te(f,R){if(f===R){let K=R[1],we=R[2],Ee=R[5];f[1]=R[3],f[2]=R[6],f[3]=K,f[5]=R[7],f[6]=we,f[7]=Ee}else f[0]=R[0],f[1]=R[3],f[2]=R[6],f[3]=R[1],f[4]=R[4],f[5]=R[7],f[6]=R[2],f[7]=R[5],f[8]=R[8];return f}function k(f,R){let K=R[0],we=R[1],Ee=R[2],Te=R[3],L=R[4],A=R[5],b=R[6],S=R[7],E=R[8],w=E*L-A*S,v=-E*Te+A*b,G=S*Te-L*b,M=K*w+we*v+Ee*G;return M?(M=1/M,f[0]=w*M,f[1]=(-E*we+Ee*S)*M,f[2]=(A*we-Ee*L)*M,f[3]=v*M,f[4]=(E*K-Ee*b)*M,f[5]=(-A*K+Ee*Te)*M,f[6]=G*M,f[7]=(-S*K+we*b)*M,f[8]=(L*K-we*Te)*M,f):null}function pe(f,R){let K=R[0],we=R[1],Ee=R[2],Te=R[3],L=R[4],A=R[5],b=R[6],S=R[7],E=R[8];return f[0]=L*E-A*S,f[1]=Ee*S-we*E,f[2]=we*A-Ee*L,f[3]=A*b-Te*E,f[4]=K*E-Ee*b,f[5]=Ee*Te-K*A,f[6]=Te*S-L*b,f[7]=we*b-K*S,f[8]=K*L-we*Te,f}function ee(f){let R=f[0],K=f[1],we=f[2],Ee=f[3],Te=f[4],L=f[5],A=f[6],b=f[7],S=f[8];return R*(S*Te-L*b)+K*(-S*Ee+L*A)+we*(b*Ee-Te*A)}function ve(f,R,K){let we=R[0],Ee=R[1],Te=R[2],L=R[3],A=R[4],b=R[5],S=R[6],E=R[7],w=R[8],v=K[0],G=K[1],M=K[2],e=K[3],t=K[4],r=K[5],s=K[6],a=K[7],h=K[8];return f[0]=v*we+G*L+M*S,f[1]=v*Ee+G*A+M*E,f[2]=v*Te+G*b+M*w,f[3]=e*we+t*L+r*S,f[4]=e*Ee+t*A+r*E,f[5]=e*Te+t*b+r*w,f[6]=s*we+a*L+h*S,f[7]=s*Ee+a*A+h*E,f[8]=s*Te+a*b+h*w,f}function Ie(f,R,K){let we=R[0],Ee=R[1],Te=R[2],L=R[3],A=R[4],b=R[5],S=R[6],E=R[7],w=R[8],v=K[0],G=K[1];return f[0]=we,f[1]=Ee,f[2]=Te,f[3]=L,f[4]=A,f[5]=b,f[6]=v*we+G*L+S,f[7]=v*Ee+G*A+E,f[8]=v*Te+G*b+w,f}function xe(f,R,K){let we=R[0],Ee=R[1],Te=R[2],L=R[3],A=R[4],b=R[5],S=R[6],E=R[7],w=R[8],v=Math.sin(K),G=Math.cos(K);return f[0]=G*we+v*L,f[1]=G*Ee+v*A,f[2]=G*Te+v*b,f[3]=G*L-v*we,f[4]=G*A-v*Ee,f[5]=G*b-v*Te,f[6]=S,f[7]=E,f[8]=w,f}function q(f,R,K){let we=K[0],Ee=K[1];return f[0]=we*R[0],f[1]=we*R[1],f[2]=we*R[2],f[3]=Ee*R[3],f[4]=Ee*R[4],f[5]=Ee*R[5],f[6]=R[6],f[7]=R[7],f[8]=R[8],f}function U(f,R){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=R[0],f[7]=R[1],f[8]=1,f}function ue(f,R){let K=Math.sin(R),we=Math.cos(R);return f[0]=we,f[1]=K,f[2]=0,f[3]=-K,f[4]=we,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f}function D(f,R){return f[0]=R[0],f[1]=0,f[2]=0,f[3]=0,f[4]=R[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f}function ye(f,R){return f[0]=R[0],f[1]=R[1],f[2]=0,f[3]=R[2],f[4]=R[3],f[5]=0,f[6]=R[4],f[7]=R[5],f[8]=1,f}function z(f,R){let K=R[0],we=R[1],Ee=R[2],Te=R[3],L=K+K,A=we+we,b=Ee+Ee,S=K*L,E=we*L,w=we*A,v=Ee*L,G=Ee*A,M=Ee*b,e=Te*L,t=Te*A,r=Te*b;return f[0]=1-w-M,f[3]=E-r,f[6]=v+t,f[1]=E+r,f[4]=1-S-M,f[7]=G-e,f[2]=v-t,f[5]=G+e,f[8]=1-S-w,f}function $(f,R){let K=R[0],we=R[1],Ee=R[2],Te=R[3],L=R[4],A=R[5],b=R[6],S=R[7],E=R[8],w=R[9],v=R[10],G=R[11],M=R[12],e=R[13],t=R[14],r=R[15],s=K*A-we*L,a=K*b-Ee*L,h=K*S-Te*L,p=we*b-Ee*A,u=we*S-Te*A,g=Ee*S-Te*b,m=E*e-w*M,_=E*t-v*M,F=E*r-G*M,I=w*t-v*e,P=w*r-G*e,V=v*r-G*t,O=s*V-a*P+h*I+p*F-u*_+g*m;return O?(O=1/O,f[0]=(A*V-b*P+S*I)*O,f[1]=(b*F-L*V-S*_)*O,f[2]=(L*P-A*F+S*m)*O,f[3]=(Ee*P-we*V-Te*I)*O,f[4]=(K*V-Ee*F+Te*_)*O,f[5]=(we*F-K*P-Te*m)*O,f[6]=(e*g-t*u+r*p)*O,f[7]=(t*h-M*g-r*a)*O,f[8]=(M*u-e*h+r*s)*O,f):null}function j(f,R,K){return f[0]=2/R,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/K,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f}function oe(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"}function ce(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2))}function be(f,R,K){return f[0]=R[0]+K[0],f[1]=R[1]+K[1],f[2]=R[2]+K[2],f[3]=R[3]+K[3],f[4]=R[4]+K[4],f[5]=R[5]+K[5],f[6]=R[6]+K[6],f[7]=R[7]+K[7],f[8]=R[8]+K[8],f}function ge(f,R,K){return f[0]=R[0]-K[0],f[1]=R[1]-K[1],f[2]=R[2]-K[2],f[3]=R[3]-K[3],f[4]=R[4]-K[4],f[5]=R[5]-K[5],f[6]=R[6]-K[6],f[7]=R[7]-K[7],f[8]=R[8]-K[8],f}function Qe(f,R,K){return f[0]=R[0]*K,f[1]=R[1]*K,f[2]=R[2]*K,f[3]=R[3]*K,f[4]=R[4]*K,f[5]=R[5]*K,f[6]=R[6]*K,f[7]=R[7]*K,f[8]=R[8]*K,f}function _e(f,R,K,we){return f[0]=R[0]+K[0]*we,f[1]=R[1]+K[1]*we,f[2]=R[2]+K[2]*we,f[3]=R[3]+K[3]*we,f[4]=R[4]+K[4]*we,f[5]=R[5]+K[5]*we,f[6]=R[6]+K[6]*we,f[7]=R[7]+K[7]*we,f[8]=R[8]+K[8]*we,f}function Le(f,R){return f[0]===R[0]&&f[1]===R[1]&&f[2]===R[2]&&f[3]===R[3]&&f[4]===R[4]&&f[5]===R[5]&&f[6]===R[6]&&f[7]===R[7]&&f[8]===R[8]}function ze(f,R){let K=f[0],we=f[1],Ee=f[2],Te=f[3],L=f[4],A=f[5],b=f[6],S=f[7],E=f[8],w=R[0],v=R[1],G=R[2],M=R[3],e=R[4],t=R[5],r=R[6],s=R[7],a=R[8];return Math.abs(K-w)<=T.EPSILON*Math.max(1,Math.abs(K),Math.abs(w))&&Math.abs(we-v)<=T.EPSILON*Math.max(1,Math.abs(we),Math.abs(v))&&Math.abs(Ee-G)<=T.EPSILON*Math.max(1,Math.abs(Ee),Math.abs(G))&&Math.abs(Te-M)<=T.EPSILON*Math.max(1,Math.abs(Te),Math.abs(M))&&Math.abs(L-e)<=T.EPSILON*Math.max(1,Math.abs(L),Math.abs(e))&&Math.abs(A-t)<=T.EPSILON*Math.max(1,Math.abs(A),Math.abs(t))&&Math.abs(b-r)<=T.EPSILON*Math.max(1,Math.abs(b),Math.abs(r))&&Math.abs(S-s)<=T.EPSILON*Math.max(1,Math.abs(S),Math.abs(s))&&Math.abs(E-a)<=T.EPSILON*Math.max(1,Math.abs(E),Math.abs(a))}const Xe=ve,He=ge},{"./common.js":"gmUyR","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"5ZzZt":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"create",()=>ie),l.export(o,"clone",()=>ne),l.export(o,"fromValues",()=>x),l.export(o,"copy",()=>Q),l.export(o,"set",()=>Z),l.export(o,"add",()=>re),l.export(o,"subtract",()=>Y),l.export(o,"multiply",()=>te),l.export(o,"divide",()=>k),l.export(o,"ceil",()=>pe),l.export(o,"floor",()=>ee),l.export(o,"min",()=>ve),l.export(o,"max",()=>Ie),l.export(o,"round",()=>xe),l.export(o,"scale",()=>q),l.export(o,"scaleAndAdd",()=>U),l.export(o,"distance",()=>ue),l.export(o,"squaredDistance",()=>D),l.export(o,"length",()=>ye),l.export(o,"squaredLength",()=>z),l.export(o,"negate",()=>$),l.export(o,"inverse",()=>j),l.export(o,"normalize",()=>oe),l.export(o,"dot",()=>ce),l.export(o,"lerp",()=>be),l.export(o,"random",()=>ge),l.export(o,"transformMat4",()=>Qe),l.export(o,"transformQuat",()=>_e),l.export(o,"str",()=>Le),l.export(o,"exactEquals",()=>ze),l.export(o,"equals",()=>Xe),l.export(o,"sub",()=>He),l.export(o,"mul",()=>f),l.export(o,"div",()=>R),l.export(o,"dist",()=>K),l.export(o,"sqrDist",()=>we),l.export(o,"len",()=>Ee),l.export(o,"sqrLen",()=>Te),l.export(o,"forEach",()=>L);var T=C("./common.js");function ie(){let A=new T.ARRAY_TYPE(4);return T.ARRAY_TYPE!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0),A}function ne(A){let b=new T.ARRAY_TYPE(4);return b[0]=A[0],b[1]=A[1],b[2]=A[2],b[3]=A[3],b}function x(A,b,S,E){let w=new T.ARRAY_TYPE(4);return w[0]=A,w[1]=b,w[2]=S,w[3]=E,w}function Q(A,b){return A[0]=b[0],A[1]=b[1],A[2]=b[2],A[3]=b[3],A}function Z(A,b,S,E,w){return A[0]=b,A[1]=S,A[2]=E,A[3]=w,A}function re(A,b,S){return A[0]=b[0]+S[0],A[1]=b[1]+S[1],A[2]=b[2]+S[2],A[3]=b[3]+S[3],A}function Y(A,b,S){return A[0]=b[0]-S[0],A[1]=b[1]-S[1],A[2]=b[2]-S[2],A[3]=b[3]-S[3],A}function te(A,b,S){return A[0]=b[0]*S[0],A[1]=b[1]*S[1],A[2]=b[2]*S[2],A[3]=b[3]*S[3],A}function k(A,b,S){return A[0]=b[0]/S[0],A[1]=b[1]/S[1],A[2]=b[2]/S[2],A[3]=b[3]/S[3],A}function pe(A,b){return A[0]=Math.ceil(b[0]),A[1]=Math.ceil(b[1]),A[2]=Math.ceil(b[2]),A[3]=Math.ceil(b[3]),A}function ee(A,b){return A[0]=Math.floor(b[0]),A[1]=Math.floor(b[1]),A[2]=Math.floor(b[2]),A[3]=Math.floor(b[3]),A}function ve(A,b,S){return A[0]=Math.min(b[0],S[0]),A[1]=Math.min(b[1],S[1]),A[2]=Math.min(b[2],S[2]),A[3]=Math.min(b[3],S[3]),A}function Ie(A,b,S){return A[0]=Math.max(b[0],S[0]),A[1]=Math.max(b[1],S[1]),A[2]=Math.max(b[2],S[2]),A[3]=Math.max(b[3],S[3]),A}function xe(A,b){return A[0]=Math.round(b[0]),A[1]=Math.round(b[1]),A[2]=Math.round(b[2]),A[3]=Math.round(b[3]),A}function q(A,b,S){return A[0]=b[0]*S,A[1]=b[1]*S,A[2]=b[2]*S,A[3]=b[3]*S,A}function U(A,b,S,E){return A[0]=b[0]+S[0]*E,A[1]=b[1]+S[1]*E,A[2]=b[2]+S[2]*E,A[3]=b[3]+S[3]*E,A}function ue(A,b){let S=b[0]-A[0],E=b[1]-A[1],w=b[2]-A[2],v=b[3]-A[3];return Math.sqrt(S*S+E*E+w*w+v*v)}function D(A,b){let S=b[0]-A[0],E=b[1]-A[1],w=b[2]-A[2],v=b[3]-A[3];return S*S+E*E+w*w+v*v}function ye(A){let b=A[0],S=A[1],E=A[2],w=A[3];return Math.sqrt(b*b+S*S+E*E+w*w)}function z(A){let b=A[0],S=A[1],E=A[2],w=A[3];return b*b+S*S+E*E+w*w}function $(A,b){return A[0]=-b[0],A[1]=-b[1],A[2]=-b[2],A[3]=-b[3],A}function j(A,b){return A[0]=1/b[0],A[1]=1/b[1],A[2]=1/b[2],A[3]=1/b[3],A}function oe(A,b){let S=b[0],E=b[1],w=b[2],v=b[3],G=S*S+E*E+w*w+v*v;return G>0&&(G=1/Math.sqrt(G),A[0]=S*G,A[1]=E*G,A[2]=w*G,A[3]=v*G),A}function ce(A,b){return A[0]*b[0]+A[1]*b[1]+A[2]*b[2]+A[3]*b[3]}function be(A,b,S,E){let w=b[0],v=b[1],G=b[2],M=b[3];return A[0]=w+E*(S[0]-w),A[1]=v+E*(S[1]-v),A[2]=G+E*(S[2]-G),A[3]=M+E*(S[3]-M),A}function ge(A,b){b=b||1;var S,E,w,v,G,M;do S=T.RANDOM()*2-1,E=T.RANDOM()*2-1,G=S*S+E*E;while(G>=1);do w=T.RANDOM()*2-1,v=T.RANDOM()*2-1,M=w*w+v*v;while(M>=1);var e=Math.sqrt((1-G)/M);return A[0]=b*S,A[1]=b*E,A[2]=b*w*e,A[3]=b*v*e,A}function Qe(A,b,S){let E=b[0],w=b[1],v=b[2],G=b[3];return A[0]=S[0]*E+S[4]*w+S[8]*v+S[12]*G,A[1]=S[1]*E+S[5]*w+S[9]*v+S[13]*G,A[2]=S[2]*E+S[6]*w+S[10]*v+S[14]*G,A[3]=S[3]*E+S[7]*w+S[11]*v+S[15]*G,A}function _e(A,b,S){let E=b[0],w=b[1],v=b[2],G=S[0],M=S[1],e=S[2],t=S[3],r=t*E+M*v-e*w,s=t*w+e*E-G*v,a=t*v+G*w-M*E,h=-G*E-M*w-e*v;return A[0]=r*t+h*-G+s*-e-a*-M,A[1]=s*t+h*-M+a*-G-r*-e,A[2]=a*t+h*-e+r*-M-s*-G,A[3]=b[3],A}function Le(A){return"vec4("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+")"}function ze(A,b){return A[0]===b[0]&&A[1]===b[1]&&A[2]===b[2]&&A[3]===b[3]}function Xe(A,b){let S=A[0],E=A[1],w=A[2],v=A[3],G=b[0],M=b[1],e=b[2],t=b[3];return Math.abs(S-G)<=T.EPSILON*Math.max(1,Math.abs(S),Math.abs(G))&&Math.abs(E-M)<=T.EPSILON*Math.max(1,Math.abs(E),Math.abs(M))&&Math.abs(w-e)<=T.EPSILON*Math.max(1,Math.abs(w),Math.abs(e))&&Math.abs(v-t)<=T.EPSILON*Math.max(1,Math.abs(v),Math.abs(t))}const He=Y,f=te,R=k,K=ue,we=D,Ee=ye,Te=z,L=function(){let A=ie();return function(b,S,E,w,v,G){let M,e;for(S||(S=4),E||(E=0),w?e=Math.min(w*S+E,b.length):e=b.length,M=E;M<e;M+=S)A[0]=b[M],A[1]=b[M+1],A[2]=b[M+2],A[3]=b[M+3],v(A,A,G),b[M]=A[0],b[M+1]=A[1],b[M+2]=A[2],b[M+3]=A[3];return b}}()},{"./common.js":"gmUyR","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],dvFzp:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>D);var T=C("../lib/EventTarget"),ie=l.interopDefault(T),ne=C("../lib/now"),x=l.interopDefault(ne),Q=C("./XRFrame"),Z=l.interopDefault(Q),re=C("./XRReferenceSpace"),Y=l.interopDefault(re),te=C("./XRRenderState"),k=l.interopDefault(te),pe=C("./XRInputSourceEvent"),ee=l.interopDefault(pe),ve=C("./XRSessionEvent"),Ie=l.interopDefault(ve),xe=C("./XRSpace"),q=l.interopDefault(xe),U=C("./XRInputSourcesChangeEvent"),ue=l.interopDefault(U);const D=Symbol("@@webxr-polyfill/XRSession");class ye extends q.default{constructor(j){super(j)}get eye(){return this._specialType}_onPoseUpdate(j){this._inverseBaseMatrix=j.getBaseViewMatrix(this._specialType)}}class z extends ie.default{constructor(j,oe,ce){super();let be=oe!="inline",ge=new k.default({inlineVerticalFieldOfView:be?null:Math.PI*.5});const Qe=be?[new ye("left"),new ye("right")]:[new ye("none")];Object.freeze(Qe),this[D]={device:j,mode:oe,immersive:be,ended:!1,suspended:!1,frameCallbacks:[],currentFrameCallbacks:null,frameHandle:0,deviceFrameHandle:null,id:ce,activeRenderState:ge,pendingRenderState:null,viewerSpace:new Y.default("viewer"),get viewSpaces(){return j.getViewSpaces(oe)||Qe},currentInputSources:[]},this[D].onDeviceFrame=()=>{if(this[D].ended||this[D].suspended||(this[D].deviceFrameHandle=null,this[D].startDeviceFrameLoop(),this[D].pendingRenderState!==null&&(this[D].activeRenderState=new k.default(this[D].pendingRenderState),this[D].pendingRenderState=null,this[D].activeRenderState.baseLayer&&this[D].device.onBaseLayerSet(this[D].id,this[D].activeRenderState.baseLayer)),this[D].activeRenderState.baseLayer===null))return;const _e=new Z.default(j,this,this[D].id),Le=this[D].currentFrameCallbacks=this[D].frameCallbacks;this[D].frameCallbacks=[],_e[Q.PRIVATE].active=!0,_e[Q.PRIVATE].animationFrame=!0,this[D].device.onFrameStart(this[D].id,this[D].activeRenderState),this._checkInputSourcesChange();const ze=(0,x.default)();for(let Xe=0;Xe<Le.length;Xe++)try{!Le[Xe].cancelled&&typeof Le[Xe].callback=="function"&&Le[Xe].callback(ze,_e)}catch(He){console.error(He)}this[D].currentFrameCallbacks=null,_e[Q.PRIVATE].active=!1,this[D].device.onFrameEnd(this[D].id)},this[D].startDeviceFrameLoop=()=>{this[D].deviceFrameHandle===null&&(this[D].deviceFrameHandle=this[D].device.requestAnimationFrame(this[D].onDeviceFrame))},this[D].stopDeviceFrameLoop=()=>{const _e=this[D].deviceFrameHandle;_e!==null&&(this[D].device.cancelAnimationFrame(_e),this[D].deviceFrameHandle=null)},this[D].onPresentationEnd=_e=>{if(_e!==this[D].id){this[D].suspended=!1,this[D].startDeviceFrameLoop(),this.dispatchEvent("focus",{session:this});return}this[D].ended=!0,this[D].stopDeviceFrameLoop(),j.removeEventListener("@@webxr-polyfill/vr-present-end",this[D].onPresentationEnd),j.removeEventListener("@@webxr-polyfill/vr-present-start",this[D].onPresentationStart),j.removeEventListener("@@webxr-polyfill/input-select-start",this[D].onSelectStart),j.removeEventListener("@@webxr-polyfill/input-select-end",this[D].onSelectEnd),this.dispatchEvent("end",new Ie.default("end",{session:this}))},j.addEventListener("@@webxr-polyfill/vr-present-end",this[D].onPresentationEnd),this[D].onPresentationStart=_e=>{_e!==this[D].id&&(this[D].suspended=!0,this[D].stopDeviceFrameLoop(),this.dispatchEvent("blur",{session:this}))},j.addEventListener("@@webxr-polyfill/vr-present-start",this[D].onPresentationStart),this[D].onSelectStart=_e=>{_e.sessionId===this[D].id&&this[D].dispatchInputSourceEvent("selectstart",_e.inputSource)},j.addEventListener("@@webxr-polyfill/input-select-start",this[D].onSelectStart),this[D].onSelectEnd=_e=>{_e.sessionId===this[D].id&&(this[D].dispatchInputSourceEvent("selectend",_e.inputSource),this[D].dispatchInputSourceEvent("select",_e.inputSource))},j.addEventListener("@@webxr-polyfill/input-select-end",this[D].onSelectEnd),this[D].onSqueezeStart=_e=>{_e.sessionId===this[D].id&&this[D].dispatchInputSourceEvent("squeezestart",_e.inputSource)},j.addEventListener("@@webxr-polyfill/input-squeeze-start",this[D].onSqueezeStart),this[D].onSqueezeEnd=_e=>{_e.sessionId===this[D].id&&(this[D].dispatchInputSourceEvent("squeezeend",_e.inputSource),this[D].dispatchInputSourceEvent("squeeze",_e.inputSource))},j.addEventListener("@@webxr-polyfill/input-squeeze-end",this[D].onSqueezeEnd),this[D].dispatchInputSourceEvent=(_e,Le)=>{const ze=new Z.default(j,this,this[D].id),Xe=new ee.default(_e,{frame:ze,inputSource:Le});ze[Q.PRIVATE].active=!0,this.dispatchEvent(_e,Xe),ze[Q.PRIVATE].active=!1},this[D].startDeviceFrameLoop(),this.onblur=void 0,this.onfocus=void 0,this.onresetpose=void 0,this.onend=void 0,this.onselect=void 0,this.onselectstart=void 0,this.onselectend=void 0}get renderState(){return this[D].activeRenderState}get environmentBlendMode(){return this[D].device.environmentBlendMode||"opaque"}async requestReferenceSpace(j){if(this[D].ended)return;if(!re.XRReferenceSpaceTypes.includes(j))throw new TypeError(`XRReferenceSpaceType must be one of ${re.XRReferenceSpaceTypes}`);if(!this[D].device.doesSessionSupportReferenceSpace(this[D].id,j))throw new DOMException(`The ${j} reference space is not supported by this session.`,"NotSupportedError");if(j==="viewer")return this[D].viewerSpace;let oe=await this[D].device.requestFrameOfReferenceTransform(j);if(j==="bounded-floor")throw oe?this[D].device.requestStageBounds()?new DOMException(`The WebXR polyfill does not support the ${j} reference space yet.`,"NotSupportedError"):new DOMException(`${j} XRReferenceSpace not supported by this device.`,"NotSupportedError"):new DOMException(`${j} XRReferenceSpace not supported by this device.`,"NotSupportedError");return new Y.default(j,oe)}requestAnimationFrame(j){if(this[D].ended)return;const oe=++this[D].frameHandle;return this[D].frameCallbacks.push({handle:oe,callback:j,cancelled:!1}),oe}cancelAnimationFrame(j){let oe=this[D].frameCallbacks,ce=oe.findIndex(be=>be&&be.handle===j);ce>-1&&(oe[ce].cancelled=!0,oe.splice(ce,1)),oe=this[D].currentFrameCallbacks,oe&&(ce=oe.findIndex(be=>be&&be.handle===j),ce>-1&&(oe[ce].cancelled=!0))}get inputSources(){return this[D].device.getInputSources()}async end(){if(!this[D].ended)return this[D].immersive&&(this[D].ended=!0,this[D].device.removeEventListener("@@webxr-polyfill/vr-present-start",this[D].onPresentationStart),this[D].device.removeEventListener("@@webxr-polyfill/vr-present-end",this[D].onPresentationEnd),this[D].device.removeEventListener("@@webxr-polyfill/input-select-start",this[D].onSelectStart),this[D].device.removeEventListener("@@webxr-polyfill/input-select-end",this[D].onSelectEnd),this.dispatchEvent("end",new Ie.default("end",{session:this}))),this[D].stopDeviceFrameLoop(),this[D].device.endSession(this[D].id)}updateRenderState(j){if(this[D].ended){const ce="Can't call updateRenderState on an XRSession that has already ended.";throw new Error(ce)}if(j.baseLayer&&j.baseLayer._session!==this){const ce="Called updateRenderState with a base layer that was created by a different session.";throw new Error(ce)}if(j.inlineVerticalFieldOfView!==null&&j.inlineVerticalFieldOfView!==void 0)if(this[D].immersive){const ce="inlineVerticalFieldOfView must not be set for an XRRenderState passed to updateRenderState for an immersive session.";throw new Error(ce)}else j.inlineVerticalFieldOfView=Math.min(3.13,Math.max(.01,j.inlineVerticalFieldOfView));if(this[D].pendingRenderState===null){const ce=this[D].activeRenderState;this[D].pendingRenderState={depthNear:ce.depthNear,depthFar:ce.depthFar,inlineVerticalFieldOfView:ce.inlineVerticalFieldOfView,baseLayer:ce.baseLayer}}Object.assign(this[D].pendingRenderState,j)}_checkInputSourcesChange(){const j=[],oe=[],ce=this.inputSources,be=this[D].currentInputSources;for(const ge of ce)be.includes(ge)||j.push(ge);for(const ge of be)ce.includes(ge)||oe.push(ge);(j.length>0||oe.length>0)&&this.dispatchEvent("inputsourceschange",new ue.default("inputsourceschange",{session:this,added:j,removed:oe})),this[D].currentInputSources.length=0;for(const ge of ce)this[D].currentInputSources.push(ge)}}o.default=z},{"../lib/EventTarget":"da0uT","../lib/now":"gLkJ5","./XRFrame":"42OoZ","./XRReferenceSpace":"1wDMx","./XRRenderState":"joLzs","./XRInputSourceEvent":"6tOje","./XRSessionEvent":"91P16","./XRSpace":"cO4ve","./XRInputSourcesChangeEvent":"jaivQ","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],gLkJ5:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("./global"),ie=l.interopDefault(T);let ne;if("performance"in ie.default)ne=()=>performance.now();else{let x=Date.now();ne=()=>Date.now()-x}o.default=ne},{"./global":"5frwC","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"5frwC":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=arguments[3];const ie=typeof T!="undefined"?T:typeof self!="undefined"?self:typeof window!="undefined"?window:{};o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"42OoZ":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>Z);var T=C("./XRSession"),ie=C("./XRViewerPose"),ne=l.interopDefault(ie),x=C("./XRView"),Q=l.interopDefault(x);const Z=Symbol("@@webxr-polyfill/XRFrame"),re="XRFrame access outside the callback that produced it is invalid.",Y="getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.";let te=0;class k{constructor(ee,ve,Ie){this[Z]={id:++te,active:!1,animationFrame:!1,device:ee,session:ve,sessionId:Ie}}get session(){return this[Z].session}getViewerPose(ee){if(!this[Z].animationFrame)throw new DOMException(Y,"InvalidStateError");if(!this[Z].active)throw new DOMException(re,"InvalidStateError");const ve=this[Z].device,Ie=this[Z].session;Ie[T.PRIVATE].viewerSpace._ensurePoseUpdated(ve,this[Z].id),ee._ensurePoseUpdated(ve,this[Z].id);let xe=ee._getSpaceRelativeTransform(Ie[T.PRIVATE].viewerSpace);const q=[];for(const ue of Ie[T.PRIVATE].viewSpaces){ue._ensurePoseUpdated(ve,this[Z].id);let D=ee._getSpaceRelativeTransform(ue),ye=new Q.default(ve,D,ue.eye,this[Z].sessionId,ue.viewIndex);q.push(ye)}return new ne.default(xe,q,!1)}getPose(ee,ve){if(!this[Z].active)throw new DOMException(re,"InvalidStateError");const Ie=this[Z].device;if(ee._specialType==="target-ray"||ee._specialType==="grip")return Ie.getInputPose(ee._inputSource,ve,ee._specialType);{ee._ensurePoseUpdated(Ie,this[Z].id),ve._ensurePoseUpdated(Ie,this[Z].id);let xe=ve._getSpaceRelativeTransform(ee);return xe?new XRPose(xe,!1):null}return null}}o.default=k},{"./XRSession":"dvFzp","./XRViewerPose":"erVb6","./XRView":"hCgN1","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],erVb6:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>ne);var T=C("./XRPose"),ie=l.interopDefault(T);const ne=Symbol("@@webxr-polyfill/XRViewerPose");class x extends ie.default{constructor(Z,re,Y=!1){super(Z,Y);this[ne]={views:re}}get views(){return this[ne].views}}o.default=x},{"./XRPose":"fmx0d","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],fmx0d:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T);const T=Symbol("@@webxr-polyfill/XRPose");class ie{constructor(x,Q){this[T]={transform:x,emulatedPosition:Q}}get transform(){return this[T].transform}get emulatedPosition(){return this[T].emulatedPosition}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],hCgN1:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>Z);var T=C("./XRViewport"),ie=l.interopDefault(T),ne=C("./XRRigidTransform"),x=l.interopDefault(ne);const Q=["left","right","none"],Z=Symbol("@@webxr-polyfill/XRView");class re{constructor(te,k,pe,ee,ve){if(!Q.includes(pe))throw new Error(`XREye must be one of: ${Q}`);const Ie=Object.create(null),xe=new ie.default(Ie);this[Z]={device:te,eye:pe,viewport:xe,temp:Ie,sessionId:ee,transform:k,viewIndex:ve}}get eye(){return this[Z].eye}get projectionMatrix(){return this[Z].device.getProjectionMatrix(this.eye,this[Z].viewIndex)}get transform(){return this[Z].transform}_getViewport(te){if(this[Z].device.getViewport(this[Z].sessionId,this.eye,te,this[Z].temp,this[Z].viewIndex))return this[Z].viewport}}o.default=re},{"./XRViewport":"l0Vir","./XRRigidTransform":"hGGT0","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],l0Vir:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T);const T=Symbol("@@webxr-polyfill/XRViewport");class ie{constructor(x){this[T]={target:x}}get x(){return this[T].target.x}get y(){return this[T].target.y}get width(){return this[T].target.width}get height(){return this[T].target.height}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],joLzs:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T),l.export(o,"XRRenderStateInit",()=>ie);const T=Symbol("@@webxr-polyfill/XRRenderState"),ie=Object.freeze({depthNear:.1,depthFar:1e3,inlineVerticalFieldOfView:null,baseLayer:null});class ne{constructor(Q={}){const Z=Object.assign({},ie,Q);this[T]={config:Z}}get depthNear(){return this[T].config.depthNear}get depthFar(){return this[T].config.depthFar}get inlineVerticalFieldOfView(){return this[T].config.inlineVerticalFieldOfView}get baseLayer(){return this[T].config.baseLayer}}o.default=ne},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"6tOje":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T);const T=Symbol("@@webxr-polyfill/XRInputSourceEvent");class ie extends Event{constructor(x,Q){super(x,Q);this[T]={frame:Q.frame,inputSource:Q.inputSource},Object.setPrototypeOf(this,ie.prototype)}get frame(){return this[T].frame}get inputSource(){return this[T].inputSource}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"91P16":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T);const T=Symbol("@@webxr-polyfill/XRSessionEvent");class ie extends Event{constructor(x,Q){super(x,Q);this[T]={session:Q.session},Object.setPrototypeOf(this,ie.prototype)}get session(){return this[T].session}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],jaivQ:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T);const T=Symbol("@@webxr-polyfill/XRInputSourcesChangeEvent");class ie extends Event{constructor(x,Q){super(x,Q);this[T]={session:Q.session,added:Q.added,removed:Q.removed},Object.setPrototypeOf(this,ie.prototype)}get session(){return this[T].session}get added(){return this[T].added}get removed(){return this[T].removed}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"94RWx":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>ne);var T=C("./XRSpace"),ie=l.interopDefault(T);const ne=Symbol("@@webxr-polyfill/XRInputSource");class x{constructor(Z){this[ne]={impl:Z,gripSpace:new ie.default("grip",this),targetRaySpace:new ie.default("target-ray",this)}}get handedness(){return this[ne].impl.handedness}get targetRayMode(){return this[ne].impl.targetRayMode}get gripSpace(){let Z=this[ne].impl.targetRayMode;return Z==="gaze"||Z==="screen"?null:this[ne].gripSpace}get targetRaySpace(){return this[ne].targetRaySpace}get profiles(){return this[ne].impl.profiles}get gamepad(){return this[ne].impl.gamepad}}o.default=x},{"./XRSpace":"cO4ve","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],gHFkz:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>x),l.export(o,"XRWebGLLayerInit",()=>Q);var T=C("./XRSession"),ie=l.interopDefault(T),ne=C("../constants");const x=Symbol("@@webxr-polyfill/XRWebGLLayer"),Q=Object.freeze({antialias:!0,depth:!0,stencil:!1,alpha:!0,multiview:!1,ignoreDepthValues:!1,framebufferScaleFactor:1});class Z{constructor(Y,te,k={}){const pe=Object.assign({},Q,k);if(!(Y instanceof ie.default))throw new Error("session must be a XRSession");if(Y.ended)throw new Error("InvalidStateError");if(te[ne.POLYFILLED_XR_COMPATIBLE]&&te[ne.XR_COMPATIBLE]!==!0)throw new Error("InvalidStateError");this[x]={context:te,config:pe,session:Y}}get context(){return this[x].context}get antialias(){return this[x].config.antialias}get ignoreDepthValues(){return!0}get framebuffer(){return null}get framebufferWidth(){return this[x].context.drawingBufferWidth}get framebufferHeight(){return this[x].context.drawingBufferHeight}get _session(){return this[x].session}getViewport(Y){return Y._getViewport(this)}static getNativeFramebufferScaleFactor(Y){if(!Y)throw new TypeError("getNativeFramebufferScaleFactor must be passed a session.");return Y[T.PRIVATE].ended?0:1}}o.default=Z},{"./XRSession":"dvFzp","../constants":"YRSh5","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],YRSh5:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"POLYFILLED_XR_COMPATIBLE",()=>T),l.export(o,"XR_COMPATIBLE",()=>ie);const T=Symbol("@@webxr-polyfill/polyfilled-xr-compatible"),ie=Symbol("@@webxr-polyfill/xr-compatible")},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],b6SAu:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>T);const T=Symbol("@@webxr-polyfill/XRReferenceSpaceEvent");class ie extends Event{constructor(x,Q){super(x,Q);this[T]={referenceSpace:Q.referenceSpace,transform:Q.transform||null},Object.setPrototypeOf(this,ie.prototype)}get referenceSpace(){return this[T].referenceSpace}get transform(){return this[T].transform}}o.default=ie},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],e9hlL:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("./lib/global"),ie=l.interopDefault(T),ne=C("./api/index"),x=l.interopDefault(ne),Q=C("./polyfill-globals"),Z=C("./utils"),re=C("./devices");const Y={global:ie.default,webvr:!0,cardboard:!0,cardboardConfig:null,allowCardboardOnDesktop:!1},te=["navigator","HTMLCanvasElement","WebGLRenderingContext"];class k{constructor(ee={}){this.config=Object.freeze(Object.assign({},Y,ee)),this.global=this.config.global,this.nativeWebXR="xr"in this.global.navigator,this.injected=!1,this._injectPolyfill(this.global)}_injectPolyfill(ee){if(!te.every(ve=>!!ee[ve]))throw new Error(`Global must have the following attributes : ${te}`);for(const ve of Object.keys(x.default))ee[ve]!==void 0?console.warn(`${ve} already defined on global.`):ee[ve]=x.default[ve];(0,Q.polyfillMakeXRCompatible)(ee.WebGLRenderingContext)&&((0,Q.polyfillGetContext)(ee.HTMLCanvasElement),ee.OffscreenCanvas&&(0,Q.polyfillGetContext)(ee.OffscreenCanvas),ee.WebGL2RenderingContext&&(0,Q.polyfillMakeXRCompatible)(ee.WebGL2RenderingContext),window.isSecureContext||console.warn(`WebXR Polyfill Warning:
This page is not running in a secure context (https:// or localhost)!
This means that although the page may be able to use the WebXR Polyfill it will
not be able to use native WebXR implementations, and as such will not be able to
access dedicated VR or AR hardware, and will not be able to take advantage of
any performance improvements a native WebXR implementation may offer. Please
host this content on a secure origin for the best user experience.
`)),this.injected=!0,this._patchNavigatorXR()}_patchNavigatorXR(){let ee=(0,re.requestXRDevice)(this.global,this.config);this.xr=new x.default.XRSystem(ee),Object.defineProperty(this.global.navigator,"xr",{value:this.xr,configurable:!0})}_injectCompatibilityShims(ee){if(!te.every(ve=>!!ee[ve]))throw new Error(`Global must have the following attributes : ${te}`);if(ee.navigator.xr&&"supportsSession"in ee.navigator.xr&&!("isSessionSupported"in ee.navigator.xr)){let ve=ee.navigator.xr.supportsSession;ee.navigator.xr.isSessionSupported=function(Ie){return ve.call(this,Ie).then(()=>!0).catch(()=>!1)},ee.navigator.xr.supportsSession=function(Ie){return console.warn("navigator.xr.supportsSession() is deprecated. Please call navigator.xr.isSessionSupported() instead and check the boolean value returned when the promise resolves."),ve.call(this,Ie)}}}}o.default=k},{"./lib/global":"5frwC","./api/index":"eytcy","./polyfill-globals":"afGm4","./utils":"gL27r","./devices":"buaRx","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],afGm4:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"polyfillMakeXRCompatible",()=>ne),l.export(o,"polyfillGetContext",()=>x);var T=C("./constants");const ie=["webgl","experimental-webgl"],ne=Q=>(Q.prototype.makeXRCompatible,Q.prototype.makeXRCompatible=function(){return this[T.XR_COMPATIBLE]=!0,Promise.resolve()},!0),x=Q=>{const Z=Q.prototype.getContext;Q.prototype.getContext=function(re,Y){const te=Z.call(this,re,Y);return te&&(te[T.POLYFILLED_XR_COMPATIBLE]=!0,Y&&"xrCompatible"in Y&&(te[T.XR_COMPATIBLE]=Y.xrCompatible)),te}}},{"./constants":"YRSh5","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],gL27r:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"isImageBitmapSupported",()=>T),l.export(o,"isMobile",()=>ie),l.export(o,"applyCanvasStylesForMinimalRendering",()=>ne);const T=x=>!!(x.ImageBitmapRenderingContext&&x.createImageBitmap),ie=x=>{var Q=!1;return function(Z){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Z)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Z.substr(0,4)))&&(Q=!0)}(x.navigator.userAgent||x.navigator.vendor||x.opera),Q},ne=x=>{x.style.display="block",x.style.position="absolute",x.style.width=x.style.height="1px",x.style.top=x.style.left="0px"}},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],buaRx:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"requestXRDevice",()=>te);var T=C("./devices/CardboardXRDevice"),ie=l.interopDefault(T),ne=C("./devices/InlineDevice"),x=l.interopDefault(ne),Q=C("./devices/WebVRDevice"),Z=l.interopDefault(Q),re=C("./utils");const Y=async function(k){let pe=null;if("getVRDisplays"in k.navigator)try{const ee=await k.navigator.getVRDisplays();ee&&ee.length&&(pe=new Z.default(k,ee[0]))}catch{}return pe},te=async function(k,pe){if(pe.webvr){let ve=await Y(k);if(ve)return ve}let ee=(0,re.isMobile)(k);return ee&&pe.cardboard||!ee&&pe.allowCardboardOnDesktop?(k.VRFrameData||(k.VRFrameData=function(){this.rightViewMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.leftProjectionMatrix=new Float32Array(16),this.pose=null}),new ie.default(k,pe.cardboardConfig)):new x.default(k)}},{"./devices/CardboardXRDevice":"iX8FC","./devices/InlineDevice":"lBn7K","./devices/WebVRDevice":"3Mmhy","./utils":"gL27r","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],iX8FC:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("cardboard-vr-display"),ie=l.interopDefault(T),ne=C("./WebVRDevice"),x=l.interopDefault(ne),Q=arguments[3];class Z extends x.default{constructor(Y,te){const k=new ie.default(te||{});super(Q,k);this.display=k,this.frame={rightViewMatrix:new Float32Array(16),leftViewMatrix:new Float32Array(16),rightProjectionMatrix:new Float32Array(16),leftProjectionMatrix:new Float32Array(16),pose:null,timestamp:null}}}o.default=Z},{"cardboard-vr-display":"Es2Zy","./WebVRDevice":"3Mmhy","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],Es2Zy:[function(C,Pe,o){var l=arguments[3];/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
* @license
* gl-preserve-state
* Copyright (c) 2016, Brandon Jones.
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*//**
* @license
* webvr-polyfill-dpdb
* Copyright (c) 2015-2017 Google
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* nosleep.js
* Copyright (c) 2017, Rich Tibbett
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/(function(T,ie){Pe.exports=ie()})(this,function(){"use strict";var T=function(){function i(c){this.value=c}function n(c){var d,y;function N(se,X){return new Promise(function(W,me){var Re={key:se,arg:X,resolve:W,reject:me,next:null};y?y=y.next=Re:(d=y=Re,H(se,X))})}function H(se,X){try{var W=c[se](X),me=W.value;me instanceof i?Promise.resolve(me.value).then(function(Re){H("next",Re)},function(Re){H("throw",Re)}):he(W.done?"return":"normal",W.value)}catch(Re){he("throw",Re)}}function he(se,X){switch(se){case"return":d.resolve({value:X,done:!0});break;case"throw":d.reject(X);break;default:d.resolve({value:X,done:!1});break}d=d.next,d?H(d.key,d.arg):y=null}this._invoke=N,typeof c.return!="function"&&(this.return=void 0)}return typeof Symbol=="function"&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(c){return this._invoke("next",c)},n.prototype.throw=function(c){return this._invoke("throw",c)},n.prototype.return=function(c){return this._invoke("return",c)},{wrap:function(c){return function(){return new n(c.apply(this,arguments))}},await:function(c){return new i(c)}}}(),ie=function(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")},ne=function(){function i(n,c){for(var d=0;d<c.length;d++){var y=c[d];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(n,y.key,y)}}return function(n,c,d){return c&&i(n.prototype,c),d&&i(n,d),n}}(),x=function(){function i(n,c){var d=[],y=!0,N=!1,H=void 0;try{for(var he=n[Symbol.iterator](),se;!(y=(se=he.next()).done)&&(d.push(se.value),!(c&&d.length===c));y=!0);}catch(X){N=!0,H=X}finally{try{!y&&he.return&&he.return()}finally{if(N)throw H}}return d}return function(n,c){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return i(n,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Q=.001,Z=1,re=function(n,c){return"data:"+n+","+encodeURIComponent(c)},Y=function(n,c,d){return n+(c-n)*d},te=function(){var i=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return i}}(),k=function(){var i=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return i}}(),pe=function(){var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return i}}(),ee=function(){var i=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return i}}(),ve=function(){var i=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),n=i?parseInt(i[1],10):null;return function(){return n}}(),Ie=function(){var i=!1;return i=te()&&pe()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return i}}(),xe=function(){var i=!1;if(ve()===65){var n=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(n){var c=n[1].split("."),d=x(c,4),y=d[0],N=d[1],H=d[2],he=d[3];i=parseInt(H,10)===3325&&parseInt(he,10)<148}}return function(){return i}}(),q=function(){var i=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return i}}(),U=function(){var n=window.orientation==90||window.orientation==-90;return q()?!n:n},ue=function(n){return!(isNaN(n)||n<=Q||n>Z)},D=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},ye=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},z=function(n){if(k())return!1;if(n.requestFullscreen)n.requestFullscreen();else if(n.webkitRequestFullscreen)n.webkitRequestFullscreen();else if(n.mozRequestFullScreen)n.mozRequestFullScreen();else if(n.msRequestFullscreen)n.msRequestFullscreen();else return!1;return!0},$=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},j=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},oe=function(n,c,d,y){var N=n.createShader(n.VERTEX_SHADER);n.shaderSource(N,c),n.compileShader(N);var H=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(H,d),n.compileShader(H);var he=n.createProgram();n.attachShader(he,N),n.attachShader(he,H);for(var se in y)n.bindAttribLocation(he,y[se],se);return n.linkProgram(he),n.deleteShader(N),n.deleteShader(H),he},ce=function(n,c){for(var d={},y=n.getProgramParameter(c,n.ACTIVE_UNIFORMS),N="",H=0;H<y;H++){var he=n.getActiveUniform(c,H);N=he.name.replace("[0]",""),d[N]=n.getUniformLocation(c,N)}return d},be=function(n,c,d,y,N,H,he){var se=1/(c-d),X=1/(y-N),W=1/(H-he);return n[0]=-2*se,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*X,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*W,n[11]=0,n[12]=(c+d)*se,n[13]=(N+y)*X,n[14]=(he+H)*W,n[15]=1,n},ge=function(){var n=!1;return function(c){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n},Qe=function(n,c){for(var d in c)c.hasOwnProperty(d)&&(n[d]=c[d]);return n},_e=function(n){if(te()){var c=n.style.width,d=n.style.height;n.style.width=parseInt(c)+1+"px",n.style.height=parseInt(d)+"px",setTimeout(function(){n.style.width=c,n.style.height=d},100)}window.canvas=n},Le=function(){var i=Math.PI/180,n=Math.PI*.25;function c(X,W,me,Re){var De=Math.tan(W?W.upDegrees*i:n),Oe=Math.tan(W?W.downDegrees*i:n),We=Math.tan(W?W.leftDegrees*i:n),Ue=Math.tan(W?W.rightDegrees*i:n),Ge=2/(We+Ue),Je=2/(De+Oe);return X[0]=Ge,X[1]=0,X[2]=0,X[3]=0,X[4]=0,X[5]=Je,X[6]=0,X[7]=0,X[8]=-((We-Ue)*Ge*.5),X[9]=(De-Oe)*Je*.5,X[10]=Re/(me-Re),X[11]=-1,X[12]=0,X[13]=0,X[14]=Re*me/(me-Re),X[15]=0,X}function d(X,W,me){var Re=W[0],De=W[1],Oe=W[2],We=W[3],Ue=Re+Re,Ge=De+De,Je=Oe+Oe,rt=Re*Ue,at=Re*Ge,et=Re*Je,ot=De*Ge,ht=De*Je,dt=Oe*Je,ft=We*Ue,At=We*Ge,pt=We*Je;return X[0]=1-(ot+dt),X[1]=at+pt,X[2]=et-At,X[3]=0,X[4]=at-pt,X[5]=1-(rt+dt),X[6]=ht+ft,X[7]=0,X[8]=et+At,X[9]=ht-ft,X[10]=1-(rt+ot),X[11]=0,X[12]=me[0],X[13]=me[1],X[14]=me[2],X[15]=1,X}function y(X,W,me){var Re=me[0],De=me[1],Oe=me[2],We,Ue,Ge,Je,rt,at,et,ot,ht,dt,ft,At;return W===X?(X[12]=W[0]*Re+W[4]*De+W[8]*Oe+W[12],X[13]=W[1]*Re+W[5]*De+W[9]*Oe+W[13],X[14]=W[2]*Re+W[6]*De+W[10]*Oe+W[14],X[15]=W[3]*Re+W[7]*De+W[11]*Oe+W[15]):(We=W[0],Ue=W[1],Ge=W[2],Je=W[3],rt=W[4],at=W[5],et=W[6],ot=W[7],ht=W[8],dt=W[9],ft=W[10],At=W[11],X[0]=We,X[1]=Ue,X[2]=Ge,X[3]=Je,X[4]=rt,X[5]=at,X[6]=et,X[7]=ot,X[8]=ht,X[9]=dt,X[10]=ft,X[11]=At,X[12]=We*Re+rt*De+ht*Oe+W[12],X[13]=Ue*Re+at*De+dt*Oe+W[13],X[14]=Ge*Re+et*De+ft*Oe+W[14],X[15]=Je*Re+ot*De+At*Oe+W[15]),X}function N(X,W){var me=W[0],Re=W[1],De=W[2],Oe=W[3],We=W[4],Ue=W[5],Ge=W[6],Je=W[7],rt=W[8],at=W[9],et=W[10],ot=W[11],ht=W[12],dt=W[13],ft=W[14],At=W[15],pt=me*Ue-Re*We,vt=me*Ge-De*We,gt=me*Je-Oe*We,wt=Re*Ge-De*Ue,yt=Re*Je-Oe*Ue,bt=De*Je-Oe*Ge,Et=rt*dt-at*ht,xt=rt*ft-et*ht,Mt=rt*At-ot*ht,Rt=at*ft-et*dt,St=at*At-ot*dt,_t=et*At-ot*ft,nt=pt*_t-vt*St+gt*Rt+wt*Mt-yt*xt+bt*Et;return nt?(nt=1/nt,X[0]=(Ue*_t-Ge*St+Je*Rt)*nt,X[1]=(De*St-Re*_t-Oe*Rt)*nt,X[2]=(dt*bt-ft*yt+At*wt)*nt,X[3]=(et*yt-at*bt-ot*wt)*nt,X[4]=(Ge*Mt-We*_t-Je*xt)*nt,X[5]=(me*_t-De*Mt+Oe*xt)*nt,X[6]=(ft*gt-ht*bt-At*vt)*nt,X[7]=(rt*bt-et*gt+ot*vt)*nt,X[8]=(We*St-Ue*Mt+Je*Et)*nt,X[9]=(Re*Mt-me*St-Oe*Et)*nt,X[10]=(ht*yt-dt*gt+At*pt)*nt,X[11]=(at*gt-rt*yt-ot*pt)*nt,X[12]=(Ue*xt-We*Rt-Ge*Et)*nt,X[13]=(me*Rt-Re*xt+De*Et)*nt,X[14]=(dt*vt-ht*wt-ft*pt)*nt,X[15]=(rt*wt-at*vt+et*pt)*nt,X):null}var H=new Float32Array([0,0,0,1]),he=new Float32Array([0,0,0]);function se(X,W,me,Re,De,Oe){c(X,Re||null,Oe.depthNear,Oe.depthFar);var We=me.orientation||H,Ue=me.position||he;d(W,We,Ue),De&&y(W,W,De),N(W,W)}return function(X,W,me){return!X||!W?!1:(X.pose=W,X.timestamp=W.timestamp,se(X.leftProjectionMatrix,X.leftViewMatrix,W,me._getFieldOfView("left"),me._getEyeOffset("left"),me),se(X.rightProjectionMatrix,X.rightViewMatrix,W,me._getFieldOfView("right"),me._getEyeOffset("right"),me),!0)}}(),ze=function(){var n=window.self!==window.top,c=Xe(document.referrer),d=Xe(window.location.href);return n&&c!==d},Xe=function(n){var c,d=n.indexOf("://");d!==-1?c=d+3:c=0;var y=n.indexOf("/",c);return y===-1&&(y=n.length),n.substring(0,y)},He=function(n){if(n.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var c=2*Math.acos(n.w);return c},f=function(){var i={};return function(n,c){i[n]===void 0&&(console.warn("webvr-polyfill: "+c),i[n]=!0)}}(),R=function(n,c){var d=c?"Please use "+c+" instead.":"";f(n,n+" has been deprecated. This may not work on native WebVR displays. "+d)};function K(i,n,c){if(!n){c(i);return}for(var d=[],y=null,N=0;N<n.length;++N){var H=n[N];switch(H){case i.TEXTURE_BINDING_2D:case i.TEXTURE_BINDING_CUBE_MAP:var he=n[++N];if(he<i.TEXTURE0||he>i.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),d.push(null,null);break}y||(y=i.getParameter(i.ACTIVE_TEXTURE)),i.activeTexture(he),d.push(i.getParameter(H),null);break;case i.ACTIVE_TEXTURE:y=i.getParameter(i.ACTIVE_TEXTURE),d.push(null);break;default:d.push(i.getParameter(H));break}}c(i);for(var N=0;N<n.length;++N){var H=n[N],se=d[N];switch(H){case i.ACTIVE_TEXTURE:break;case i.ARRAY_BUFFER_BINDING:i.bindBuffer(i.ARRAY_BUFFER,se);break;case i.COLOR_CLEAR_VALUE:i.clearColor(se[0],se[1],se[2],se[3]);break;case i.COLOR_WRITEMASK:i.colorMask(se[0],se[1],se[2],se[3]);break;case i.CURRENT_PROGRAM:i.useProgram(se);break;case i.ELEMENT_ARRAY_BUFFER_BINDING:i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,se);break;case i.FRAMEBUFFER_BINDING:i.bindFramebuffer(i.FRAMEBUFFER,se);break;case i.RENDERBUFFER_BINDING:i.bindRenderbuffer(i.RENDERBUFFER,se);break;case i.TEXTURE_BINDING_2D:var he=n[++N];if(he<i.TEXTURE0||he>i.TEXTURE31)break;i.activeTexture(he),i.bindTexture(i.TEXTURE_2D,se);break;case i.TEXTURE_BINDING_CUBE_MAP:var he=n[++N];if(he<i.TEXTURE0||he>i.TEXTURE31)break;i.activeTexture(he),i.bindTexture(i.TEXTURE_CUBE_MAP,se);break;case i.VIEWPORT:i.viewport(se[0],se[1],se[2],se[3]);break;case i.BLEND:case i.CULL_FACE:case i.DEPTH_TEST:case i.SCISSOR_TEST:case i.STENCIL_TEST:se?i.enable(H):i.disable(H);break;default:console.log("No GL restore behavior for 0x"+H.toString(16));break}y&&i.activeTexture(y)}}var we=K,Ee=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),Te=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function L(i,n,c,d){this.gl=i,this.cardboardUI=n,this.bufferScale=c,this.dirtySubmitFrameBindings=d,this.ctxAttribs=i.getContextAttributes(),this.instanceExt=i.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=i.drawingBufferWidth,this.bufferHeight=i.drawingBufferHeight,this.realBindFramebuffer=i.bindFramebuffer,this.realEnable=i.enable,this.realDisable=i.disable,this.realColorMask=i.colorMask,this.realClearColor=i.clearColor,this.realViewport=i.viewport,te()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(i.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(i.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=oe(i,Ee,Te,this.attribs),this.uniforms=ce(i,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=i.createBuffer(),this.indexBuffer=i.createBuffer(),this.indexCount=0,this.renderTarget=i.createTexture(),this.framebuffer=i.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=i.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=i.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=i.createRenderbuffer()),this.patch(),this.onResize()}L.prototype.destroy=function(){var i=this.gl;this.unpatch(),i.deleteProgram(this.program),i.deleteBuffer(this.vertexBuffer),i.deleteBuffer(this.indexBuffer),i.deleteTexture(this.renderTarget),i.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&i.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&i.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&i.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},L.prototype.onResize=function(){var i=this.gl,n=this,c=[i.RENDERBUFFER_BINDING,i.TEXTURE_BINDING_2D,i.TEXTURE0];we(i,c,function(d){n.realBindFramebuffer.call(d,d.FRAMEBUFFER,null),n.scissorTest&&n.realDisable.call(d,d.SCISSOR_TEST),n.realColorMask.call(d,!0,!0,!0,!0),n.realViewport.call(d,0,0,d.drawingBufferWidth,d.drawingBufferHeight),n.realClearColor.call(d,0,0,0,1),d.clear(d.COLOR_BUFFER_BIT),n.realBindFramebuffer.call(d,d.FRAMEBUFFER,n.framebuffer),d.bindTexture(d.TEXTURE_2D,n.renderTarget),d.texImage2D(d.TEXTURE_2D,0,n.ctxAttribs.alpha?d.RGBA:d.RGB,n.bufferWidth,n.bufferHeight,0,n.ctxAttribs.alpha?d.RGBA:d.RGB,d.UNSIGNED_BYTE,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,n.renderTarget,0),n.ctxAttribs.depth&&n.ctxAttribs.stencil?(d.bindRenderbuffer(d.RENDERBUFFER,n.depthStencilBuffer),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,n.bufferWidth,n.bufferHeight),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,n.depthStencilBuffer)):n.ctxAttribs.depth?(d.bindRenderbuffer(d.RENDERBUFFER,n.depthBuffer),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,n.bufferWidth,n.bufferHeight),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,n.depthBuffer)):n.ctxAttribs.stencil&&(d.bindRenderbuffer(d.RENDERBUFFER,n.stencilBuffer),d.renderbufferStorage(d.RENDERBUFFER,d.STENCIL_INDEX8,n.bufferWidth,n.bufferHeight),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.STENCIL_ATTACHMENT,d.RENDERBUFFER,n.stencilBuffer)),!d.checkFramebufferStatus(d.FRAMEBUFFER)===d.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),n.realBindFramebuffer.call(d,d.FRAMEBUFFER,n.lastBoundFramebuffer),n.scissorTest&&n.realEnable.call(d,d.SCISSOR_TEST),n.realColorMask.apply(d,n.colorMask),n.realViewport.apply(d,n.viewport),n.realClearColor.apply(d,n.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},L.prototype.patch=function(){if(!this.isPatched){var i=this,n=this.gl.canvas,c=this.gl;te()||(n.width=D()*this.bufferScale,n.height=ye()*this.bufferScale,Object.defineProperty(n,"width",{configurable:!0,enumerable:!0,get:function(){return i.bufferWidth},set:function(y){i.bufferWidth=y,i.realCanvasWidth.set.call(n,y),i.onResize()}}),Object.defineProperty(n,"height",{configurable:!0,enumerable:!0,get:function(){return i.bufferHeight},set:function(y){i.bufferHeight=y,i.realCanvasHeight.set.call(n,y),i.onResize()}})),this.lastBoundFramebuffer=c.getParameter(c.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(c.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(d,y){i.lastBoundFramebuffer=y||i.framebuffer,i.realBindFramebuffer.call(c,d,i.lastBoundFramebuffer)},this.cullFace=c.getParameter(c.CULL_FACE),this.depthTest=c.getParameter(c.DEPTH_TEST),this.blend=c.getParameter(c.BLEND),this.scissorTest=c.getParameter(c.SCISSOR_TEST),this.stencilTest=c.getParameter(c.STENCIL_TEST),c.enable=function(d){switch(d){case c.CULL_FACE:i.cullFace=!0;break;case c.DEPTH_TEST:i.depthTest=!0;break;case c.BLEND:i.blend=!0;break;case c.SCISSOR_TEST:i.scissorTest=!0;break;case c.STENCIL_TEST:i.stencilTest=!0;break}i.realEnable.call(c,d)},c.disable=function(d){switch(d){case c.CULL_FACE:i.cullFace=!1;break;case c.DEPTH_TEST:i.depthTest=!1;break;case c.BLEND:i.blend=!1;break;case c.SCISSOR_TEST:i.scissorTest=!1;break;case c.STENCIL_TEST:i.stencilTest=!1;break}i.realDisable.call(c,d)},this.colorMask=c.getParameter(c.COLOR_WRITEMASK),c.colorMask=function(d,y,N,H){i.colorMask[0]=d,i.colorMask[1]=y,i.colorMask[2]=N,i.colorMask[3]=H,i.realColorMask.call(c,d,y,N,H)},this.clearColor=c.getParameter(c.COLOR_CLEAR_VALUE),c.clearColor=function(d,y,N,H){i.clearColor[0]=d,i.clearColor[1]=y,i.clearColor[2]=N,i.clearColor[3]=H,i.realClearColor.call(c,d,y,N,H)},this.viewport=c.getParameter(c.VIEWPORT),c.viewport=function(d,y,N,H){i.viewport[0]=d,i.viewport[1]=y,i.viewport[2]=N,i.viewport[3]=H,i.realViewport.call(c,d,y,N,H)},this.isPatched=!0,_e(n)}},L.prototype.unpatch=function(){if(!!this.isPatched){var i=this.gl,n=this.gl.canvas;te()||(Object.defineProperty(n,"width",this.realCanvasWidth),Object.defineProperty(n,"height",this.realCanvasHeight)),n.width=this.bufferWidth,n.height=this.bufferHeight,i.bindFramebuffer=this.realBindFramebuffer,i.enable=this.realEnable,i.disable=this.realDisable,i.colorMask=this.realColorMask,i.clearColor=this.realClearColor,i.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&i.bindFramebuffer(i.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){_e(n)},1)}},L.prototype.setTextureBounds=function(i,n){i||(i=[0,0,.5,1]),n||(n=[.5,0,.5,1]),this.viewportOffsetScale[0]=i[0],this.viewportOffsetScale[1]=i[1],this.viewportOffsetScale[2]=i[2],this.viewportOffsetScale[3]=i[3],this.viewportOffsetScale[4]=n[0],this.viewportOffsetScale[5]=n[1],this.viewportOffsetScale[6]=n[2],this.viewportOffsetScale[7]=n[3]},L.prototype.submitFrame=function(){var i=this.gl,n=this,c=[];if(this.dirtySubmitFrameBindings||c.push(i.CURRENT_PROGRAM,i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING,i.TEXTURE_BINDING_2D,i.TEXTURE0),we(i,c,function(y){n.realBindFramebuffer.call(y,y.FRAMEBUFFER,null);var N=0,H=0;n.instanceExt&&(N=y.getVertexAttrib(n.attribs.position,n.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),H=y.getVertexAttrib(n.attribs.texCoord,n.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),n.cullFace&&n.realDisable.call(y,y.CULL_FACE),n.depthTest&&n.realDisable.call(y,y.DEPTH_TEST),n.blend&&n.realDisable.call(y,y.BLEND),n.scissorTest&&n.realDisable.call(y,y.SCISSOR_TEST),n.stencilTest&&n.realDisable.call(y,y.STENCIL_TEST),n.realColorMask.call(y,!0,!0,!0,!0),n.realViewport.call(y,0,0,y.drawingBufferWidth,y.drawingBufferHeight),(n.ctxAttribs.alpha||te())&&(n.realClearColor.call(y,0,0,0,1),y.clear(y.COLOR_BUFFER_BIT)),y.useProgram(n.program),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,n.indexBuffer),y.bindBuffer(y.ARRAY_BUFFER,n.vertexBuffer),y.enableVertexAttribArray(n.attribs.position),y.enableVertexAttribArray(n.attribs.texCoord),y.vertexAttribPointer(n.attribs.position,2,y.FLOAT,!1,20,0),y.vertexAttribPointer(n.attribs.texCoord,3,y.FLOAT,!1,20,8),n.instanceExt&&(N!=0&&n.instanceExt.vertexAttribDivisorANGLE(n.attribs.position,0),H!=0&&n.instanceExt.vertexAttribDivisorANGLE(n.attribs.texCoord,0)),y.activeTexture(y.TEXTURE0),y.uniform1i(n.uniforms.diffuse,0),y.bindTexture(y.TEXTURE_2D,n.renderTarget),y.uniform4fv(n.uniforms.viewportOffsetScale,n.viewportOffsetScale),y.drawElements(y.TRIANGLES,n.indexCount,y.UNSIGNED_SHORT,0),n.cardboardUI&&n.cardboardUI.renderNoState(),n.realBindFramebuffer.call(n.gl,y.FRAMEBUFFER,n.framebuffer),n.ctxAttribs.preserveDrawingBuffer||(n.realClearColor.call(y,0,0,0,0),y.clear(y.COLOR_BUFFER_BIT)),n.dirtySubmitFrameBindings||n.realBindFramebuffer.call(y,y.FRAMEBUFFER,n.lastBoundFramebuffer),n.cullFace&&n.realEnable.call(y,y.CULL_FACE),n.depthTest&&n.realEnable.call(y,y.DEPTH_TEST),n.blend&&n.realEnable.call(y,y.BLEND),n.scissorTest&&n.realEnable.call(y,y.SCISSOR_TEST),n.stencilTest&&n.realEnable.call(y,y.STENCIL_TEST),n.realColorMask.apply(y,n.colorMask),n.realViewport.apply(y,n.viewport),(n.ctxAttribs.alpha||!n.ctxAttribs.preserveDrawingBuffer)&&n.realClearColor.apply(y,n.clearColor),n.instanceExt&&(N!=0&&n.instanceExt.vertexAttribDivisorANGLE(n.attribs.position,N),H!=0&&n.instanceExt.vertexAttribDivisorANGLE(n.attribs.texCoord,H))}),te()){var d=i.canvas;(d.width!=n.bufferWidth||d.height!=n.bufferHeight)&&(n.bufferWidth=d.width,n.bufferHeight=d.height,n.onResize())}},L.prototype.updateDeviceInfo=function(i){var n=this.gl,c=this,d=[n.ARRAY_BUFFER_BINDING,n.ELEMENT_ARRAY_BUFFER_BINDING];we(n,d,function(y){var N=c.computeMeshVertices_(c.meshWidth,c.meshHeight,i);if(y.bindBuffer(y.ARRAY_BUFFER,c.vertexBuffer),y.bufferData(y.ARRAY_BUFFER,N,y.STATIC_DRAW),!c.indexCount){var H=c.computeMeshIndices_(c.meshWidth,c.meshHeight);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,c.indexBuffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,H,y.STATIC_DRAW),c.indexCount=H.length}})},L.prototype.computeMeshVertices_=function(i,n,c){for(var d=new Float32Array(2*i*n*5),y=c.getLeftEyeVisibleTanAngles(),N=c.getLeftEyeNoLensTanAngles(),H=c.getLeftEyeVisibleScreenRect(N),he=0,se=0;se<2;se++){for(var X=0;X<n;X++)for(var W=0;W<i;W++,he++){var me=W/(i-1),Re=X/(n-1),De=me,Oe=Re,We=Y(y[0],y[2],me),Ue=Y(y[3],y[1],Re),Ge=Math.sqrt(We*We+Ue*Ue),Je=c.distortion.distortInverse(Ge),rt=We*Je/Ge,at=Ue*Je/Ge;me=(rt-N[0])/(N[2]-N[0]),Re=(at-N[3])/(N[1]-N[3]),me=(H.x+me*H.width-.5)*2,Re=(H.y+Re*H.height-.5)*2,d[he*5+0]=me,d[he*5+1]=Re,d[he*5+2]=De,d[he*5+3]=Oe,d[he*5+4]=se}var et=y[2]-y[0];y[0]=-(et+y[0]),y[2]=et-y[2],et=N[2]-N[0],N[0]=-(et+N[0]),N[2]=et-N[2],H.x=1-(H.x+H.width)}return d},L.prototype.computeMeshIndices_=function(i,n){for(var c=new Uint16Array(2*(i-1)*(n-1)*6),d=i/2,y=n/2,N=0,H=0,he=0;he<2;he++)for(var se=0;se<n;se++)for(var X=0;X<i;X++,N++)X==0||se==0||(X<=d==se<=y?(c[H++]=N,c[H++]=N-i-1,c[H++]=N-i,c[H++]=N-i-1,c[H++]=N,c[H++]=N-1):(c[H++]=N-1,c[H++]=N-i,c[H++]=N,c[H++]=N-i,c[H++]=N-1,c[H++]=N-i-1));return c},L.prototype.getOwnPropertyDescriptor_=function(i,n){var c=Object.getOwnPropertyDescriptor(i,n);return(c.get===void 0||c.set===void 0)&&(c.configurable=!0,c.enumerable=!0,c.get=function(){return this.getAttribute(n)},c.set=function(d){this.setAttribute(n,d)}),c};var A=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),b=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),S=Math.PI/180,E=60,w=12,v=20,G=1,M=.75,e=.3125,t=4,r=28,s=1.5;function a(i){this.gl=i,this.attribs={position:0},this.program=oe(i,A,b,this.attribs),this.uniforms=ce(i,this.program),this.vertexBuffer=i.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}a.prototype.destroy=function(){var i=this.gl;this.listener&&i.canvas.removeEventListener("click",this.listener,!1),i.deleteProgram(this.program),i.deleteBuffer(this.vertexBuffer)},a.prototype.listen=function(i,n){var c=this.gl.canvas;this.listener=function(d){var y=c.clientWidth/2,N=r*s;d.clientX>y-N&&d.clientX<y+N&&d.clientY>c.clientHeight-N?i(d):d.clientX<N&&d.clientY<N&&n(d)},c.addEventListener("click",this.listener,!1)},a.prototype.onResize=function(){var i=this.gl,n=this,c=[i.ARRAY_BUFFER_BINDING];we(i,c,function(d){var y=[],N=d.drawingBufferWidth/2,H=Math.max(screen.width,screen.height)*window.devicePixelRatio,he=d.drawingBufferWidth/H,se=he*window.devicePixelRatio,X=t*se/2,W=r*s*se,me=r*se/2,Re=(r*s-r)*se;y.push(N-X,W),y.push(N-X,d.drawingBufferHeight),y.push(N+X,W),y.push(N+X,d.drawingBufferHeight),n.gearOffset=y.length/2;function De(Je,rt){var at=(90-Je)*S,et=Math.cos(at),ot=Math.sin(at);y.push(e*et*me+N,e*ot*me+me),y.push(rt*et*me+N,rt*ot*me+me)}for(var Oe=0;Oe<=6;Oe++){var We=Oe*E;De(We,G),De(We+w,G),De(We+v,M),De(We+(E-v),M),De(We+(E-w),G)}n.gearVertexCount=y.length/2-n.gearOffset,n.arrowOffset=y.length/2;function Ue(Je,rt){y.push(Re+Je,d.drawingBufferHeight-Re-rt)}var Ge=X/Math.sin(45*S);Ue(0,me),Ue(me,0),Ue(me+Ge,Ge),Ue(Ge,me+Ge),Ue(Ge,me-Ge),Ue(0,me),Ue(me,me*2),Ue(me+Ge,me*2-Ge),Ue(Ge,me-Ge),Ue(0,me),Ue(Ge,me-X),Ue(r*se,me-X),Ue(Ge,me+X),Ue(r*se,me+X),n.arrowVertexCount=y.length/2-n.arrowOffset,d.bindBuffer(d.ARRAY_BUFFER,n.vertexBuffer),d.bufferData(d.ARRAY_BUFFER,new Float32Array(y),d.STATIC_DRAW)})},a.prototype.render=function(){var i=this.gl,n=this,c=[i.CULL_FACE,i.DEPTH_TEST,i.BLEND,i.SCISSOR_TEST,i.STENCIL_TEST,i.COLOR_WRITEMASK,i.VIEWPORT,i.CURRENT_PROGRAM,i.ARRAY_BUFFER_BINDING];we(i,c,function(d){d.disable(d.CULL_FACE),d.disable(d.DEPTH_TEST),d.disable(d.BLEND),d.disable(d.SCISSOR_TEST),d.disable(d.STENCIL_TEST),d.colorMask(!0,!0,!0,!0),d.viewport(0,0,d.drawingBufferWidth,d.drawingBufferHeight),n.renderNoState()})},a.prototype.renderNoState=function(){var i=this.gl;i.useProgram(this.program),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.enableVertexAttribArray(this.attribs.position),i.vertexAttribPointer(this.attribs.position,2,i.FLOAT,!1,8,0),i.uniform4f(this.uniforms.color,1,1,1,1),be(this.projMat,0,i.drawingBufferWidth,0,i.drawingBufferHeight,.1,1024),i.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),i.drawArrays(i.TRIANGLE_STRIP,0,4),i.drawArrays(i.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),i.drawArrays(i.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function h(i){this.coefficients=i}h.prototype.distortInverse=function(i){for(var n=0,c=1,d=i-this.distort(n);Math.abs(c-n)>1e-4;){var y=i-this.distort(c),N=c-y*((c-n)/(y-d));n=c,c=N,d=y}return c},h.prototype.distort=function(i){for(var n=i*i,c=0,d=0;d<this.coefficients.length;d++)c=n*(c+this.coefficients[d]);return(c+1)*i};var p=Math.PI/180,u=180/Math.PI,g=function(n,c,d){this.x=n||0,this.y=c||0,this.z=d||0};g.prototype={constructor:g,set:function(n,c,d){return this.x=n,this.y=c,this.z=d,this},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var n=this.length();if(n!==0){var c=1/n;this.multiplyScalar(c)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(n){this.x*=n,this.y*=n,this.z*=n},applyQuaternion:function(n){var c=this.x,d=this.y,y=this.z,N=n.x,H=n.y,he=n.z,se=n.w,X=se*c+H*y-he*d,W=se*d+he*c-N*y,me=se*y+N*d-H*c,Re=-N*c-H*d-he*y;return this.x=X*se+Re*-N+W*-he-me*-H,this.y=W*se+Re*-H+me*-N-X*-he,this.z=me*se+Re*-he+X*-H-W*-N,this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},crossVectors:function(n,c){var d=n.x,y=n.y,N=n.z,H=c.x,he=c.y,se=c.z;return this.x=y*se-N*he,this.y=N*H-d*se,this.z=d*he-y*H,this}};var m=function(n,c,d,y){this.x=n||0,this.y=c||0,this.z=d||0,this.w=y!==void 0?y:1};m.prototype={constructor:m,set:function(n,c,d,y){return this.x=n,this.y=c,this.z=d,this.w=y,this},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w,this},setFromEulerXYZ:function(n,c,d){var y=Math.cos(n/2),N=Math.cos(c/2),H=Math.cos(d/2),he=Math.sin(n/2),se=Math.sin(c/2),X=Math.sin(d/2);return this.x=he*N*H+y*se*X,this.y=y*se*H-he*N*X,this.z=y*N*X+he*se*H,this.w=y*N*H-he*se*X,this},setFromEulerYXZ:function(n,c,d){var y=Math.cos(n/2),N=Math.cos(c/2),H=Math.cos(d/2),he=Math.sin(n/2),se=Math.sin(c/2),X=Math.sin(d/2);return this.x=he*N*H+y*se*X,this.y=y*se*H-he*N*X,this.z=y*N*X-he*se*H,this.w=y*N*H+he*se*X,this},setFromAxisAngle:function(n,c){var d=c/2,y=Math.sin(d);return this.x=n.x*y,this.y=n.y*y,this.z=n.z*y,this.w=Math.cos(d),this},multiply:function(n){return this.multiplyQuaternions(this,n)},multiplyQuaternions:function(n,c){var d=n.x,y=n.y,N=n.z,H=n.w,he=c.x,se=c.y,X=c.z,W=c.w;return this.x=d*W+H*he+y*X-N*se,this.y=y*W+H*se+N*he-d*X,this.z=N*W+H*X+d*se-y*he,this.w=H*W-d*he-y*se-N*X,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var n=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return n===0?(this.x=0,this.y=0,this.z=0,this.w=1):(n=1/n,this.x=this.x*n,this.y=this.y*n,this.z=this.z*n,this.w=this.w*n),this},slerp:function(n,c){if(c===0)return this;if(c===1)return this.copy(n);var d=this.x,y=this.y,N=this.z,H=this.w,he=H*n.w+d*n.x+y*n.y+N*n.z;if(he<0?(this.w=-n.w,this.x=-n.x,this.y=-n.y,this.z=-n.z,he=-he):this.copy(n),he>=1)return this.w=H,this.x=d,this.y=y,this.z=N,this;var se=Math.acos(he),X=Math.sqrt(1-he*he);if(Math.abs(X)<.001)return this.w=.5*(H+this.w),this.x=.5*(d+this.x),this.y=.5*(y+this.y),this.z=.5*(N+this.z),this;var W=Math.sin((1-c)*se)/X,me=Math.sin(c*se)/X;return this.w=H*W+this.w*me,this.x=d*W+this.x*me,this.y=y*W+this.y*me,this.z=N*W+this.z*me,this},setFromUnitVectors:function(){var i,n,c=1e-6;return function(d,y){return i===void 0&&(i=new g),n=d.dot(y)+1,n<c?(n=0,Math.abs(d.x)>Math.abs(d.z)?i.set(-d.y,d.x,0):i.set(0,-d.z,d.y)):i.crossVectors(d,y),this.x=i.x,this.y=i.y,this.z=i.z,this.w=n,this.normalize(),this}}()};function _(i){this.width=i.width||D(),this.height=i.height||ye(),this.widthMeters=i.widthMeters,this.heightMeters=i.heightMeters,this.bevelMeters=i.bevelMeters}var F=new _({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),I=new _({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),P={CardboardV1:new O({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new O({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function V(i,n){this.viewer=P.CardboardV2,this.updateDeviceParams(i),this.distortion=new h(this.viewer.distortionCoefficients);for(var c=0;c<n.length;c++){var d=n[c];P[d.id]=new O(d)}}V.prototype.updateDeviceParams=function(i){this.device=this.determineDevice_(i)||this.device},V.prototype.getDevice=function(){return this.device},V.prototype.setViewer=function(i){this.viewer=i,this.distortion=new h(this.viewer.distortionCoefficients)},V.prototype.determineDevice_=function(i){if(!i)return te()?(console.warn("Using fallback iOS device measurements."),I):(console.warn("Using fallback Android device measurements."),F);var n=.0254,c=n/i.xdpi,d=n/i.ydpi,y=D(),N=ye();return new _({widthMeters:c*y,heightMeters:d*N,bevelMeters:i.bevelMm*.001})},V.prototype.getDistortedFieldOfViewLeftEye=function(){var i=this.viewer,n=this.device,c=this.distortion,d=i.screenLensDistance,y=(n.widthMeters-i.interLensDistance)/2,N=i.interLensDistance/2,H=i.baselineLensDistance-n.bevelMeters,he=n.heightMeters-H,se=u*Math.atan(c.distort(y/d)),X=u*Math.atan(c.distort(N/d)),W=u*Math.atan(c.distort(H/d)),me=u*Math.atan(c.distort(he/d));return{leftDegrees:Math.min(se,i.fov),rightDegrees:Math.min(X,i.fov),downDegrees:Math.min(W,i.fov),upDegrees:Math.min(me,i.fov)}},V.prototype.getLeftEyeVisibleTanAngles=function(){var i=this.viewer,n=this.device,c=this.distortion,d=Math.tan(-p*i.fov),y=Math.tan(p*i.fov),N=Math.tan(p*i.fov),H=Math.tan(-p*i.fov),he=n.widthMeters/4,se=n.heightMeters/2,X=i.baselineLensDistance-n.bevelMeters-se,W=i.interLensDistance/2-he,me=-X,Re=i.screenLensDistance,De=c.distort((W-he)/Re),Oe=c.distort((me+se)/Re),We=c.distort((W+he)/Re),Ue=c.distort((me-se)/Re),Ge=new Float32Array(4);return Ge[0]=Math.max(d,De),Ge[1]=Math.min(y,Oe),Ge[2]=Math.min(N,We),Ge[3]=Math.max(H,Ue),Ge},V.prototype.getLeftEyeNoLensTanAngles=function(){var i=this.viewer,n=this.device,c=this.distortion,d=new Float32Array(4),y=c.distortInverse(Math.tan(-p*i.fov)),N=c.distortInverse(Math.tan(p*i.fov)),H=c.distortInverse(Math.tan(p*i.fov)),he=c.distortInverse(Math.tan(-p*i.fov)),se=n.widthMeters/4,X=n.heightMeters/2,W=i.baselineLensDistance-n.bevelMeters-X,me=i.interLensDistance/2-se,Re=-W,De=i.screenLensDistance,Oe=(me-se)/De,We=(Re+X)/De,Ue=(me+se)/De,Ge=(Re-X)/De;return d[0]=Math.max(y,Oe),d[1]=Math.min(N,We),d[2]=Math.min(H,Ue),d[3]=Math.max(he,Ge),d},V.prototype.getLeftEyeVisibleScreenRect=function(i){var n=this.viewer,c=this.device,d=n.screenLensDistance,y=(c.widthMeters-n.interLensDistance)/2,N=n.baselineLensDistance-c.bevelMeters,H=(i[0]*d+y)/c.widthMeters,he=(i[1]*d+N)/c.heightMeters,se=(i[2]*d+y)/c.widthMeters,X=(i[3]*d+N)/c.heightMeters;return{x:H,y:X,width:se-H,height:he-X}},V.prototype.getFieldOfViewLeftEye=function(i){return i?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},V.prototype.getFieldOfViewRightEye=function(i){var n=this.getFieldOfViewLeftEye(i);return{leftDegrees:n.rightDegrees,rightDegrees:n.leftDegrees,upDegrees:n.upDegrees,downDegrees:n.downDegrees}},V.prototype.getUndistortedFieldOfViewLeftEye=function(){var i=this.getUndistortedParams_();return{leftDegrees:u*Math.atan(i.outerDist),rightDegrees:u*Math.atan(i.innerDist),downDegrees:u*Math.atan(i.bottomDist),upDegrees:u*Math.atan(i.topDist)}},V.prototype.getUndistortedViewportLeftEye=function(){var i=this.getUndistortedParams_(),n=this.viewer,c=this.device,d=n.screenLensDistance,y=c.widthMeters/d,N=c.heightMeters/d,H=c.width/y,he=c.height/N,se=Math.round((i.eyePosX-i.outerDist)*H),X=Math.round((i.eyePosY-i.bottomDist)*he);return{x:se,y:X,width:Math.round((i.eyePosX+i.innerDist)*H)-se,height:Math.round((i.eyePosY+i.topDist)*he)-X}},V.prototype.getUndistortedParams_=function(){var i=this.viewer,n=this.device,c=this.distortion,d=i.screenLensDistance,y=i.interLensDistance/2/d,N=n.widthMeters/d,H=n.heightMeters/d,he=N/2-y,se=(i.baselineLensDistance-n.bevelMeters)/d,X=i.fov,W=c.distortInverse(Math.tan(p*X)),me=Math.min(he,W),Re=Math.min(y,W),De=Math.min(se,W),Oe=Math.min(H-se,W);return{outerDist:me,innerDist:Re,topDist:Oe,bottomDist:De,eyePosX:he,eyePosY:se}};function O(i){this.id=i.id,this.label=i.label,this.fov=i.fov,this.interLensDistance=i.interLensDistance,this.baselineLensDistance=i.baselineLensDistance,this.screenLensDistance=i.screenLensDistance,this.distortionCoefficients=i.distortionCoefficients,this.inverseCoefficients=i.inverseCoefficients}V.Viewers=P;var B=1,J="2019-11-09T17:36:14Z",Me=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],ae={format:B,last_updated:J,devices:Me};function le(i,n){if(this.dpdb=ae,this.recalculateDeviceParams_(),i){this.onDeviceParamsUpdated=n;var c=new XMLHttpRequest,d=this;c.open("GET",i,!0),c.addEventListener("load",function(){d.loading=!1,c.status>=200&&c.status<=299?(d.dpdb=JSON.parse(c.response),d.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),c.send()}}le.prototype.getDeviceParams=function(){return this.deviceParams},le.prototype.recalculateDeviceParams_=function(){var i=this.calcDeviceParams_();i?(this.deviceParams=i,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},le.prototype.calcDeviceParams_=function(){var i=this.dpdb;if(!i)return console.error("DPDB not available."),null;if(i.format!=1)return console.error("DPDB has unexpected format version."),null;if(!i.devices||!i.devices.length)return console.error("DPDB does not have a devices section."),null;var n=navigator.userAgent||navigator.vendor||window.opera,c=D(),d=ye();if(!i.devices)return console.error("DPDB has no devices section."),null;for(var y=0;y<i.devices.length;y++){var N=i.devices[y];if(!N.rules){console.warn("Device["+y+"] has no rules section.");continue}if(N.type!="ios"&&N.type!="android"){console.warn("Device["+y+"] has invalid type.");continue}if(te()==(N.type=="ios")){for(var H=!1,he=0;he<N.rules.length;he++){var se=N.rules[he];if(this.ruleMatches_(se,n,c,d)){H=!0;break}}if(!!H){var X=N.dpi[0]||N.dpi,W=N.dpi[1]||N.dpi;return new Ae({xdpi:X,ydpi:W,bevelMm:N.bw})}}}return console.warn("No DPDB device match."),null},le.prototype.ruleMatches_=function(i,n,c,d){if(!i.ua&&!i.res||(i.ua&&i.ua.substring(0,2)==="SM"&&(i.ua=i.ua.substring(0,7)),i.ua&&n.indexOf(i.ua)<0))return!1;if(i.res){if(!i.res[0]||!i.res[1])return!1;var y=i.res[0],N=i.res[1];if(Math.min(c,d)!=Math.min(y,N)||Math.max(c,d)!=Math.max(y,N))return!1}return!0};function Ae(i){this.xdpi=i.xdpi,this.ydpi=i.ydpi,this.bevelMm=i.bevelMm}function de(i,n){this.set(i,n)}de.prototype.set=function(i,n){this.sample=i,this.timestampS=n},de.prototype.copy=function(i){this.set(i.sample,i.timestampS)};function Ce(i,n){this.kFilter=i,this.isDebug=n,this.currentAccelMeasurement=new de,this.currentGyroMeasurement=new de,this.previousGyroMeasurement=new de,te()?this.filterQ=new m(-1,0,0,1):this.filterQ=new m(1,0,0,1),this.previousFilterQ=new m,this.previousFilterQ.copy(this.filterQ),this.accelQ=new m,this.isOrientationInitialized=!1,this.estimatedGravity=new g,this.measuredGravity=new g,this.gyroIntegralQ=new m}Ce.prototype.addAccelMeasurement=function(i,n){this.currentAccelMeasurement.set(i,n)},Ce.prototype.addGyroMeasurement=function(i,n){this.currentGyroMeasurement.set(i,n);var c=n-this.previousGyroMeasurement.timestampS;ue(c)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Ce.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var i=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,n=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,i);this.gyroIntegralQ.multiply(n),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(n);var c=new m;c.copy(this.filterQ),c.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(c),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var d=new m;d.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),d.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",u*He(d),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var y=new m;y.copy(this.filterQ),y.multiply(d),this.filterQ.slerp(y,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Ce.prototype.getOrientation=function(){return this.filterQ},Ce.prototype.accelToQuaternion_=function(i){var n=new g;n.copy(i),n.normalize();var c=new m;return c.setFromUnitVectors(new g(0,0,-1),n),c.inverse(),c},Ce.prototype.gyroToQuaternionDelta_=function(i,n){var c=new m,d=new g;return d.copy(i),d.normalize(),c.setFromAxisAngle(d,i.length()*n),c};function Be(i,n){this.predictionTimeS=i,this.isDebug=n,this.previousQ=new m,this.previousTimestampS=null,this.deltaQ=new m,this.outQ=new m}Be.prototype.getPrediction=function(i,n,c){if(!this.previousTimestampS)return this.previousQ.copy(i),this.previousTimestampS=c,i;var d=new g;d.copy(n),d.normalize();var y=n.length();if(y<p*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(u*y).toFixed(1)),this.outQ.copy(i),this.previousQ.copy(i),this.outQ;var N=y*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(d,N),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(i),this.previousTimestampS=c,this.outQ};function Fe(i,n,c,d){this.yawOnly=c,this.accelerometer=new g,this.gyroscope=new g,this.filter=new Ce(i,d),this.posePredictor=new Be(n,d),this.isFirefoxAndroid=ee(),this.isIOS=te();var y=ve();this.isDeviceMotionInRadians=!this.isIOS&&y&&y<66,this.isWithoutDeviceMotion=xe()||Ie(),this.filterToWorldQ=new m,te()?this.filterToWorldQ.setFromAxisAngle(new g(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new g(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new m,this.worldToScreenQ=new m,this.originalPoseAdjustQ=new m,this.originalPoseAdjustQ.setFromAxisAngle(new g(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),U()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new m,this.orientationOut_=new Float32Array(4),this.start()}Fe.prototype.getPosition=function(){return null},Fe.prototype.getOrientation=function(){var i=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var y=new m().setFromAxisAngle(new g(0,0,-1),0),N=new m;return window.orientation===-90?N.setFromAxisAngle(new g(0,1,0),Math.PI/-2):N.setFromAxisAngle(new g(0,1,0),Math.PI/2),y.multiply(N)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var y=new m;return y.setFromAxisAngle(new g(1,0,0),-Math.PI/2),y}(),i=this._deviceOrientationQ;var c=new m;return c.copy(i),c.multiply(this.deviceOrientationFilterToWorldQ),c.multiply(this.resetQ),c.multiply(this.worldToScreenQ),c.multiplyQuaternions(this.deviceOrientationFixQ,c),this.yawOnly&&(c.x=0,c.z=0,c.normalize()),this.orientationOut_[0]=c.x,this.orientationOut_[1]=c.y,this.orientationOut_[2]=c.z,this.orientationOut_[3]=c.w,this.orientationOut_}else{var n=this.filter.getOrientation();i=this.posePredictor.getPrediction(n,this.gyroscope,this.previousTimestampS)}var c=new m;return c.copy(this.filterToWorldQ),c.multiply(this.resetQ),c.multiply(i),c.multiply(this.worldToScreenQ),this.yawOnly&&(c.x=0,c.z=0,c.normalize()),this.orientationOut_[0]=c.x,this.orientationOut_[1]=c.y,this.orientationOut_[2]=c.z,this.orientationOut_[3]=c.w,this.orientationOut_},Fe.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),U()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Fe.prototype.onDeviceOrientation_=function(i){this._deviceOrientationQ=this._deviceOrientationQ||new m;var n=i.alpha,c=i.beta,d=i.gamma;n=(n||0)*Math.PI/180,c=(c||0)*Math.PI/180,d=(d||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(c,n,-d)},Fe.prototype.onDeviceMotion_=function(i){this.updateDeviceMotion_(i)},Fe.prototype.updateDeviceMotion_=function(i){var n=i.accelerationIncludingGravity,c=i.rotationRate,d=i.timeStamp/1e3,y=d-this.previousTimestampS;if(y<0){f("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=d;return}else if(y<=Q||y>Z){f("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=d;return}this.accelerometer.set(-n.x,-n.y,-n.z),c&&(q()?this.gyroscope.set(-c.beta,c.alpha,c.gamma):this.gyroscope.set(c.alpha,c.beta,c.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,d)),this.filter.addAccelMeasurement(this.accelerometer,d),this.previousTimestampS=d},Fe.prototype.onOrientationChange_=function(i){this.setScreenTransform_()},Fe.prototype.onMessage_=function(i){var n=i.data;if(!(!n||!n.type)){var c=n.type.toLowerCase();c==="devicemotion"&&this.updateDeviceMotion_(n.deviceMotionEvent)}},Fe.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new g(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new g(0,0,1),Math.PI/2);break;case 180:break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Fe.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),te()&&ze()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},Fe.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Ne=60,ke=new g(1,0,0),Ve=new g(0,0,1),je=new m;je.setFromAxisAngle(ke,-Math.PI/2),je.multiply(new m().setFromAxisAngle(Ve,Math.PI/2));var Se=function(){function i(n){ie(this,i),this.config=n,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new m,this._outQ=new m,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return ne(i,[{key:"init",value:function(){var c=null;try{c=new RelativeOrientationSensor({frequency:Ne,referenceFrame:"screen"}),c.addEventListener("error",this._onSensorError)}catch(d){this.errors.push(d),d.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):d.name==="ReferenceError"?this.useDeviceMotion():console.error(d)}c&&(this.api="sensor",this.sensor=c,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Fe(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var c=this.sensor.quaternion;this._sensorQ.set(c[0],c[1],c[2],c[3]);var d=this._outQ;return d.copy(je),d.multiply(this._sensorQ),this.config.YAW_ONLY&&(d.x=d.z=0,d.normalize()),this._out[0]=d.x,this._out[1]=d.y,this._out[2]=d.z,this._out[3]=d.w,this._out}},{key:"_onSensorError",value:function(c){this.errors.push(c.error),c.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):c.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(c.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),i}(),Ze="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function tt(){this.loadIcon_();var i=document.createElement("div"),n=i.style;n.position="fixed",n.top=0,n.right=0,n.bottom=0,n.left=0,n.backgroundColor="gray",n.fontFamily="sans-serif",n.zIndex=1e6;var c=document.createElement("img");c.src=this.icon;var n=c.style;n.marginLeft="25%",n.marginTop="25%",n.width="50%",i.appendChild(c);var d=document.createElement("div"),n=d.style;n.textAlign="center",n.fontSize="16px",n.lineHeight="24px",n.margin="24px 25%",n.width="50%",d.innerHTML="Place your phone into your Cardboard viewer.",i.appendChild(d);var y=document.createElement("div"),n=y.style;n.backgroundColor="#CFD8DC",n.position="fixed",n.bottom=0,n.width="100%",n.height="48px",n.padding="14px 24px",n.boxSizing="border-box",n.color="#656A6B",i.appendChild(y);var N=document.createElement("div");N.style.float="left",N.innerHTML="No Cardboard viewer?";var H=document.createElement("a");H.href="https://www.google.com/get/cardboard/get-cardboard/",H.innerHTML="get one",H.target="_blank";var n=H.style;n.float="right",n.fontWeight=600,n.textTransform="uppercase",n.borderLeft="1px solid gray",n.paddingLeft="24px",n.textDecoration="none",n.color="#656A6B",y.appendChild(N),y.appendChild(H),this.overlay=i,this.text=d,this.hide()}tt.prototype.show=function(i){!i&&!this.overlay.parentElement?document.body.appendChild(this.overlay):i&&(this.overlay.parentElement&&this.overlay.parentElement!=i&&this.overlay.parentElement.removeChild(this.overlay),i.appendChild(this.overlay)),this.overlay.style.display="block";var n=this.overlay.querySelector("img"),c=n.style;U()?(c.width="20%",c.marginLeft="40%",c.marginTop="3%"):(c.width="50%",c.marginLeft="25%",c.marginTop="25%")},tt.prototype.hide=function(){this.overlay.style.display="none"},tt.prototype.showTemporarily=function(i,n){this.show(n),this.timer=setTimeout(this.hide.bind(this),i)},tt.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},tt.prototype.update=function(){this.disableShowTemporarily(),!U()&&ge()?this.show():this.hide()},tt.prototype.loadIcon_=function(){this.icon=re("image/svg+xml",Ze)};var ct="CardboardV1",fe="WEBVR_CARDBOARD_VIEWER",$e="webvr-polyfill-viewer-selector";function Ye(i){try{this.selectedKey=localStorage.getItem(fe)}catch(n){console.error("Failed to load viewer profile: %s",n)}this.selectedKey||(this.selectedKey=i||ct),this.dialog=this.createDialog_(V.Viewers),this.root=null,this.onChangeCallbacks_=[]}Ye.prototype.show=function(i){this.root=i,i.appendChild(this.dialog);var n=this.dialog.querySelector("#"+this.selectedKey);n.checked=!0,this.dialog.style.display="block"},Ye.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Ye.prototype.getCurrentViewer=function(){return V.Viewers[this.selectedKey]},Ye.prototype.getSelectedKey_=function(){var i=this.dialog.querySelector("input[name=field]:checked");return i?i.id:null},Ye.prototype.onChange=function(i){this.onChangeCallbacks_.push(i)},Ye.prototype.fireOnChange_=function(i){for(var n=0;n<this.onChangeCallbacks_.length;n++)this.onChangeCallbacks_[n](i)},Ye.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!V.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(V.Viewers[this.selectedKey]);try{localStorage.setItem(fe,this.selectedKey)}catch(i){console.error("Failed to save viewer profile: %s",i)}this.hide()},Ye.prototype.createDialog_=function(i){var n=document.createElement("div");n.classList.add($e),n.style.display="none";var c=document.createElement("div"),d=c.style;d.position="fixed",d.left=0,d.top=0,d.width="100%",d.height="100%",d.background="rgba(0, 0, 0, 0.3)",c.addEventListener("click",this.hide.bind(this));var y=280,N=document.createElement("div"),d=N.style;d.boxSizing="border-box",d.position="fixed",d.top="24px",d.left="50%",d.marginLeft=-y/2+"px",d.width=y+"px",d.padding="24px",d.overflow="hidden",d.background="#fafafa",d.fontFamily="'Roboto', sans-serif",d.boxShadow="0px 5px 20px #666",N.appendChild(this.createH1_("Select your viewer"));for(var H in i)N.appendChild(this.createChoice_(H,i[H].label));return N.appendChild(this.createButton_("Save",this.onSave_.bind(this))),n.appendChild(c),n.appendChild(N),n},Ye.prototype.createH1_=function(i){var n=document.createElement("h1"),c=n.style;return c.color="black",c.fontSize="20px",c.fontWeight="bold",c.marginTop=0,c.marginBottom="24px",n.innerHTML=i,n},Ye.prototype.createChoice_=function(i,n){var c=document.createElement("div");c.style.marginTop="8px",c.style.color="black";var d=document.createElement("input");d.style.fontSize="30px",d.setAttribute("id",i),d.setAttribute("type","radio"),d.setAttribute("value",i),d.setAttribute("name","field");var y=document.createElement("label");return y.style.marginLeft="4px",y.setAttribute("for",i),y.innerHTML=n,c.appendChild(d),c.appendChild(y),c},Ye.prototype.createButton_=function(i,n){var c=document.createElement("button");c.innerHTML=i;var d=c.style;return d.float="right",d.textTransform="uppercase",d.color="#1094f7",d.fontSize="14px",d.letterSpacing=0,d.border=0,d.background="none",d.marginTop="16px",c.addEventListener("click",n),c};var qe=typeof window!="undefined"?window:typeof l!="undefined"?l:typeof self!="undefined"?self:{};function st(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function lt(i,n){return n={exports:{}},i(n,n.exports),n.exports}var mt=lt(function(i,n){(function(d,y){i.exports=y()})(qe,function(){return function(c){var d={};function y(N){if(d[N])return d[N].exports;var H=d[N]={i:N,l:!1,exports:{}};return c[N].call(H.exports,H,H.exports,y),H.l=!0,H.exports}return y.m=c,y.c=d,y.d=function(N,H,he){y.o(N,H)||Object.defineProperty(N,H,{configurable:!1,enumerable:!0,get:he})},y.n=function(N){var H=N&&N.__esModule?function(){return N.default}:function(){return N};return y.d(H,"a",H),H},y.o=function(N,H){return Object.prototype.hasOwnProperty.call(N,H)},y.p="",y(y.s=0)}([function(c,d,y){"use strict";var N=function(){function W(me,Re){for(var De=0;De<Re.length;De++){var Oe=Re[De];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(me,Oe.key,Oe)}}return function(me,Re,De){return Re&&W(me.prototype,Re),De&&W(me,De),me}}();function H(W,me){if(!(W instanceof me))throw new TypeError("Cannot call a class as a function")}var he=y(1),se=typeof navigator!="undefined"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,X=function(){function W(){H(this,W),se?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",he),this.noSleepVideo.addEventListener("timeupdate",function(me){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return N(W,[{key:"enable",value:function(){se?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){se?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),W}();c.exports=X},function(c,d,y){"use strict";c.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Ft=st(mt),Dt=1e3,Ct=[0,0,.5,1],Lt=[.5,0,.5,1],Bt=window.requestAnimationFrame,Nt=window.cancelAnimationFrame;function Ot(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Pt(i){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:i.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:i.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:i.canPresent},maxLayers:{writable:!1,enumerable:!0,value:i.maxLayers},hasOrientation:{enumerable:!0,get:function(){return R("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),i.hasOrientation}}})}function Ke(i){i=i||{};var n="wakelock"in i?i.wakelock:!0;this.isPolyfilled=!0,this.displayId=Dt++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return R("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Pt({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,n&&ge()&&(this.wakelock_=new Ft)}Ke.prototype.getFrameData=function(i){return Le(i,this._getPose(),this)},Ke.prototype.getPose=function(){return R("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Ke.prototype.resetPose=function(){return R("VRDisplay.prototype.resetPose"),this._resetPose()},Ke.prototype.getImmediatePose=function(){return R("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Ke.prototype.requestAnimationFrame=function(i){return Bt(i)},Ke.prototype.cancelAnimationFrame=function(i){return Nt(i)},Ke.prototype.wrapForFullscreen=function(i){if(te())return i;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var n=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",n.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==i)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=i,this.originalParent_=i.parentElement,this.originalParent_||document.body.appendChild(i),!this.fullscreenWrapper_.parentElement){var c=this.fullscreenElement_.parentElement;c.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),c.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var d=this;function y(){if(!!d.fullscreenElement_){var N=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];d.fullscreenElement_.setAttribute("style",N.join("; ")+";")}}return y(),this.fullscreenWrapper_},Ke.prototype.removeFullscreenWrapper=function(){if(!!this.fullscreenElement_){var i=this.fullscreenElement_;this.fullscreenElementCachedStyle_?i.setAttribute("style",this.fullscreenElementCachedStyle_):i.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var n=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(i),this.originalParent_===n?n.insertBefore(i,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(i),n.removeChild(this.fullscreenWrapper_),i}},Ke.prototype.requestPresent=function(i){var n=this.isPresenting,c=this;return i instanceof Array||(R("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),i=[i]),new Promise(function(d,y){if(!c.capabilities.canPresent){y(new Error("VRDisplay is not capable of presenting."));return}if(i.length==0||i.length>c.capabilities.maxLayers){y(new Error("Invalid number of layers."));return}var N=i[0];if(!N.source){d();return}var H=N.leftBounds||Ct,he=N.rightBounds||Lt;if(n){var se=c.layer_;se.source!==N.source&&(se.source=N.source);for(var X=0;X<4;X++)se.leftBounds[X]=H[X],se.rightBounds[X]=he[X];c.wrapForFullscreen(c.layer_.source),c.updatePresent_(),d();return}if(c.layer_={predistorted:N.predistorted,source:N.source,leftBounds:H.slice(0),rightBounds:he.slice(0)},c.waitingForPresent_=!1,c.layer_&&c.layer_.source){var W=c.wrapForFullscreen(c.layer_.source),me=function(){var Oe=j();c.isPresenting=W===Oe,c.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(We){console.error("screen.orientation.lock() failed due to",We.message)}),c.waitingForPresent_=!1,c.beginPresent_(),d()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),c.removeFullscreenWrapper(),c.disableWakeLock(),c.endPresent_(),c.removeFullscreenListeners_()),c.fireVRDisplayPresentChange_()},Re=function(){!c.waitingForPresent_||(c.removeFullscreenWrapper(),c.removeFullscreenListeners_(),c.disableWakeLock(),c.waitingForPresent_=!1,c.isPresenting=!1,y(new Error("Unable to present.")))};c.addFullscreenListeners_(W,me,Re),z(W)?(c.enableWakeLock(),c.waitingForPresent_=!0):(te()||k())&&(c.enableWakeLock(),c.isPresenting=!0,c.beginPresent_(),c.fireVRDisplayPresentChange_(),d())}!c.waitingForPresent_&&!te()&&($(),y(new Error("Unable to present.")))})},Ke.prototype.exitPresent=function(){var i=this.isPresenting,n=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(c,d){i?(!$()&&te()&&(n.endPresent_(),n.fireVRDisplayPresentChange_()),k()&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.endPresent_(),n.fireVRDisplayPresentChange_()),c()):d(new Error("Was not presenting to VRDisplay."))})},Ke.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Ke.prototype.fireVRDisplayPresentChange_=function(){var i=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(i)},Ke.prototype.fireVRDisplayConnect_=function(){var i=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(i)},Ke.prototype.addFullscreenListeners_=function(i,n,c){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=i,this.fullscreenChangeHandler_=n,this.fullscreenErrorHandler_=c,n&&(document.fullscreenEnabled?i.addEventListener("fullscreenchange",n,!1):document.webkitFullscreenEnabled?i.addEventListener("webkitfullscreenchange",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",n,!1):document.msFullscreenEnabled&&i.addEventListener("msfullscreenchange",n,!1)),c&&(document.fullscreenEnabled?i.addEventListener("fullscreenerror",c,!1):document.webkitFullscreenEnabled?i.addEventListener("webkitfullscreenerror",c,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",c,!1):document.msFullscreenEnabled&&i.addEventListener("msfullscreenerror",c,!1))},Ke.prototype.removeFullscreenListeners_=function(){if(!!this.fullscreenEventTarget_){var i=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var n=this.fullscreenChangeHandler_;i.removeEventListener("fullscreenchange",n,!1),i.removeEventListener("webkitfullscreenchange",n,!1),document.removeEventListener("mozfullscreenchange",n,!1),i.removeEventListener("msfullscreenchange",n,!1)}if(this.fullscreenErrorHandler_){var c=this.fullscreenErrorHandler_;i.removeEventListener("fullscreenerror",c,!1),i.removeEventListener("webkitfullscreenerror",c,!1),document.removeEventListener("mozfullscreenerror",c,!1),i.removeEventListener("msfullscreenerror",c,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Ke.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Ke.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Ke.prototype.beginPresent_=function(){},Ke.prototype.endPresent_=function(){},Ke.prototype.submitFrame=function(i){},Ke.prototype.getEyeParameters=function(i){return null};var kt={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Tt={LEFT:"left",RIGHT:"right"};function it(i){var n=Qe({},kt);i=Qe(n,i||{}),Ke.call(this,{wakelock:i.MOBILE_WAKE_LOCK}),this.config=i,this.displayName="Cardboard VRDisplay",this.capabilities=new Pt({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Se(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new le(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new V(this.dpdb_.getDeviceParams(),i.ADDITIONAL_VIEWERS),this.viewerSelector_=new Ye(i.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new tt),te()&&window.addEventListener("resize",this.onResize_.bind(this))}return it.prototype=Object.create(Ke.prototype),it.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},it.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},it.prototype._getFieldOfView=function(i){var n;if(i==Tt.LEFT)n=this.deviceInfo_.getFieldOfViewLeftEye();else if(i==Tt.RIGHT)n=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",i),null;return n},it.prototype._getEyeOffset=function(i){var n;if(i==Tt.LEFT)n=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(i==Tt.RIGHT)n=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",i),null;return n},it.prototype.getEyeParameters=function(i){var n=this._getEyeOffset(i),c=this._getFieldOfView(i),d={offset:n,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(d,"fieldOfView",{enumerable:!0,get:function(){return R("VRFieldOfView","VRFrameData's projection matrices"),c}}),d},it.prototype.onDeviceParamsUpdated_=function(i){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(i),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},it.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},it.prototype.beginPresent_=function(){var i=this.layer_.source.getContext("webgl");i||(i=this.layer_.source.getContext("experimental-webgl")),i||(i=this.layer_.source.getContext("webgl2")),!!i&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(i.canvas.width=D()*this.bufferScale_,i.canvas.height=ye()*this.bufferScale_,this.cardboardUI_=new a(i)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new a(i)),this.distorter_=new L(i,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(n){this.viewerSelector_.show(this.layer_.source.parentElement),n.stopPropagation(),n.preventDefault()}.bind(this),function(n){this.exitPresent(),n.stopPropagation(),n.preventDefault()}.bind(this)),this.rotateInstructions_&&(U()&&ge()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},it.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},it.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},it.prototype.submitFrame=function(i){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var n=this.layer_.source.getContext("webgl");n||(n=this.layer_.source.getContext("experimental-webgl")),n||(n=this.layer_.source.getContext("webgl2"));var c=n.canvas;(c.width!=this.lastWidth||c.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=c.width,this.lastHeight=c.height,this.cardboardUI_.render()}},it.prototype.onOrientationChange_=function(i){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},it.prototype.onResize_=function(i){if(this.layer_){var n=this.layer_.source.getContext("webgl");n||(n=this.layer_.source.getContext("experimental-webgl")),n||(n=this.layer_.source.getContext("webgl2"));var c=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];n.canvas.setAttribute("style",c.join("; ")+";"),_e(n.canvas)}},it.prototype.onViewerChanged_=function(i){this.deviceInfo_.setViewer(i),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},it.prototype.fireVRDisplayDeviceParamsChange_=function(){var i=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(i)},it.VRFrameData=Ot,it.VRDisplay=Ke,it})},{}],"3Mmhy":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("gl-matrix/src/gl-matrix/mat4"),ie=C("./XRDevice"),ne=l.interopDefault(ie),x=C("./GamepadXRInputSource"),Q=l.interopDefault(x),Z=C("../utils"),re=arguments[3];const Y=Symbol("@@webxr-polyfill/WebVRDevice"),te=!1,k={highRefreshRate:!0},pe={oculus:1,openvr:1,"spatial controller (spatial interaction source)":1};let ee=0;class ve{constructor(q,U,ue={}){if(this.mode=q,this.enabledFeatures=U,this.outputContext=null,this.immersive=q=="immersive-vr"||q=="immersive-ar",this.ended=null,this.baseLayer=null,this.id=++ee,this.modifiedCanvasLayer=!1,this.outputContext&&!te){const D=ue.renderContextType||"2d";this.renderContext=this.outputContext.canvas.getContext(D)}}}class Ie extends ne.default{constructor(q,U){const{canPresent:ue}=U.capabilities;super(re);this.display=U,this.frame=new re.VRFrameData,this.sessions=new Map,this.immersiveSession=null,this.canPresent=ue,this.baseModelMatrix=T.create(),this.gamepadInputSources={},this.tempVec3=new Float32Array(3),this.onVRDisplayPresentChange=this.onVRDisplayPresentChange.bind(this),re.window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange),this.CAN_USE_GAMEPAD=re.navigator&&"getGamepads"in re.navigator,this.HAS_BITMAP_SUPPORT=(0,Z.isImageBitmapSupported)(re)}get depthNear(){return this.display.depthNear}set depthNear(q){this.display.depthNear=q}get depthFar(){return this.display.depthFar}set depthFar(q){this.display.depthFar=q}onBaseLayerSet(q,U){const ue=this.sessions.get(q),D=U.context.canvas;if(ue.immersive){const ye=this.display.getEyeParameters("left"),z=this.display.getEyeParameters("right");D.width=Math.max(ye.renderWidth,z.renderWidth)*2,D.height=Math.max(ye.renderHeight,z.renderHeight),this.display.requestPresent([{source:D,attributes:k}]).then(()=>{!te&&!this.global.document.body.contains(D)&&(ue.modifiedCanvasLayer=!0,this.global.document.body.appendChild(D),(0,Z.applyCanvasStylesForMinimalRendering)(D)),ue.baseLayer=U})}else ue.baseLayer=U}isSessionSupported(q){return!(q=="immersive-ar"||q=="immersive-vr"&&this.canPresent===!1)}isFeatureSupported(q){switch(q){case"viewer":return!0;case"local":return!0;case"local-floor":return!0;case"bounded":return!1;case"unbounded":return!1;default:return!1}}async requestSession(q,U){if(!this.isSessionSupported(q))return Promise.reject();let ue=q=="immersive-vr";if(ue){const ye=this.global.document.createElement("canvas");if(!te){const z=ye.getContext("webgl")}await this.display.requestPresent([{source:ye,attributes:k}])}const D=new ve(q,U,{renderContextType:this.HAS_BITMAP_SUPPORT?"bitmaprenderer":"2d"});return this.sessions.set(D.id,D),ue&&(this.immersiveSession=D,this.dispatchEvent("@@webxr-polyfill/vr-present-start",D.id)),Promise.resolve(D.id)}requestAnimationFrame(q){return this.display.requestAnimationFrame(q)}getPrimaryButtonIndex(q){let U=0,ue=q.id.toLowerCase();for(let D in pe)if(ue.includes(D)){U=pe[D];break}return Math.min(U,q.buttons.length-1)}onFrameStart(q,U){this.display.depthNear=U.depthNear,this.display.depthFar=U.depthFar,this.display.getFrameData(this.frame);const ue=this.sessions.get(q);if(ue.immersive&&this.CAN_USE_GAMEPAD){let D=this.gamepadInputSources;this.gamepadInputSources={};let ye=this.global.navigator.getGamepads();for(let z=0;z<ye.length;++z){let $=ye[z];if($&&$.displayId>0){let j=D[z];if(j||(j=new Q.default(this,this.display,this.getPrimaryButtonIndex($))),j.updateFromGamepad($),this.gamepadInputSources[z]=j,j.primaryButtonIndex!=-1){let oe=$.buttons[j.primaryButtonIndex].pressed;oe&&!j.primaryActionPressed?this.dispatchEvent("@@webxr-polyfill/input-select-start",{sessionId:ue.id,inputSource:j.inputSource}):!oe&&j.primaryActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-select-end",{sessionId:ue.id,inputSource:j.inputSource}),j.primaryActionPressed=oe}if(j.primarySqueezeButtonIndex!=-1){let oe=$.buttons[j.primarySqueezeButtonIndex].pressed;oe&&!j.primarySqueezeActionPressed?this.dispatchEvent("@@webxr-polyfill/input-squeeze-start",{sessionId:ue.id,inputSource:j.inputSource}):!oe&&j.primarySqueezeActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-squeeze-end",{sessionId:ue.id,inputSource:j.inputSource}),j.primarySqueezeActionPressed=oe}}}}if(!te&&!ue.immersive&&ue.baseLayer){const D=ue.baseLayer.context.canvas;T.perspective(this.frame.leftProjectionMatrix,U.inlineVerticalFieldOfView,D.width/D.height,U.depthNear,U.depthFar)}}onFrameEnd(q){const U=this.sessions.get(q);if(!(U.ended||!U.baseLayer)){if(U.outputContext&&!(U.immersive&&!this.display.capabilities.hasExternalDisplay)){const ue=U.immersive&&this.display.capabilities.hasExternalDisplay,D=U.baseLayer.context.canvas,ye=ue?D.width/2:D.width,z=D.height;if(!te){const $=U.outputContext.canvas,j=$.width,oe=$.height,ce=U.renderContext;this.HAS_BITMAP_SUPPORT?D.transferToImageBitmap?ce.transferFromImageBitmap(D.transferToImageBitmap()):this.global.createImageBitmap(D,0,0,ye,z,{resizeWidth:j,resizeHeight:oe}).then(be=>ce.transferFromImageBitmap(be)):ce.drawImage(D,0,0,ye,z,0,0,j,oe)}}U.immersive&&U.baseLayer&&this.display.submitFrame()}}cancelAnimationFrame(q){this.display.cancelAnimationFrame(q)}async endSession(q){const U=this.sessions.get(q);if(!U.ended){if(U.immersive)return this.display.exitPresent();U.ended=!0}}doesSessionSupportReferenceSpace(q,U){const ue=this.sessions.get(q);return ue.ended?!1:ue.enabledFeatures.has(U)}requestStageBounds(){if(this.display.stageParameters){const q=this.display.stageParameters.sizeX,U=this.display.stageParameters.sizeZ,ue=[];return ue.push(-q/2),ue.push(-U/2),ue.push(q/2),ue.push(-U/2),ue.push(q/2),ue.push(U/2),ue.push(-q/2),ue.push(U/2),ue}return null}async requestFrameOfReferenceTransform(q,U){return(q==="local-floor"||q==="bounded-floor")&&this.display.stageParameters&&this.display.stageParameters.sittingToStandingTransform?this.display.stageParameters.sittingToStandingTransform:null}getProjectionMatrix(q){if(q==="left")return this.frame.leftProjectionMatrix;if(q==="right")return this.frame.rightProjectionMatrix;if(q==="none")return this.frame.leftProjectionMatrix;throw new Error("eye must be of type 'left' or 'right'")}getViewport(q,U,ue,D){const ye=this.sessions.get(q),{width:z,height:$}=ue.context.canvas;if(!ye.immersive)return D.x=D.y=0,D.width=z,D.height=$,!0;if(U==="left"||U==="none")D.x=0;else if(U==="right")D.x=z/2;else return!1;return D.y=0,D.width=z/2,D.height=$,!0}getBasePoseMatrix(){let{position:q,orientation:U}=this.frame.pose;return!q&&!U?this.baseModelMatrix:(q||(q=this.tempVec3,q[0]=q[1]=q[2]=0),T.fromRotationTranslation(this.baseModelMatrix,U,q),this.baseModelMatrix)}getBaseViewMatrix(q){if(q==="left"||q==="none")return this.frame.leftViewMatrix;if(q==="right")return this.frame.rightViewMatrix;throw new Error("eye must be of type 'left' or 'right'")}getInputSources(){let q=[];for(let U in this.gamepadInputSources)q.push(this.gamepadInputSources[U].inputSource);return q}getInputPose(q,U,ue){if(!U)return null;for(let D in this.gamepadInputSources){let ye=this.gamepadInputSources[D];if(ye.inputSource===q)return ye.getXRPose(U,ue)}return null}onWindowResize(){}onVRDisplayPresentChange(q){this.display.isPresenting||this.sessions.forEach(U=>{if(U.immersive&&!U.ended){if(U.modifiedCanvasLayer){const ue=U.baseLayer.context.canvas;document.body.removeChild(ue),ue.setAttribute("style","")}this.immersiveSession===U&&(this.immersiveSession=null),this.dispatchEvent("@@webxr-polyfill/vr-present-end",U.id)}})}}o.default=Ie},{"gl-matrix/src/gl-matrix/mat4":"fwNkE","./XRDevice":"2Jvjj","./GamepadXRInputSource":"drfpC","../utils":"gL27r","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"2Jvjj":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("../lib/EventTarget"),ie=l.interopDefault(T),ne=C("../api/XRReferenceSpace"),x=l.interopDefault(ne),Q=arguments[3];class Z extends ie.default{constructor(Y){super();this.global=Q,this.onWindowResize=this.onWindowResize.bind(this),this.global.window.addEventListener("resize",this.onWindowResize),this.environmentBlendMode="opaque"}onBaseLayerSet(Y,te){throw new Error("Not implemented")}isSessionSupported(Y){throw new Error("Not implemented")}isFeatureSupported(Y){throw new Error("Not implemented")}async requestSession(Y,te){throw new Error("Not implemented")}requestAnimationFrame(Y){throw new Error("Not implemented")}onFrameStart(Y){throw new Error("Not implemented")}onFrameEnd(Y){throw new Error("Not implemented")}doesSessionSupportReferenceSpace(Y,te){throw new Error("Not implemented")}requestStageBounds(){throw new Error("Not implemented")}async requestFrameOfReferenceTransform(Y,te){}cancelAnimationFrame(Y){throw new Error("Not implemented")}endSession(Y){throw new Error("Not implemented")}getViewSpaces(Y){}getViewport(Y,te,k,pe,ee){throw new Error("Not implemented")}getProjectionMatrix(Y,te){throw new Error("Not implemented")}getBasePoseMatrix(){throw new Error("Not implemented")}getBaseViewMatrix(Y){throw new Error("Not implemented")}getInputSources(){throw new Error("Not implemented")}getInputPose(Y,te,k){throw new Error("Not implemented")}onWindowResize(){this.onWindowResize()}}o.default=Z},{"../lib/EventTarget":"da0uT","../api/XRReferenceSpace":"1wDMx","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],drfpC:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"PRIVATE",()=>k);var T=C("./GamepadMappings"),ie=l.interopDefault(T),ne=C("../api/XRInputSource"),x=l.interopDefault(ne),Q=C("../lib/OrientationArmModel"),Z=l.interopDefault(Q),re=C("gl-matrix/src/gl-matrix/mat4"),Y=C("gl-matrix/src/gl-matrix/vec3"),te=C("gl-matrix/src/gl-matrix/quat");const k=Symbol("@@webxr-polyfill/XRRemappedGamepad"),pe={pressed:!1,touched:!1,value:0};Object.freeze(pe);class ee{constructor(xe,q,U){if(U||(U={}),U.userAgentOverrides){for(let j in U.userAgentOverrides)if(navigator.userAgent.includes(j)){let oe=U.userAgentOverrides[j];for(let ce in oe)ce in U?Object.assign(U[ce],oe[ce]):U[ce]=oe[ce];break}}let ue=new Array(U.axes&&U.axes.length?U.axes.length:xe.axes.length),D=new Array(U.buttons&&U.buttons.length?U.buttons.length:xe.buttons.length),ye=null;if(U.gripTransform){let j=U.gripTransform.orientation||[0,0,0,1];ye=re.create(),re.fromRotationTranslation(ye,te.normalize(j,j),U.gripTransform.position||[0,0,0])}let z=null;if(U.targetRayTransform){let j=U.targetRayTransform.orientation||[0,0,0,1];z=re.create(),re.fromRotationTranslation(z,te.normalize(j,j),U.targetRayTransform.position||[0,0,0])}let $=U.profiles;U.displayProfiles&&q.displayName in U.displayProfiles&&($=U.displayProfiles[q.displayName]),this[k]={gamepad:xe,map:U,profiles:$||[xe.id],mapping:U.mapping||xe.mapping,axes:ue,buttons:D,gripTransform:ye,targetRayTransform:z},this._update()}_update(){let xe=this[k].gamepad,q=this[k].map,U=this[k].axes;for(let D=0;D<U.length;++D)q.axes&&D in q.axes?q.axes[D]===null?U[D]=0:U[D]=xe.axes[q.axes[D]]:U[D]=xe.axes[D];if(q.axes&&q.axes.invert)for(let D of q.axes.invert)D<U.length&&(U[D]*=-1);let ue=this[k].buttons;for(let D=0;D<ue.length;++D)q.buttons&&D in q.buttons?q.buttons[D]===null?ue[D]=pe:ue[D]=xe.buttons[q.buttons[D]]:ue[D]=xe.buttons[D]}get id(){return""}get _profiles(){return this[k].profiles}get index(){return-1}get connected(){return this[k].gamepad.connected}get timestamp(){return this[k].gamepad.timestamp}get mapping(){return this[k].mapping}get axes(){return this[k].axes}get buttons(){return this[k].buttons}get hapticActuators(){return this[k].gamepad.hapticActuators}}class ve{constructor(xe,q,U=0,ue=-1){this.polyfill=xe,this.display=q,this.nativeGamepad=null,this.gamepad=null,this.inputSource=new x.default(this),this.lastPosition=Y.create(),this.emulatedPosition=!1,this.basePoseMatrix=re.create(),this.outputMatrix=re.create(),this.primaryButtonIndex=U,this.primaryActionPressed=!1,this.primarySqueezeButtonIndex=ue,this.primarySqueezeActionPressed=!1,this.handedness="",this.targetRayMode="gaze",this.armModel=null}get profiles(){return this.gamepad?this.gamepad._profiles:[]}updateFromGamepad(xe){this.nativeGamepad!==xe&&(this.nativeGamepad=xe,xe?this.gamepad=new ee(xe,this.display,ie.default[xe.id]):this.gamepad=null),this.handedness=xe.hand===""?"none":xe.hand,this.gamepad&&this.gamepad._update(),xe.pose?(this.targetRayMode="tracked-pointer",this.emulatedPosition=!xe.pose.hasPosition):xe.hand===""&&(this.targetRayMode="gaze",this.emulatedPosition=!1)}updateBasePoseMatrix(){if(this.nativeGamepad&&this.nativeGamepad.pose){let xe=this.nativeGamepad.pose,q=xe.position,U=xe.orientation;if(!q&&!U)return;q?(this.lastPosition[0]=q[0],this.lastPosition[1]=q[1],this.lastPosition[2]=q[2]):xe.hasPosition?q=this.lastPosition:(this.armModel||(this.armModel=new Z.default),this.armModel.setHandedness(this.nativeGamepad.hand),this.armModel.update(U,this.polyfill.getBasePoseMatrix()),q=this.armModel.getPosition()),re.fromRotationTranslation(this.basePoseMatrix,U,q)}else re.copy(this.basePoseMatrix,this.polyfill.getBasePoseMatrix());return this.basePoseMatrix}getXRPose(xe,q){switch(this.updateBasePoseMatrix(),q){case"target-ray":xe._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[k].targetRayTransform&&re.multiply(this.outputMatrix,this.outputMatrix,this.gamepad[k].targetRayTransform);break;case"grip":if(!this.nativeGamepad||!this.nativeGamepad.pose)return null;xe._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[k].gripTransform&&re.multiply(this.outputMatrix,this.outputMatrix,this.gamepad[k].gripTransform);break;default:return null}return xe._adjustForOriginOffset(this.outputMatrix),new XRPose(new XRRigidTransform(this.outputMatrix),this.emulatedPosition)}}o.default=ve},{"./GamepadMappings":"b9LX5","../api/XRInputSource":"94RWx","../lib/OrientationArmModel":"byl1W","gl-matrix/src/gl-matrix/mat4":"fwNkE","gl-matrix/src/gl-matrix/vec3":"3ENtf","gl-matrix/src/gl-matrix/quat":"danCg","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],b9LX5:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);let T={mapping:"",profiles:["google-daydream","generic-trigger-touchpad"],buttons:{length:3,0:null,1:null,2:0}},ie={mapping:"xr-standard",profiles:["htc-vive-focus","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0}},ne={mapping:"xr-standard",profiles:["oculus-go","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[Math.PI*.11,0,0,1]}},x={mapping:"xr-standard",displayProfiles:{"Oculus Quest":["oculus-touch-v2","oculus-touch","generic-trigger-squeeze-thumbstick"]},profiles:["oculus-touch","generic-trigger-squeeze-thumbstick"],axes:{length:4,0:null,1:null,2:0,3:1},buttons:{length:7,0:1,1:2,2:null,3:0,4:3,5:4,6:null},gripTransform:{position:[0,-.02,.04,1],orientation:[Math.PI*.11,0,0,1]}},Q={mapping:"xr-standard",profiles:["htc-vive","generic-trigger-squeeze-touchpad"],displayProfiles:{"HTC Vive":["htc-vive","generic-trigger-squeeze-touchpad"],"HTC Vive DVT":["htc-vive","generic-trigger-squeeze-touchpad"],"Valve Index":["valve-index","generic-trigger-squeeze-touchpad-thumbstick"]},buttons:{length:3,0:1,1:2,2:0},gripTransform:{position:[0,0,.05,1]},targetRayTransform:{orientation:[Math.PI*-.08,0,0,1]},userAgentOverrides:{Firefox:{axes:{invert:[1,3]}}}},Z={mapping:"xr-standard",profiles:["samsung-gearvr","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[Math.PI*.11,0,0,1]}},re={mapping:"xr-standard",profiles:["samsung-odyssey","microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[Math.PI*.11,0,0,1]}},Y={mapping:"xr-standard",profiles:["microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[Math.PI*.11,0,0,1]}},te={"Daydream Controller":T,"Gear VR Controller":Z,"HTC Vive Focus Controller":ie,"Oculus Go Controller":ne,"Oculus Touch (Right)":x,"Oculus Touch (Left)":x,"OpenVR Gamepad":Q,"Spatial Controller (Spatial Interaction Source) 045E-065A":Y,"Spatial Controller (Spatial Interaction Source) 045E-065D":re,"Windows Mixed Reality (Right)":Y,"Windows Mixed Reality (Left)":Y};o.default=te},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],byl1W:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("./now"),ie=l.interopDefault(T),ne=C("gl-matrix/src/gl-matrix/mat4"),x=C("gl-matrix/src/gl-matrix/vec3"),Q=C("gl-matrix/src/gl-matrix/quat");const Z=x.fromValues(.155,-.465,-.15),re=x.fromValues(-.155,-.465,-.15),Y=x.fromValues(0,0,-.25),te=x.fromValues(0,0,.05),k=x.fromValues(-.08,.14,.08),pe=.4,ee=.4,ve=.61,Ie=.175,xe=.12,q=.87,U=180/Math.PI;function ue(ye,z,$){function j(Qe,_e,Le){return Qe<_e?_e:Qe>Le?Le:Qe}var oe=z[0]*z[0],ce=z[1]*z[1],be=z[2]*z[2],ge=z[3]*z[3];if($==="XYZ")ye[0]=Math.atan2(2*(z[0]*z[3]-z[1]*z[2]),ge-oe-ce+be),ye[1]=Math.asin(j(2*(z[0]*z[2]+z[1]*z[3]),-1,1)),ye[2]=Math.atan2(2*(z[2]*z[3]-z[0]*z[1]),ge+oe-ce-be);else if($==="YXZ")ye[0]=Math.asin(j(2*(z[0]*z[3]-z[1]*z[2]),-1,1)),ye[1]=Math.atan2(2*(z[0]*z[2]+z[1]*z[3]),ge-oe-ce+be),ye[2]=Math.atan2(2*(z[0]*z[1]+z[2]*z[3]),ge-oe+ce-be);else if($==="ZXY")ye[0]=Math.asin(j(2*(z[0]*z[3]+z[1]*z[2]),-1,1)),ye[1]=Math.atan2(2*(z[1]*z[3]-z[2]*z[0]),ge-oe-ce+be),ye[2]=Math.atan2(2*(z[2]*z[3]-z[0]*z[1]),ge-oe+ce-be);else if($==="ZYX")ye[0]=Math.atan2(2*(z[0]*z[3]+z[2]*z[1]),ge-oe-ce+be),ye[1]=Math.asin(j(2*(z[1]*z[3]-z[0]*z[2]),-1,1)),ye[2]=Math.atan2(2*(z[0]*z[1]+z[2]*z[3]),ge+oe-ce-be);else if($==="YZX")ye[0]=Math.atan2(2*(z[0]*z[3]-z[2]*z[1]),ge-oe+ce-be),ye[1]=Math.atan2(2*(z[1]*z[3]-z[0]*z[2]),ge+oe-ce-be),ye[2]=Math.asin(j(2*(z[0]*z[1]+z[2]*z[3]),-1,1));else if($==="XZY")ye[0]=Math.atan2(2*(z[0]*z[3]+z[1]*z[2]),ge-oe+ce-be),ye[1]=Math.atan2(2*(z[0]*z[2]+z[1]*z[3]),ge+oe-ce-be),ye[2]=Math.asin(j(2*(z[2]*z[3]-z[0]*z[1]),-1,1));else{console.log("No order given for quaternion to euler conversion.");return}}class D{constructor(){this.hand="right",this.headElbowOffset=Z,this.controllerQ=Q.create(),this.lastControllerQ=Q.create(),this.headQ=Q.create(),this.headPos=x.create(),this.elbowPos=x.create(),this.wristPos=x.create(),this.time=null,this.lastTime=null,this.rootQ=Q.create(),this.position=x.create()}setHandedness(z){this.hand!=z&&(this.hand=z,this.hand=="left"?this.headElbowOffset=re:this.headElbowOffset=Z)}update(z,$){this.time=(0,ie.default)(),z&&(Q.copy(this.lastControllerQ,this.controllerQ),Q.copy(this.controllerQ,z)),$&&(ne.getTranslation(this.headPos,$),ne.getRotation(this.headQ,$));let j=this.getHeadYawOrientation_(),oe=this.quatAngle_(this.lastControllerQ,this.controllerQ),ce=(this.time-this.lastTime)/1e3;oe/ce>ve?Q.slerp(this.rootQ,this.rootQ,j,Math.min(oe/Ie,1)):Q.copy(this.rootQ,j);let ge=x.fromValues(0,0,-1);x.transformQuat(ge,ge,this.controllerQ);let Qe=x.dot(ge,[0,1,0]),_e=this.clamp_((Qe-xe)/q,0,1),Le=Q.clone(this.rootQ);Q.invert(Le,Le),Q.multiply(Le,Le,this.controllerQ);let ze=this.elbowPos;x.copy(ze,this.headPos),x.add(ze,ze,this.headElbowOffset);let Xe=x.clone(k);x.scale(Xe,Xe,_e),x.add(ze,ze,Xe);let f=this.quatAngle_(Le,Q.create())*U,R=1-Math.pow(f/180,4);sssss;let K=pe,we=1-pe,Ee=R*(K+we*_e*ee),Te=Q.create();Q.slerp(Te,Te,Le,Ee);let L=Q.invert(Q.create(),Te),A=Q.clone(Le);Q.multiply(A,A,L);let b=this.wristPos;x.copy(b,te),x.transformQuat(b,b,Te),x.add(b,b,Y),x.transformQuat(b,b,A),x.add(b,b,ze);let S=x.clone(k);x.scale(S,S,_e),x.add(this.position,this.wristPos,S),x.transformQuat(this.position,this.position,this.rootQ),this.lastTime=this.time}getPosition(){return this.position}getHeadYawOrientation_(){let z=x.create();return ue(z,this.headQ,"YXZ"),Q.fromEuler(Q.create(),0,z[1]*U,0)}clamp_(z,$,j){return Math.min(Math.max(z,$),j)}quatAngle_(z,$){let j=[0,0,-1],oe=[0,0,-1];return x.transformQuat(j,j,z),x.transformQuat(oe,oe,$),x.angle(j,oe)}}o.default=D},{"./now":"gLkJ5","gl-matrix/src/gl-matrix/mat4":"fwNkE","gl-matrix/src/gl-matrix/vec3":"3ENtf","gl-matrix/src/gl-matrix/quat":"danCg","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],lBn7K:[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o);var T=C("gl-matrix/src/gl-matrix/mat4"),ie=C("./XRDevice"),ne=l.interopDefault(ie),x=arguments[3];const Q=!1;let Z=0;class re{constructor(k,pe){this.mode=k,this.enabledFeatures=pe,this.ended=null,this.baseLayer=null,this.id=++Z}}class Y extends ne.default{constructor(k){super(x);this.sessions=new Map,this.projectionMatrix=T.create(),this.identityMatrix=T.create()}onBaseLayerSet(k,pe){const ee=this.sessions.get(k);ee.baseLayer=pe}isSessionSupported(k){return k=="inline"}isFeatureSupported(k){switch(k){case"viewer":return!0;default:return!1}}async requestSession(k,pe){if(!this.isSessionSupported(k))return Promise.reject();const ee=new re(k,pe);return this.sessions.set(ee.id,ee),Promise.resolve(ee.id)}requestAnimationFrame(k){return window.requestAnimationFrame(k)}cancelAnimationFrame(k){window.cancelAnimationFrame(k)}onFrameStart(k,pe){if(Q)return;const ee=this.sessions.get(k);if(ee.baseLayer){const ve=ee.baseLayer.context.canvas;T.perspective(this.projectionMatrix,pe.inlineVerticalFieldOfView,ve.width/ve.height,pe.depthNear,pe.depthFar)}}onFrameEnd(k){}async endSession(k){const pe=this.sessions.get(k);pe.ended=!0}doesSessionSupportReferenceSpace(k,pe){const ee=this.sessions.get(k);return ee.ended?!1:ee.enabledFeatures.has(pe)}requestStageBounds(){return null}async requestFrameOfReferenceTransform(k,pe){return null}getProjectionMatrix(k){return this.projectionMatrix}getViewport(k,pe,ee,ve){const Ie=this.sessions.get(k),{width:xe,height:q}=ee.context.canvas;return ve.x=ve.y=0,ve.width=xe,ve.height=q,!0}getBasePoseMatrix(){return this.identityMatrix}getBaseViewMatrix(k){return this.identityMatrix}getInputSources(){return[]}getInputPose(k,pe,ee){return null}onWindowResize(){}}o.default=Y},{"gl-matrix/src/gl-matrix/mat4":"fwNkE","./XRDevice":"2Jvjj","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"8DXo9":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"CacheMessage",()=>q),l.export(o,"CheckMessage",()=>k),l.export(o,"Client",()=>Z),l.export(o,"DeleteMessage",()=>te),l.export(o,"InfoMessage",()=>ee),l.export(o,"InitMessage",()=>Y),l.export(o,"Message",()=>re),l.export(o,"Shader",()=>ye),l.export(o,"ShaderMessage",()=>Ie),l.export(o,"ShowCachedMessage",()=>U),l.export(o,"ShowMessage",()=>xe),l.export(o,"UniformsMessage",()=>ve),l.export(o,"WipeMessage",()=>pe);var T=arguments[3],ie=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof T!="undefined"?T:typeof self!="undefined"?self:{};function ne(z,$){return $={exports:{}},z($,$.exports),$.exports}var x=ne(function(z){(function($,j){var oe=Math.pow(2,-24),ce=Math.pow(2,32),be=Math.pow(2,53);function ge(Le){var ze=new ArrayBuffer(256),Xe=new DataView(ze),He,f=0;function R(M){for(var e=ze.byteLength,t=f+M;e<t;)e*=2;if(e!==ze.byteLength){var r=Xe;ze=new ArrayBuffer(e),Xe=new DataView(ze);for(var s=f+3>>2,a=0;a<s;++a)Xe.setUint32(a*4,r.getUint32(a*4))}return He=M,Xe}function K(){f+=He}function we(M){K(R(8).setFloat64(f,M))}function Ee(M){K(R(1).setUint8(f,M))}function Te(M){for(var e=R(M.length),t=0;t<M.length;++t)e.setUint8(f+t,M[t]);K()}function L(M){K(R(2).setUint16(f,M))}function A(M){K(R(4).setUint32(f,M))}function b(M){var e=M%ce,t=(M-e)/ce,r=R(8);r.setUint32(f,t),r.setUint32(f+4,e),K()}function S(M,e){e<24?Ee(M<<5|e):e<256?(Ee(M<<5|24),Ee(e)):e<65536?(Ee(M<<5|25),L(e)):e<4294967296?(Ee(M<<5|26),A(e)):(Ee(M<<5|27),b(e))}function E(M){var e;if(M===!1)return Ee(244);if(M===!0)return Ee(245);if(M===null)return Ee(246);if(M===j)return Ee(247);switch(typeof M){case"number":if(Math.floor(M)===M){if(0<=M&&M<=be)return S(0,M);if(-be<=M&&M<0)return S(1,-(M+1))}return Ee(251),we(M);case"string":var t=[];for(e=0;e<M.length;++e){var r=M.charCodeAt(e);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|r&63)):r<55296?(t.push(224|r>>12),t.push(128|r>>6&63),t.push(128|r&63)):(r=(r&1023)<<10,r|=M.charCodeAt(++e)&1023,r+=65536,t.push(240|r>>18),t.push(128|r>>12&63),t.push(128|r>>6&63),t.push(128|r&63))}return S(3,t.length),Te(t);default:var s;if(Array.isArray(M))for(s=M.length,S(4,s),e=0;e<s;++e)E(M[e]);else if(M instanceof Uint8Array)S(2,M.length),Te(M);else{var a=Object.keys(M);for(s=a.length,S(5,s),e=0;e<s;++e){var h=a[e];E(h),E(M[h])}}}}if(E(Le),"slice"in ze)return ze.slice(0,f);for(var w=new ArrayBuffer(f),v=new DataView(w),G=0;G<f;++G)v.setUint8(G,Xe.getUint8(G));return w}function Qe(Le,ze,Xe){var He=new DataView(Le),f=0;typeof ze!="function"&&(ze=function(t){return t}),typeof Xe!="function"&&(Xe=function(){return j});function R(t,r){return f+=r,t}function K(t){return R(new Uint8Array(Le,f,t),t)}function we(){var t=new ArrayBuffer(4),r=new DataView(t),s=A(),a=s&32768,h=s&31744,p=s&1023;if(h===31744)h=261120;else if(h!==0)h+=114688;else if(p!==0)return p*oe;return r.setUint32(0,a<<16|h<<13|p<<13),r.getFloat32(0)}function Ee(){return R(He.getFloat32(f),4)}function Te(){return R(He.getFloat64(f),8)}function L(){return R(He.getUint8(f),1)}function A(){return R(He.getUint16(f),2)}function b(){return R(He.getUint32(f),4)}function S(){return b()*ce+b()}function E(){return He.getUint8(f)!==255?!1:(f+=1,!0)}function w(t){if(t<24)return t;if(t===24)return L();if(t===25)return A();if(t===26)return b();if(t===27)return S();if(t===31)return-1;throw"Invalid length encoding"}function v(t){var r=L();if(r===255)return-1;var s=w(r&31);if(s<0||r>>5!==t)throw"Invalid indefinite length element";return s}function G(t,r){for(var s=0;s<r;++s){var a=L();a&128&&(a<224?(a=(a&31)<<6|L()&63,r-=1):a<240?(a=(a&15)<<12|(L()&63)<<6|L()&63,r-=2):(a=(a&15)<<18|(L()&63)<<12|(L()&63)<<6|L()&63,r-=3)),a<65536?t.push(a):(a-=65536,t.push(55296|a>>10),t.push(56320|a&1023))}}function M(){var t=L(),r=t>>5,s=t&31,a,h;if(r===7)switch(s){case 25:return we();case 26:return Ee();case 27:return Te()}if(h=w(s),h<0&&(r<2||6<r))throw"Invalid length";switch(r){case 0:return h;case 1:return-1-h;case 2:if(h<0){for(var p=[],u=0;(h=v(r))>=0;)u+=h,p.push(K(h));var g=new Uint8Array(u),m=0;for(a=0;a<p.length;++a)g.set(p[a],m),m+=p[a].length;return g}return K(h);case 3:var _=[];if(h<0)for(;(h=v(r))>=0;)G(_,h);else G(_,h);return String.fromCharCode.apply(null,_);case 4:var F;if(h<0)for(F=[];!E();)F.push(M());else for(F=new Array(h),a=0;a<h;++a)F[a]=M();return F;case 5:var I={};for(a=0;a<h||h<0&&!E();++a){var P=M();I[P]=M()}return I;case 6:return ze(M(),h);case 7:switch(h){case 20:return!1;case 21:return!0;case 22:return null;case 23:return j;default:return Xe(h)}}}var e=M();if(f!==Le.byteLength)throw"Remaining bytes";return e}var _e={encode:ge,decode:Qe};typeof j=="function"&&j.amd?j("cbor/cbor",_e):z.exports?z.exports=_e:$.CBOR||($.CBOR=_e)})(ie)});/**
 * This files defines the HoloPlayClient class and Message class.
 *
 * Copyright (c) [2019] [Looking Glass Factory]
 *
 * @link    https://lookingglassfactory.com/
 * @file    This files defines the HoloPlayClient class and Message class.
 * @author  Looking Glass Factory.
 * @version 0.0.8
 * @license SEE LICENSE IN LICENSE.md
 */const Q=typeof window=="undefined"?C("12543840d8cbc90f"):window.WebSocket;class Z{constructor($,j,oe,ce=!1,be,ge,Qe){this.reqs=[],this.reps=[],this.requestId=this.getRequestId(),this.debug=ce,this.isGreedy=ge,this.errCallback=j,this.closeCallback=oe,this.alwaysdebug=!1,this.isConnected=!1;let _e=null;be||ge||Qe?_e=new Y(be,ge,Qe,this.debug):(ce&&(this.alwaysdebug=!0),typeof $=="function"&&(_e=new ee)),this.openWebsocket(_e,$)}sendMessage($,j=60){this.alwaysdebug&&($.cmd.debug=!0);let oe=$.toCbor();return this.sendRequestObj(oe,j)}disconnect(){this.ws.close()}openWebsocket($=null,j=null){this.ws=new Q("ws://localhost:11222/driver",["rep.sp.nanomsg.org"]),this.ws.parent=this,this.ws.binaryType="arraybuffer",this.ws.onmessage=this.messageHandler,this.ws.onopen=()=>{this.isConnected=!0,this.debug&&console.log("socket open"),$!=null&&this.sendMessage($).then(j)},this.ws.onerror=this.onSocketError,this.ws.onclose=this.onClose}sendRequestObj($,j){return new Promise((oe,ce)=>{let be={id:this.requestId++,parent:this,payload:$,success:oe,error:ce,send:function(){this.debug&&console.log("attemtping to send request with ID "+this.id),this.timeout=setTimeout(be.send.bind(this),j*1e3);let ge=new Uint8Array($.byteLength+4);new DataView(ge.buffer).setUint32(0,this.id),ge.set(new Uint8Array(this.payload),4),this.parent.ws.send(ge.buffer)}};this.reqs.push(be),be.send()})}messageHandler($){console.log("message");let j=$.data;if(j.byteLength<4)return;let ce=new DataView(j).getUint32(0);if(ce<2147483648){this.parent.err("bad nng header");return}let be=this.parent.findReqIndex(ce);if(be==-1){this.parent.err("got reply that doesn't match known request!");return}let ge={id:ce,payload:x.decode(j.slice(4))};ge.payload.error==0?this.parent.reqs[be].success(ge.payload):this.parent.reqs[be].error(ge.payload),clearTimeout(this.parent.reqs[be].timeout),this.parent.reqs.splice(be,1),this.parent.reps.push(ge),this.debug&&console.log(ge.payload)}getRequestId(){return Math.floor(this.prng()*2147483647)+2147483648}onClose($){this.parent.isConnected=!1,this.parent.debug&&console.log("socket closed"),typeof this.parent.closeCallback=="function"&&this.parent.closeCallback($)}onSocketError($){this.parent.debug&&console.log($),typeof this.parent.errCallback=="function"&&this.parent.errCallback($)}err($){this.debug&&console.log("[DRIVER ERROR]"+$)}findReqIndex($){let j=0;for(;j<this.reqs.length;j++)if(this.reqs[j].id==$)return j;return-1}prng(){return this.rng==null&&(this.rng=ue()),this.rng()}}class re{constructor($,j){this.cmd=$,this.bin=j}toCbor(){return x.encode(this)}}class Y extends re{constructor($="",j=!1,oe="",ce=!1){let be={init:{}};$!=""&&(be.init.appid=$),oe!=""&&(be.init.onclose=oe),j&&(be.init.greedy=!0),ce&&(be.init.debug=!0);super(be,null)}}class te extends re{constructor($=""){let j={delete:{name:$}};super(j,null)}}class k extends re{constructor($=""){let j={check:{name:$}};super(j,null)}}class pe extends re{constructor($=null){let j={wipe:{}};$!=null&&(j.wipe.targetDisplay=$);super(j,null)}}class ee extends re{constructor(){let $={info:{}};super($,null)}}class ve extends re{constructor(){let $={uniforms:{}};super($,bindata)}}class Ie extends re{constructor(){let $={shader:{}};super($,bindata)}}class xe extends re{constructor($={vx:5,vy:9,aspect:1.6},j="",oe=null){let ce={show:{source:"bindata",quilt:{type:"image",settings:$}}};oe!=null&&(ce.show.targetDisplay=oe);super(ce,j)}}class q extends re{constructor($,j={vx:5,vy:9,aspect:1.6},oe="",ce=!1){let be={cache:{show:ce,quilt:{name:$,type:"image",settings:j}}};super(be,oe)}}class U extends re{constructor($,j=null,oe=null){let ce={show:{source:"cache",quilt:{name:$}}};j!=null&&(ce.show.targetDisplay=j),oe!=null&&(ce.show.quilt.settings=oe);super(ce,null)}}function ue(){function z(ce){for(var be=0,ge=1779033703^ce.length;be<ce.length;be++)ge=Math.imul(ge^ce.charCodeAt(be),3432918353),ge=ge<<13|ge>>>19;return function(){return ge=Math.imul(ge^ge>>>16,2246822507),ge=Math.imul(ge^ge>>>13,3266489909),(ge^=ge>>>16)>>>0}}function $(ce,be,ge,Qe){return()=>{var _e=be<<9,Le=ce*5;return Le=(Le<<7|Le>>>25)*9,ge^=ce,Qe^=be,be^=ge,ce^=Qe,ge^=_e,Qe=Qe<<11|Qe>>>21,(Le>>>0)/4294967296}}var j=Date.now(),oe=z(j.toString());return $(oe(),oe(),oe(),oe())}function D(z,...$){let j=z[0];for(let oe=1;oe<z.length;++oe){const ce=$[oe-1];j+=typeof ce=="number"?ce.toPrecision(10):ce,j+=z[oe]}return j}function ye(z){return D`
  precision mediump float;
  uniform int u_viewType;
  uniform sampler2D u_texture;
  varying vec2 v_texcoord;
  const float pitch    = ${z.pitch};
  const float tilt     = ${z.tilt};
  const float center   = ${z.calibration.center.value};
  const float invView  = ${z.calibration.invView.value};
  const float flipX    = ${z.calibration.flipImageX.value};
  const float flipY    = ${z.calibration.flipImageY.value};
  const float subp     = ${z.subp};
  const float numViews = ${z.numViews};
  const float tilesX   = ${z.quiltWidth};
  const float tilesY   = ${z.quiltHeight};
  const vec2 quiltViewPortion = vec2(
    ${z.quiltWidth*z.tileWidth/z.framebufferWidth},
    ${z.quiltHeight*z.tileHeight/z.framebufferHeight});
  vec2 texArr(vec3 uvz) {
    float z = floor(uvz.z * numViews);
    float x = (mod(z, tilesX) + uvz.x) / tilesX;
    float y = (floor(z / tilesX) + uvz.y) / tilesY;
    return vec2(x, y) * quiltViewPortion;
  }
  float remap(float value, float from1, float to1, float from2, float to2) {
    return (value - from1) / (to1 - from1) * (to2 - from2) + from2;
  }
  void main() {
    if (u_viewType == 2) { // "quilt" view
      gl_FragColor = texture2D(u_texture, v_texcoord);
      return;
    }
    if (u_viewType == 1) { // middle view
      gl_FragColor = texture2D(u_texture, texArr(vec3(v_texcoord.x, v_texcoord.y, 0.5)));
      return;
    }
    vec4 rgb[3];
    vec3 nuv = vec3(v_texcoord.xy, 0.0);
    // Flip UVs if necessary
    nuv.x = (1.0 - flipX) * nuv.x + flipX * (1.0 - nuv.x);
    nuv.y = (1.0 - flipY) * nuv.y + flipY * (1.0 - nuv.y);
    for (int i = 0; i < 3; i++) {
      nuv.z = (v_texcoord.x + float(i) * subp + v_texcoord.y * tilt) * pitch - center;
      nuv.z = mod(nuv.z + ceil(abs(nuv.z)), 1.0);
      nuv.z = (1.0 - invView) * nuv.z + invView * (1.0 - nuv.z);
      rgb[i] = texture2D(u_texture, texArr(vec3(v_texcoord.x, v_texcoord.y, nuv.z)));
    }
    gl_FragColor = vec4(rgb[0].r, rgb[1].g, rgb[2].b, 1);
  }
`}},{"12543840d8cbc90f":"49haX","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"49haX":[function(C,Pe,o){"use strict";Pe.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],"36S8q":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"glMatrix",()=>T),l.export(o,"mat2",()=>ie),l.export(o,"mat2d",()=>ne),l.export(o,"mat3",()=>x),l.export(o,"mat4",()=>Q),l.export(o,"quat",()=>Z),l.export(o,"quat2",()=>re),l.export(o,"vec2",()=>Y),l.export(o,"vec3",()=>te),l.export(o,"vec4",()=>k);var T=C("./gl-matrix/common.js"),ie=C("./gl-matrix/mat2.js"),ne=C("./gl-matrix/mat2d.js"),x=C("./gl-matrix/mat3.js"),Q=C("./gl-matrix/mat4.js"),Z=C("./gl-matrix/quat.js"),re=C("./gl-matrix/quat2.js"),Y=C("./gl-matrix/vec2.js"),te=C("./gl-matrix/vec3.js"),k=C("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":!1,"./gl-matrix/mat2.js":!1,"./gl-matrix/mat2d.js":!1,"./gl-matrix/mat3.js":!1,"./gl-matrix/mat4.js":"74lnL","./gl-matrix/quat.js":!1,"./gl-matrix/quat2.js":!1,"./gl-matrix/vec2.js":!1,"./gl-matrix/vec3.js":!1,"./gl-matrix/vec4.js":!1,"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"96TPZ":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"EPSILON",()=>T),l.export(o,"ARRAY_TYPE",()=>ie),l.export(o,"RANDOM",()=>ne),l.export(o,"setMatrixArrayType",()=>x),l.export(o,"toRadian",()=>Z),l.export(o,"equals",()=>re);var T=1e-6,ie=typeof Float32Array!="undefined"?Float32Array:Array,ne=Math.random;function x(Y){ie=Y}var Q=Math.PI/180;function Z(Y){return Y*Q}function re(Y,te){return Math.abs(Y-te)<=T*Math.max(1,Math.abs(Y),Math.abs(te))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"74lnL":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"create",()=>ie),l.export(o,"clone",()=>ne),l.export(o,"copy",()=>x),l.export(o,"fromValues",()=>Q),l.export(o,"set",()=>Z),l.export(o,"identity",()=>re),l.export(o,"transpose",()=>Y),l.export(o,"invert",()=>te),l.export(o,"adjoint",()=>k),l.export(o,"determinant",()=>pe),l.export(o,"multiply",()=>ee),l.export(o,"translate",()=>ve),l.export(o,"scale",()=>Ie),l.export(o,"rotate",()=>xe),l.export(o,"rotateX",()=>q),l.export(o,"rotateY",()=>U),l.export(o,"rotateZ",()=>ue),l.export(o,"fromTranslation",()=>D),l.export(o,"fromScaling",()=>ye),l.export(o,"fromRotation",()=>z),l.export(o,"fromXRotation",()=>$),l.export(o,"fromYRotation",()=>j),l.export(o,"fromZRotation",()=>oe),l.export(o,"fromRotationTranslation",()=>ce),l.export(o,"fromQuat2",()=>be),l.export(o,"getTranslation",()=>ge),l.export(o,"getScaling",()=>Qe),l.export(o,"getRotation",()=>_e),l.export(o,"fromRotationTranslationScale",()=>Le),l.export(o,"fromRotationTranslationScaleOrigin",()=>ze),l.export(o,"fromQuat",()=>Xe),l.export(o,"frustum",()=>He),l.export(o,"perspective",()=>f),l.export(o,"perspectiveFromFieldOfView",()=>R),l.export(o,"ortho",()=>K),l.export(o,"lookAt",()=>we),l.export(o,"targetTo",()=>Ee),l.export(o,"str",()=>Te),l.export(o,"frob",()=>L),l.export(o,"add",()=>A),l.export(o,"subtract",()=>b),l.export(o,"multiplyScalar",()=>S),l.export(o,"multiplyScalarAndAdd",()=>E),l.export(o,"exactEquals",()=>w),l.export(o,"equals",()=>v),l.export(o,"mul",()=>G),l.export(o,"sub",()=>M);var T=C("./common.js");function ie(){var e=new T.ARRAY_TYPE(16);return T.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ne(e){var t=new T.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Q(e,t,r,s,a,h,p,u,g,m,_,F,I,P,V,O){var B=new T.ARRAY_TYPE(16);return B[0]=e,B[1]=t,B[2]=r,B[3]=s,B[4]=a,B[5]=h,B[6]=p,B[7]=u,B[8]=g,B[9]=m,B[10]=_,B[11]=F,B[12]=I,B[13]=P,B[14]=V,B[15]=O,B}function Z(e,t,r,s,a,h,p,u,g,m,_,F,I,P,V,O,B){return e[0]=t,e[1]=r,e[2]=s,e[3]=a,e[4]=h,e[5]=p,e[6]=u,e[7]=g,e[8]=m,e[9]=_,e[10]=F,e[11]=I,e[12]=P,e[13]=V,e[14]=O,e[15]=B,e}function re(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y(e,t){if(e===t){var r=t[1],s=t[2],a=t[3],h=t[6],p=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=h,e[11]=t[14],e[12]=a,e[13]=p,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function te(e,t){var r=t[0],s=t[1],a=t[2],h=t[3],p=t[4],u=t[5],g=t[6],m=t[7],_=t[8],F=t[9],I=t[10],P=t[11],V=t[12],O=t[13],B=t[14],J=t[15],Me=r*u-s*p,ae=r*g-a*p,le=r*m-h*p,Ae=s*g-a*u,de=s*m-h*u,Ce=a*m-h*g,Be=_*O-F*V,Fe=_*B-I*V,Ne=_*J-P*V,ke=F*B-I*O,Ve=F*J-P*O,je=I*J-P*B,Se=Me*je-ae*Ve+le*ke+Ae*Ne-de*Fe+Ce*Be;return Se?(Se=1/Se,e[0]=(u*je-g*Ve+m*ke)*Se,e[1]=(a*Ve-s*je-h*ke)*Se,e[2]=(O*Ce-B*de+J*Ae)*Se,e[3]=(I*de-F*Ce-P*Ae)*Se,e[4]=(g*Ne-p*je-m*Fe)*Se,e[5]=(r*je-a*Ne+h*Fe)*Se,e[6]=(B*le-V*Ce-J*ae)*Se,e[7]=(_*Ce-I*le+P*ae)*Se,e[8]=(p*Ve-u*Ne+m*Be)*Se,e[9]=(s*Ne-r*Ve-h*Be)*Se,e[10]=(V*de-O*le+J*Me)*Se,e[11]=(F*le-_*de-P*Me)*Se,e[12]=(u*Fe-p*ke-g*Be)*Se,e[13]=(r*ke-s*Fe+a*Be)*Se,e[14]=(O*ae-V*Ae-B*Me)*Se,e[15]=(_*Ae-F*ae+I*Me)*Se,e):null}function k(e,t){var r=t[0],s=t[1],a=t[2],h=t[3],p=t[4],u=t[5],g=t[6],m=t[7],_=t[8],F=t[9],I=t[10],P=t[11],V=t[12],O=t[13],B=t[14],J=t[15];return e[0]=u*(I*J-P*B)-F*(g*J-m*B)+O*(g*P-m*I),e[1]=-(s*(I*J-P*B)-F*(a*J-h*B)+O*(a*P-h*I)),e[2]=s*(g*J-m*B)-u*(a*J-h*B)+O*(a*m-h*g),e[3]=-(s*(g*P-m*I)-u*(a*P-h*I)+F*(a*m-h*g)),e[4]=-(p*(I*J-P*B)-_*(g*J-m*B)+V*(g*P-m*I)),e[5]=r*(I*J-P*B)-_*(a*J-h*B)+V*(a*P-h*I),e[6]=-(r*(g*J-m*B)-p*(a*J-h*B)+V*(a*m-h*g)),e[7]=r*(g*P-m*I)-p*(a*P-h*I)+_*(a*m-h*g),e[8]=p*(F*J-P*O)-_*(u*J-m*O)+V*(u*P-m*F),e[9]=-(r*(F*J-P*O)-_*(s*J-h*O)+V*(s*P-h*F)),e[10]=r*(u*J-m*O)-p*(s*J-h*O)+V*(s*m-h*u),e[11]=-(r*(u*P-m*F)-p*(s*P-h*F)+_*(s*m-h*u)),e[12]=-(p*(F*B-I*O)-_*(u*B-g*O)+V*(u*I-g*F)),e[13]=r*(F*B-I*O)-_*(s*B-a*O)+V*(s*I-a*F),e[14]=-(r*(u*B-g*O)-p*(s*B-a*O)+V*(s*g-a*u)),e[15]=r*(u*I-g*F)-p*(s*I-a*F)+_*(s*g-a*u),e}function pe(e){var t=e[0],r=e[1],s=e[2],a=e[3],h=e[4],p=e[5],u=e[6],g=e[7],m=e[8],_=e[9],F=e[10],I=e[11],P=e[12],V=e[13],O=e[14],B=e[15],J=t*p-r*h,Me=t*u-s*h,ae=t*g-a*h,le=r*u-s*p,Ae=r*g-a*p,de=s*g-a*u,Ce=m*V-_*P,Be=m*O-F*P,Fe=m*B-I*P,Ne=_*O-F*V,ke=_*B-I*V,Ve=F*B-I*O;return J*Ve-Me*ke+ae*Ne+le*Fe-Ae*Be+de*Ce}function ee(e,t,r){var s=t[0],a=t[1],h=t[2],p=t[3],u=t[4],g=t[5],m=t[6],_=t[7],F=t[8],I=t[9],P=t[10],V=t[11],O=t[12],B=t[13],J=t[14],Me=t[15],ae=r[0],le=r[1],Ae=r[2],de=r[3];return e[0]=ae*s+le*u+Ae*F+de*O,e[1]=ae*a+le*g+Ae*I+de*B,e[2]=ae*h+le*m+Ae*P+de*J,e[3]=ae*p+le*_+Ae*V+de*Me,ae=r[4],le=r[5],Ae=r[6],de=r[7],e[4]=ae*s+le*u+Ae*F+de*O,e[5]=ae*a+le*g+Ae*I+de*B,e[6]=ae*h+le*m+Ae*P+de*J,e[7]=ae*p+le*_+Ae*V+de*Me,ae=r[8],le=r[9],Ae=r[10],de=r[11],e[8]=ae*s+le*u+Ae*F+de*O,e[9]=ae*a+le*g+Ae*I+de*B,e[10]=ae*h+le*m+Ae*P+de*J,e[11]=ae*p+le*_+Ae*V+de*Me,ae=r[12],le=r[13],Ae=r[14],de=r[15],e[12]=ae*s+le*u+Ae*F+de*O,e[13]=ae*a+le*g+Ae*I+de*B,e[14]=ae*h+le*m+Ae*P+de*J,e[15]=ae*p+le*_+Ae*V+de*Me,e}function ve(e,t,r){var s=r[0],a=r[1],h=r[2],p=void 0,u=void 0,g=void 0,m=void 0,_=void 0,F=void 0,I=void 0,P=void 0,V=void 0,O=void 0,B=void 0,J=void 0;return t===e?(e[12]=t[0]*s+t[4]*a+t[8]*h+t[12],e[13]=t[1]*s+t[5]*a+t[9]*h+t[13],e[14]=t[2]*s+t[6]*a+t[10]*h+t[14],e[15]=t[3]*s+t[7]*a+t[11]*h+t[15]):(p=t[0],u=t[1],g=t[2],m=t[3],_=t[4],F=t[5],I=t[6],P=t[7],V=t[8],O=t[9],B=t[10],J=t[11],e[0]=p,e[1]=u,e[2]=g,e[3]=m,e[4]=_,e[5]=F,e[6]=I,e[7]=P,e[8]=V,e[9]=O,e[10]=B,e[11]=J,e[12]=p*s+_*a+V*h+t[12],e[13]=u*s+F*a+O*h+t[13],e[14]=g*s+I*a+B*h+t[14],e[15]=m*s+P*a+J*h+t[15]),e}function Ie(e,t,r){var s=r[0],a=r[1],h=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*h,e[9]=t[9]*h,e[10]=t[10]*h,e[11]=t[11]*h,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function xe(e,t,r,s){var a=s[0],h=s[1],p=s[2],u=Math.sqrt(a*a+h*h+p*p),g=void 0,m=void 0,_=void 0,F=void 0,I=void 0,P=void 0,V=void 0,O=void 0,B=void 0,J=void 0,Me=void 0,ae=void 0,le=void 0,Ae=void 0,de=void 0,Ce=void 0,Be=void 0,Fe=void 0,Ne=void 0,ke=void 0,Ve=void 0,je=void 0,Se=void 0,Ze=void 0;return u<T.EPSILON?null:(u=1/u,a*=u,h*=u,p*=u,g=Math.sin(r),m=Math.cos(r),_=1-m,F=t[0],I=t[1],P=t[2],V=t[3],O=t[4],B=t[5],J=t[6],Me=t[7],ae=t[8],le=t[9],Ae=t[10],de=t[11],Ce=a*a*_+m,Be=h*a*_+p*g,Fe=p*a*_-h*g,Ne=a*h*_-p*g,ke=h*h*_+m,Ve=p*h*_+a*g,je=a*p*_+h*g,Se=h*p*_-a*g,Ze=p*p*_+m,e[0]=F*Ce+O*Be+ae*Fe,e[1]=I*Ce+B*Be+le*Fe,e[2]=P*Ce+J*Be+Ae*Fe,e[3]=V*Ce+Me*Be+de*Fe,e[4]=F*Ne+O*ke+ae*Ve,e[5]=I*Ne+B*ke+le*Ve,e[6]=P*Ne+J*ke+Ae*Ve,e[7]=V*Ne+Me*ke+de*Ve,e[8]=F*je+O*Se+ae*Ze,e[9]=I*je+B*Se+le*Ze,e[10]=P*je+J*Se+Ae*Ze,e[11]=V*je+Me*Se+de*Ze,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function q(e,t,r){var s=Math.sin(r),a=Math.cos(r),h=t[4],p=t[5],u=t[6],g=t[7],m=t[8],_=t[9],F=t[10],I=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=h*a+m*s,e[5]=p*a+_*s,e[6]=u*a+F*s,e[7]=g*a+I*s,e[8]=m*a-h*s,e[9]=_*a-p*s,e[10]=F*a-u*s,e[11]=I*a-g*s,e}function U(e,t,r){var s=Math.sin(r),a=Math.cos(r),h=t[0],p=t[1],u=t[2],g=t[3],m=t[8],_=t[9],F=t[10],I=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*a-m*s,e[1]=p*a-_*s,e[2]=u*a-F*s,e[3]=g*a-I*s,e[8]=h*s+m*a,e[9]=p*s+_*a,e[10]=u*s+F*a,e[11]=g*s+I*a,e}function ue(e,t,r){var s=Math.sin(r),a=Math.cos(r),h=t[0],p=t[1],u=t[2],g=t[3],m=t[4],_=t[5],F=t[6],I=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=h*a+m*s,e[1]=p*a+_*s,e[2]=u*a+F*s,e[3]=g*a+I*s,e[4]=m*a-h*s,e[5]=_*a-p*s,e[6]=F*a-u*s,e[7]=I*a-g*s,e}function D(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ye(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,t,r){var s=r[0],a=r[1],h=r[2],p=Math.sqrt(s*s+a*a+h*h),u=void 0,g=void 0,m=void 0;return p<T.EPSILON?null:(p=1/p,s*=p,a*=p,h*=p,u=Math.sin(t),g=Math.cos(t),m=1-g,e[0]=s*s*m+g,e[1]=a*s*m+h*u,e[2]=h*s*m-a*u,e[3]=0,e[4]=s*a*m-h*u,e[5]=a*a*m+g,e[6]=h*a*m+s*u,e[7]=0,e[8]=s*h*m+a*u,e[9]=a*h*m-s*u,e[10]=h*h*m+g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function $(e,t){var r=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){var r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oe(e,t){var r=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ce(e,t,r){var s=t[0],a=t[1],h=t[2],p=t[3],u=s+s,g=a+a,m=h+h,_=s*u,F=s*g,I=s*m,P=a*g,V=a*m,O=h*m,B=p*u,J=p*g,Me=p*m;return e[0]=1-(P+O),e[1]=F+Me,e[2]=I-J,e[3]=0,e[4]=F-Me,e[5]=1-(_+O),e[6]=V+B,e[7]=0,e[8]=I+J,e[9]=V-B,e[10]=1-(_+P),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function be(e,t){var r=new T.ARRAY_TYPE(3),s=-t[0],a=-t[1],h=-t[2],p=t[3],u=t[4],g=t[5],m=t[6],_=t[7],F=s*s+a*a+h*h+p*p;return F>0?(r[0]=(u*p+_*s+g*h-m*a)*2/F,r[1]=(g*p+_*a+m*s-u*h)*2/F,r[2]=(m*p+_*h+u*a-g*s)*2/F):(r[0]=(u*p+_*s+g*h-m*a)*2,r[1]=(g*p+_*a+m*s-u*h)*2,r[2]=(m*p+_*h+u*a-g*s)*2),ce(e,t,r),e}function ge(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Qe(e,t){var r=t[0],s=t[1],a=t[2],h=t[4],p=t[5],u=t[6],g=t[8],m=t[9],_=t[10];return e[0]=Math.sqrt(r*r+s*s+a*a),e[1]=Math.sqrt(h*h+p*p+u*u),e[2]=Math.sqrt(g*g+m*m+_*_),e}function _e(e,t){var r=t[0]+t[5]+t[10],s=0;return r>0?(s=Math.sqrt(r+1)*2,e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=Math.sqrt(1+t[0]-t[5]-t[10])*2,e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=Math.sqrt(1+t[5]-t[0]-t[10])*2,e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=Math.sqrt(1+t[10]-t[0]-t[5])*2,e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function Le(e,t,r,s){var a=t[0],h=t[1],p=t[2],u=t[3],g=a+a,m=h+h,_=p+p,F=a*g,I=a*m,P=a*_,V=h*m,O=h*_,B=p*_,J=u*g,Me=u*m,ae=u*_,le=s[0],Ae=s[1],de=s[2];return e[0]=(1-(V+B))*le,e[1]=(I+ae)*le,e[2]=(P-Me)*le,e[3]=0,e[4]=(I-ae)*Ae,e[5]=(1-(F+B))*Ae,e[6]=(O+J)*Ae,e[7]=0,e[8]=(P+Me)*de,e[9]=(O-J)*de,e[10]=(1-(F+V))*de,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ze(e,t,r,s,a){var h=t[0],p=t[1],u=t[2],g=t[3],m=h+h,_=p+p,F=u+u,I=h*m,P=h*_,V=h*F,O=p*_,B=p*F,J=u*F,Me=g*m,ae=g*_,le=g*F,Ae=s[0],de=s[1],Ce=s[2],Be=a[0],Fe=a[1],Ne=a[2],ke=(1-(O+J))*Ae,Ve=(P+le)*Ae,je=(V-ae)*Ae,Se=(P-le)*de,Ze=(1-(I+J))*de,tt=(B+Me)*de,ct=(V+ae)*Ce,fe=(B-Me)*Ce,$e=(1-(I+O))*Ce;return e[0]=ke,e[1]=Ve,e[2]=je,e[3]=0,e[4]=Se,e[5]=Ze,e[6]=tt,e[7]=0,e[8]=ct,e[9]=fe,e[10]=$e,e[11]=0,e[12]=r[0]+Be-(ke*Be+Se*Fe+ct*Ne),e[13]=r[1]+Fe-(Ve*Be+Ze*Fe+fe*Ne),e[14]=r[2]+Ne-(je*Be+tt*Fe+$e*Ne),e[15]=1,e}function Xe(e,t){var r=t[0],s=t[1],a=t[2],h=t[3],p=r+r,u=s+s,g=a+a,m=r*p,_=s*p,F=s*u,I=a*p,P=a*u,V=a*g,O=h*p,B=h*u,J=h*g;return e[0]=1-F-V,e[1]=_+J,e[2]=I-B,e[3]=0,e[4]=_-J,e[5]=1-m-V,e[6]=P+O,e[7]=0,e[8]=I+B,e[9]=P-O,e[10]=1-m-F,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function He(e,t,r,s,a,h,p){var u=1/(r-t),g=1/(a-s),m=1/(h-p);return e[0]=h*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h*2*g,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(a+s)*g,e[10]=(p+h)*m,e[11]=-1,e[12]=0,e[13]=0,e[14]=p*h*2*m,e[15]=0,e}function f(e,t,r,s,a){var h=1/Math.tan(t/2),p=void 0;return e[0]=h/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(p=1/(s-a),e[10]=(a+s)*p,e[14]=2*a*s*p):(e[10]=-1,e[14]=-2*s),e}function R(e,t,r,s){var a=Math.tan(t.upDegrees*Math.PI/180),h=Math.tan(t.downDegrees*Math.PI/180),p=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),g=2/(p+u),m=2/(a+h);return e[0]=g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=m,e[6]=0,e[7]=0,e[8]=-((p-u)*g*.5),e[9]=(a-h)*m*.5,e[10]=s/(r-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*r/(r-s),e[15]=0,e}function K(e,t,r,s,a,h,p){var u=1/(t-r),g=1/(s-a),m=1/(h-p);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*m,e[11]=0,e[12]=(t+r)*u,e[13]=(a+s)*g,e[14]=(p+h)*m,e[15]=1,e}function we(e,t,r,s){var a=void 0,h=void 0,p=void 0,u=void 0,g=void 0,m=void 0,_=void 0,F=void 0,I=void 0,P=void 0,V=t[0],O=t[1],B=t[2],J=s[0],Me=s[1],ae=s[2],le=r[0],Ae=r[1],de=r[2];return Math.abs(V-le)<T.EPSILON&&Math.abs(O-Ae)<T.EPSILON&&Math.abs(B-de)<T.EPSILON?re(e):(_=V-le,F=O-Ae,I=B-de,P=1/Math.sqrt(_*_+F*F+I*I),_*=P,F*=P,I*=P,a=Me*I-ae*F,h=ae*_-J*I,p=J*F-Me*_,P=Math.sqrt(a*a+h*h+p*p),P?(P=1/P,a*=P,h*=P,p*=P):(a=0,h=0,p=0),u=F*p-I*h,g=I*a-_*p,m=_*h-F*a,P=Math.sqrt(u*u+g*g+m*m),P?(P=1/P,u*=P,g*=P,m*=P):(u=0,g=0,m=0),e[0]=a,e[1]=u,e[2]=_,e[3]=0,e[4]=h,e[5]=g,e[6]=F,e[7]=0,e[8]=p,e[9]=m,e[10]=I,e[11]=0,e[12]=-(a*V+h*O+p*B),e[13]=-(u*V+g*O+m*B),e[14]=-(_*V+F*O+I*B),e[15]=1,e)}function Ee(e,t,r,s){var a=t[0],h=t[1],p=t[2],u=s[0],g=s[1],m=s[2],_=a-r[0],F=h-r[1],I=p-r[2],P=_*_+F*F+I*I;P>0&&(P=1/Math.sqrt(P),_*=P,F*=P,I*=P);var V=g*I-m*F,O=m*_-u*I,B=u*F-g*_;return P=V*V+O*O+B*B,P>0&&(P=1/Math.sqrt(P),V*=P,O*=P,B*=P),e[0]=V,e[1]=O,e[2]=B,e[3]=0,e[4]=F*B-I*O,e[5]=I*V-_*B,e[6]=_*O-F*V,e[7]=0,e[8]=_,e[9]=F,e[10]=I,e[11]=0,e[12]=a,e[13]=h,e[14]=p,e[15]=1,e}function Te(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function L(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function A(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function b(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function S(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function E(e,t,r,s){return e[0]=t[0]+r[0]*s,e[1]=t[1]+r[1]*s,e[2]=t[2]+r[2]*s,e[3]=t[3]+r[3]*s,e[4]=t[4]+r[4]*s,e[5]=t[5]+r[5]*s,e[6]=t[6]+r[6]*s,e[7]=t[7]+r[7]*s,e[8]=t[8]+r[8]*s,e[9]=t[9]+r[9]*s,e[10]=t[10]+r[10]*s,e[11]=t[11]+r[11]*s,e[12]=t[12]+r[12]*s,e[13]=t[13]+r[13]*s,e[14]=t[14]+r[14]*s,e[15]=t[15]+r[15]*s,e}function w(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function v(e,t){var r=e[0],s=e[1],a=e[2],h=e[3],p=e[4],u=e[5],g=e[6],m=e[7],_=e[8],F=e[9],I=e[10],P=e[11],V=e[12],O=e[13],B=e[14],J=e[15],Me=t[0],ae=t[1],le=t[2],Ae=t[3],de=t[4],Ce=t[5],Be=t[6],Fe=t[7],Ne=t[8],ke=t[9],Ve=t[10],je=t[11],Se=t[12],Ze=t[13],tt=t[14],ct=t[15];return Math.abs(r-Me)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(Me))&&Math.abs(s-ae)<=T.EPSILON*Math.max(1,Math.abs(s),Math.abs(ae))&&Math.abs(a-le)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(le))&&Math.abs(h-Ae)<=T.EPSILON*Math.max(1,Math.abs(h),Math.abs(Ae))&&Math.abs(p-de)<=T.EPSILON*Math.max(1,Math.abs(p),Math.abs(de))&&Math.abs(u-Ce)<=T.EPSILON*Math.max(1,Math.abs(u),Math.abs(Ce))&&Math.abs(g-Be)<=T.EPSILON*Math.max(1,Math.abs(g),Math.abs(Be))&&Math.abs(m-Fe)<=T.EPSILON*Math.max(1,Math.abs(m),Math.abs(Fe))&&Math.abs(_-Ne)<=T.EPSILON*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(F-ke)<=T.EPSILON*Math.max(1,Math.abs(F),Math.abs(ke))&&Math.abs(I-Ve)<=T.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ve))&&Math.abs(P-je)<=T.EPSILON*Math.max(1,Math.abs(P),Math.abs(je))&&Math.abs(V-Se)<=T.EPSILON*Math.max(1,Math.abs(V),Math.abs(Se))&&Math.abs(O-Ze)<=T.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ze))&&Math.abs(B-tt)<=T.EPSILON*Math.max(1,Math.abs(B),Math.abs(tt))&&Math.abs(J-ct)<=T.EPSILON*Math.max(1,Math.abs(J),Math.abs(ct))}var G=ee,M=b},{"./common.js":"96TPZ","@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}],"2SUV4":[function(C,Pe,o){var l=C("@parcel/transformer-js/src/esmodule-helpers.js");l.defineInteropFlag(o),l.export(o,"VRButton",()=>T);class T{static createButton(ne){const x=document.createElement("button");function Q(){let k=null;async function pe(ve){ve.addEventListener("end",ee),await ne.xr.setSession(ve),x.textContent="EXIT VR",k=ve}function ee(){k.removeEventListener("end",ee),x.textContent="ENTER VR",k=null}x.style.display="",x.style.cursor="pointer",x.style.left="calc(50% - 50px)",x.style.width="100px",x.textContent="ENTER VR",x.onmouseenter=function(){x.style.opacity="1.0"},x.onmouseleave=function(){x.style.opacity="0.5"},x.onclick=function(){if(k===null){const ve={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",ve).then(pe)}else k.end()}}function Z(){x.style.display="",x.style.cursor="auto",x.style.left="calc(50% - 75px)",x.style.width="150px",x.onmouseenter=null,x.onmouseleave=null,x.onclick=null}function re(){Z(),x.textContent="VR NOT SUPPORTED"}function Y(k){Z(),console.warn("Exception when trying to call xr.isSessionSupported",k),x.textContent="VR NOT ALLOWED"}function te(k){k.style.position="absolute",k.style.bottom="20px",k.style.padding="12px 6px",k.style.border="1px solid #fff",k.style.borderRadius="4px",k.style.background="rgba(0,0,0,0.1)",k.style.color="#fff",k.style.font="normal 13px sans-serif",k.style.textAlign="center",k.style.opacity="0.5",k.style.outline="none",k.style.zIndex="999"}if("xr"in navigator)return x.id="VRButton",x.style.display="none",te(x),navigator.xr.isSessionSupported("immersive-vr").then(function(k){k?Q():re(),k&&T.xrSessionIsGranted&&x.click()}).catch(Y),x;{const k=document.createElement("a");return window.isSecureContext===!1?(k.href=document.location.href.replace(/^http:/,"https:"),k.innerHTML="WEBXR NEEDS HTTPS"):(k.href="https://immersiveweb.dev/",k.innerHTML="WEBXR NOT AVAILABLE"),k.style.left="calc(50% - 90px)",k.style.width="180px",k.style.textDecoration="none",te(k),k}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{T.xrSessionIsGranted=!0})}}}T.xrSessionIsGranted=!1,T.registerSessionGrantedListener()},{"@parcel/transformer-js/src/esmodule-helpers.js":"14tkN"}]},[],null,"parcelRequireaaed")});export default zt();
