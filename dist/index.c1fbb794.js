import{$a74766187430c211946a961ea9acc2a6$init as t}from"./index.35f27ad7.js";var e,n,a,r,i=!1;function o(){return n||(n=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return s(t[0])}return"/"}()),n}function s(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}function c(t){let e=(""+t).match(/(https?|file|ftp):\/\/[^/]+/);if(!e)throw new Error("Origin not found");return e[0]}function l(){return i||(i=!0,n=null,(e={}).getBundleURL=o,a=s,e.getBaseURL=a,r=c,e.getOrigin=r),e}var d,u=!1;function g(){return u||(u=!0,d={},d=l().getBundleURL()+"service-worker.js"),d}(async()=>{try{const e=await(async()=>new Promise(((t,e)=>{let n,a=0;const r=()=>{n.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()};"serviceWorker"in navigator?window.addEventListener("load",(async()=>{if(n=await navigator.serviceWorker.register(g()),n.installing&&navigator.storage){const t=await navigator.storage.estimate();t&&(a=(void 0).formatBytes(t.usage))}n.onupdatefound=async()=>{const a=n.installing;a.onstatechange=async()=>{if("installed"===a.state)if(navigator.serviceWorker){const e=await navigator.serviceWorker.getRegistration();e&&e.waiting&&t(r)}else e("No Service Worker");else e("Not Installed")}}})):e("Service Workers not allowed")})))();t().setToast("An Update is available! Press update to install it");const n=document.createElement("button");n.classList.add("update-available"),n.innerHTML="Update to new version",n.addEventListener("click",(()=>e()),{once:!0}),document.documentElement.appendChild(n)}catch(t){}})();
//# sourceMappingURL=index.c1fbb794.js.map
